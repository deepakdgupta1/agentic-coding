<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Agentic Coding Flywheel Setup &lpar;ACFS&rpar;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="agentic-coding-flywheel-setup-acfs">Agentic Coding Flywheel Setup (ACFS)</h1>
<p><img src="https://img.shields.io/badge/Version-0.5.0-bd93f9?style=for-the-badge" alt="Version">
<img src="https://img.shields.io/badge/Platform-Ubuntu%2025.10-6272a4?style=for-the-badge" alt="Platform">
<img src="https://img.shields.io/badge/License-MIT-50fa7b?style=for-the-badge" alt="License">
<img src="https://img.shields.io/badge/Shell-Bash-ff79c6?style=for-the-badge" alt="Shell"></p>
<p align="center">
  <strong>ğŸŒ <a href="https://agent-flywheel.com">agent-flywheel.com</a></strong> â€” Interactive setup wizard for beginners
</p>
<blockquote>
<p><strong>From zero to fully-configured agentic coding VPS in 30 minutes.</strong>
A complete bootstrapping system that transforms a fresh Ubuntu VPS into a professional AI-powered development environment.</p>
</blockquote>
<div align="center" style="margin: 1.2em 0;">
  <table>
    <tr>
      <td align="center" style="padding: 8px;">
        <strong>The Vision</strong><br/>
        <sub>Beginner with laptop â†’ Wizard â†’ VPS â†’ Agents coding for you</sub>
      </td>
    </tr>
  </table>
</div>
<h3 id="quick-install">Quick Install</h3>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh?<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<p>The installer is <strong>idempotent</strong>â€”if interrupted, simply re-run it. It will automatically resume from the last completed phase without prompts.</p>
<blockquote>
<p><strong>Production environments:</strong> For stable, reproducible installs, pin to a tagged release or specific commit:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Preferred: use a tagged release (e.g., v0.5.0)</span>
ACFS_REF=v0.5.0 curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/v0.5.0/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe

<span class="hljs-comment"># Alternative: pin to a specific commit SHA</span>
ACFS_REF=abc1234 curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/abc1234/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<p>Tagged releases are tested and stable. Setting <code>ACFS_REF</code> ensures all fetched scripts use the same version.</p>
</blockquote>
<hr>
<h2 id="tldr">TL;DR</h2>
<p><strong>ACFS</strong> is a complete system for bootstrapping agentic coding environments:</p>
<p><strong>Why you'd care:</strong></p>
<ul>
<li><strong>Zero to Hero:</strong> Takes complete beginners from &quot;I have a laptop&quot; to &quot;I have Claude/Codex/Gemini agents writing code for me on a VPS&quot;</li>
<li><strong>One-Liner Magic:</strong> A single <code>curl | bash</code> command installs 30+ tools, configures everything, and sets up three AI coding agents</li>
<li><strong>Vibe Mode:</strong> Pre-configured for maximum velocityâ€”passwordless sudo, dangerous agent flags enabled, optimized shell environment</li>
<li><strong>Battle-Tested Stack:</strong> Includes the complete Dicklesworthstone stack (10 tools + utilities) for agent orchestration, coordination, and safety</li>
</ul>
<p><strong>What you get:</strong></p>
<ul>
<li>Modern shell (zsh + oh-my-zsh + powerlevel10k)</li>
<li>All language runtimes (bun, uv/Python, Rust, Go)</li>
<li>Three AI coding agents (Claude Code, Codex CLI, Gemini CLI)</li>
<li>Agent coordination tools (NTM, MCP Agent Mail, SLB)</li>
<li>Cloud CLIs (Vault, Wrangler, Supabase, Vercel)</li>
<li>And 20+ more developer tools</li>
</ul>
<hr>
<h2 id="the-acfs-experience">The ACFS Experience</h2>
<pre><code class="language-mermaid">graph LR
    %%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e8f5e9', 'lineColor': '#90a4ae'}}}%%

    subgraph user [&quot;User's Machine&quot;]
        LAPTOP[&quot;Laptop&quot;]
        BROWSER[&quot;Browser&quot;]
    end

    subgraph wizard [&quot;Wizard Website&quot;]
        STEPS[&quot;13-Step Guide&quot;]
    end

    subgraph vps [&quot;Fresh VPS&quot;]
        UBUNTU[&quot;Ubuntu 25.10&quot;]
        INSTALLER[&quot;install.sh&quot;]
        CONFIGURED[&quot;Configured VPS&quot;]
    end

    subgraph agents [&quot;AI Agents&quot;]
        CLAUDE[&quot;Claude Code&quot;]
        CODEX[&quot;Codex CLI&quot;]
        GEMINI[&quot;Gemini CLI&quot;]
    end

    LAPTOP --&gt; BROWSER
    BROWSER --&gt; STEPS
    STEPS --&gt;|SSH| UBUNTU
    UBUNTU --&gt; INSTALLER
    INSTALLER --&gt; CONFIGURED
    CONFIGURED --&gt; CLAUDE
    CONFIGURED --&gt; CODEX
    CONFIGURED --&gt; GEMINI

    classDef user fill:#e3f2fd,stroke:#90caf9,stroke-width:2px
    classDef wizard fill:#fff8e1,stroke:#ffcc80,stroke-width:2px
    classDef vps fill:#f3e5f5,stroke:#ce93d8,stroke-width:2px
    classDef agent fill:#e8f5e9,stroke:#a5d6a7,stroke-width:2px

    class LAPTOP,BROWSER user
    class STEPS wizard
    class UBUNTU,INSTALLER,CONFIGURED vps
    class CLAUDE,CODEX,GEMINI agent
</code></pre>
<h3 id="for-beginners">For Beginners</h3>
<p>ACFS includes a <strong>step-by-step wizard website</strong> at <a href="https://agent-flywheel.com">agent-flywheel.com</a> that guides complete beginners through:</p>
<ol>
<li>Installing a terminal on their local machine</li>
<li>Generating SSH keys (for secure access later)</li>
<li>Renting a VPS from providers like OVH or Contabo</li>
<li>Connecting via SSH with a password (initial setup)</li>
<li>Running the installer (which sets up key-based access)</li>
<li>Reconnecting securely with your SSH key</li>
<li>Starting to code with AI agents</li>
</ol>
<h3 id="for-developers">For Developers</h3>
<p>ACFS is a <strong>one-liner</strong> that transforms any fresh Ubuntu VPS into a fully-configured development environment with modern tooling and three AI coding agents ready to go.</p>
<h3 id="for-teams">For Teams</h3>
<p>ACFS provides a <strong>reproducible, idempotent</strong> setup that ensures every team member's VPS environment is identicalâ€”eliminating &quot;works on my machine&quot; for agentic workflows.</p>
<hr>
<h2 id="architecture--design">Architecture &amp; Design</h2>
<p>ACFS is built around a <strong>single source of truth</strong>: the manifest file. Everything elseâ€”the installer scripts, doctor checks, website contentâ€”derives from this central definition. This architecture ensures consistency and makes the system easy to extend.</p>
<h3 id="one-page-system-data-flow">One-Page System Data Flow</h3>
<pre><code class="language-mermaid">flowchart TB
  %% User and website
  subgraph U[&quot;User (local machine)&quot;]
    Browser[&quot;Browser&quot;]
    Terminal[&quot;Terminal / SSH client&quot;]
  end

  subgraph W[&quot;Wizard Website (Next.js 16) â€” apps/web&quot;]
    Wizard[&quot;Wizard UI (/wizard/*)&quot;]
    InstallRoute[&quot;GET /install (302 redirect to raw install.sh)&quot;]
    WebState[&quot;State: URL params + localStorage&quot;]
  end

  %% Repo sources
  subgraph R[&quot;Repo (source)&quot;]
    Manifest[&quot;acfs.manifest.yaml&lt;br/&gt;Modules + install + verify + deps&quot;]
    Generator[&quot;packages/manifest&lt;br/&gt;Parser (Zod) + generate.ts&quot;]
    Generated[&quot;scripts/generated/* (reference)&lt;br/&gt;category installers + doctor_checks.sh&quot;]
    Installer[&quot;install.sh (production one-liner)&quot;]
    Lib[&quot;scripts/lib/*&lt;br/&gt;security / doctor / update / services-setup&quot;]
    Configs[&quot;acfs/*&lt;br/&gt;zshrc + tmux.conf + onboard lessons&quot;]
    Checksums[&quot;checksums.yaml&lt;br/&gt;sha256 for upstream installers&quot;]
    Tests[&quot;tests/vm/test_install_ubuntu.sh&lt;br/&gt;Docker integration test&quot;]
  end

  %% Target VPS
  subgraph V[&quot;Target VPS (Ubuntu 25.10, auto-upgraded)&quot;]
    Run[&quot;Run install.sh&quot;]
    Verify[&quot;Verified upstream installers&lt;br/&gt;(security.sh + checksums.yaml)&quot;]
    AcfsHome[&quot;~/.acfs/&lt;br/&gt;configs + scripts + state.json&quot;]
    Commands[&quot;Commands&lt;br/&gt;acfs doctor / acfs update / acfs services-setup / onboard&quot;]
    Tools[&quot;Installed tools&lt;br/&gt;bun/uv/rust/go + tmux/rg/gh + vault + ...&quot;]
    Agents[&quot;Agent CLIs&lt;br/&gt;claude / codex / gemini&quot;]
    Stack[&quot;Stack tools&lt;br/&gt;ntm / mcp_agent_mail / ubs / bv / cass / cm / caam / slb / dcg / ru&quot;]
  end

  %% Website guidance flow
  Browser --&gt; Wizard
  Wizard --&gt; WebState
  Wizard --&gt; InstallRoute
  InstallRoute --&gt;|redirects to| Installer

  %% How users fetch/run the installer
  Terminal --&gt;|curl / bash| Installer
  Terminal --&gt;|SSH| Run

  %% Manifest-driven generation (reference today)
  Manifest --&gt; Generator --&gt; Generated
  Generated -.-&gt;|planned: install.sh calls generated install_all.sh| Installer

  %% Installer composition
  Lib --&gt; Installer
  Configs --&gt; Installer
  Checksums --&gt; Installer
  Tests --&gt;|validates| Installer

  %% VPS install results
  Installer --&gt; Run
  Run --&gt; Verify
  Verify --&gt; Tools
  Verify --&gt; Agents
  Verify --&gt; Stack
  Run --&gt; AcfsHome --&gt; Commands
</code></pre>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            SOURCE OF TRUTH                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  acfs.manifest.yaml                                                  â”‚    â”‚
â”‚  â”‚  Tool Definitions â€¢ Install Commands â€¢ Verification Logic           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        CODE GENERATION            â”‚   â”‚        WIZARD WEBSITE             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TypeScript Parser (Zod)     â”‚  â”‚   â”‚  â”‚ apps/web/ (Next.js 16)      â”‚  â”‚
â”‚  â”‚ generate.ts                 â”‚  â”‚   â”‚  â”‚ agent-flywheel.com          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GENERATED OUTPUTS (REFERENCE)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ scripts/generated/ â”‚  â”‚ doctor_checks.sh   â”‚  â”‚ install_all.sh     â”‚   â”‚
â”‚  â”‚ 11 Category Scriptsâ”‚  â”‚ Verification Logic â”‚  â”‚ Master Installer   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            INSTALLER                                       â”‚
â”‚  install.sh + scripts/lib/*.sh + checksums.yaml (SHA256 verification)     â”‚
â”‚  (scripts/generated/* are sourced; execution is feature-flagged)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TARGET VPS                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 30+ Tools    â”‚  â”‚ zsh + p10k   â”‚  â”‚ AI Agents    â”‚  â”‚ ~/.acfs/     â”‚   â”‚
â”‚  â”‚ Installed    â”‚  â”‚ Shell Config â”‚  â”‚ Claude/Codex â”‚  â”‚ Configurationsâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="why-this-architecture">Why This Architecture?</h3>
<p><strong>Single Source of Truth</strong>: The manifest file (<code>acfs.manifest.yaml</code>) defines every toolâ€”its name, description, install commands, and verification logic. When you add or edit a tool in the manifest, the generator automatically updates the generated scripts and manifest-derived checks. The production one-liner installer (<code>install.sh</code>) is still hand-written today, so behavior changes may also require updating <code>install.sh</code> until full migration.</p>
<p><strong>TypeScript + Zod Validation</strong>: The manifest parser uses Zod schemas to validate the YAML at parse time. Typos, missing fields, and structural errors are caught immediately during generationâ€”not at runtime on a user's VPS when the installer fails halfway through.</p>
<p><strong>Generated Scripts</strong>: Rather than hand-maintaining 11 category installer scripts and keeping them synchronized, the generator produces them from the manifest. This means:</p>
<ul>
<li>A consistent, auditable view of manifest-defined install logic (some modules intentionally emit TODOs)</li>
<li>Consistent error handling and logging across all modules</li>
<li>A clear path toward future installer integration</li>
</ul>
<h3 id="components">Components</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Path</th>
<th>Technology</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Manifest</strong></td>
<td><code>acfs.manifest.yaml</code></td>
<td>YAML</td>
<td>Single source of truth for all tools</td>
</tr>
<tr>
<td><strong>Generator</strong></td>
<td><code>packages/manifest/src/generate.ts</code></td>
<td>TypeScript/Bun</td>
<td>Produces installer scripts from manifest</td>
</tr>
<tr>
<td><strong>Website</strong></td>
<td><code>apps/web/</code></td>
<td>Next.js 16 + Tailwind 4</td>
<td>Step-by-step wizard for beginners</td>
</tr>
<tr>
<td><strong>Installer</strong></td>
<td><code>install.sh</code></td>
<td>Bash</td>
<td>One-liner bootstrap script</td>
</tr>
<tr>
<td><strong>Lib Scripts</strong></td>
<td><code>scripts/lib/</code></td>
<td>Bash</td>
<td>Modular installer functions</td>
</tr>
<tr>
<td><strong>Generated Scripts</strong></td>
<td><code>scripts/generated/</code></td>
<td>Bash</td>
<td>Auto-generated category installers (sourced by <code>install.sh</code>; execution is feature-flagged)</td>
</tr>
<tr>
<td><strong>Configs</strong></td>
<td><code>acfs/</code></td>
<td>Shell/Tmux configs</td>
<td>Files deployed to <code>~/.acfs/</code></td>
</tr>
<tr>
<td><strong>Onboarding</strong></td>
<td><code>acfs/onboard/</code></td>
<td>Bash + Markdown</td>
<td>Interactive tutorial system</td>
</tr>
<tr>
<td><strong>Checksums</strong></td>
<td><code>checksums.yaml</code></td>
<td>YAML</td>
<td>SHA256 hashes for upstream installers</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="the-manifest-system">The Manifest System</h2>
<p><code>acfs.manifest.yaml</code> is the <strong>single source of truth</strong> for all tools installed by ACFS. It defines what gets installed, how to install it, and how to verify the installation worked.</p>
<h3 id="manifest-structure">Manifest Structure</h3>
<pre><code class="language-yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;1.0&quot;</span>
<span class="hljs-attr">meta:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;ACFS&quot;</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Agentic Coding Flywheel Setup&quot;</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">&quot;0.1.0&quot;</span>

<span class="hljs-attr">modules:</span>
  <span class="hljs-attr">base.system:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Base packages + sane defaults&quot;</span>
    <span class="hljs-attr">category:</span> <span class="hljs-string">base</span>
    <span class="hljs-attr">install:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">sudo</span> <span class="hljs-string">apt-get</span> <span class="hljs-string">update</span> <span class="hljs-string">-y</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">sudo</span> <span class="hljs-string">apt-get</span> <span class="hljs-string">install</span> <span class="hljs-string">-y</span> <span class="hljs-string">curl</span> <span class="hljs-string">git</span> <span class="hljs-string">ca-certificates</span> <span class="hljs-string">unzip</span> <span class="hljs-string">tar</span> <span class="hljs-string">xz-utils</span> <span class="hljs-string">jq</span> <span class="hljs-string">build-essential</span>
    <span class="hljs-attr">verify:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">curl</span> <span class="hljs-string">--version</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">--version</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">jq</span> <span class="hljs-string">--version</span>

  <span class="hljs-attr">agents.claude:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Claude Code&quot;</span>
    <span class="hljs-attr">category:</span> <span class="hljs-string">agents</span>
    <span class="hljs-attr">install:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;Install claude code via official method&quot;</span>
    <span class="hljs-attr">verify:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">claude</span> <span class="hljs-string">--version</span> <span class="hljs-string">||</span> <span class="hljs-string">claude</span> <span class="hljs-string">--help</span>
</code></pre>
<p>Each module specifies:</p>
<ul>
<li><strong>description</strong>: Human-readable name</li>
<li><strong>category</strong>: Grouping for installer organization (base, shell, cli, lang, tools, db, cloud, agents, stack, acfs)</li>
<li><strong>install</strong>: Commands to run (or descriptions that become TODOs)</li>
<li><strong>verify</strong>: Commands that must succeed to confirm installation</li>
</ul>
<h3 id="the-generator-pipeline">The Generator Pipeline</h3>
<p>The TypeScript generator (<code>packages/manifest/src/generate.ts</code>) reads the manifest and produces:</p>
<ol>
<li>
<p><strong>Category Scripts</strong> (<code>scripts/generated/install_base.sh</code>, <code>install_agents.sh</code>, etc.)</p>
<ul>
<li>One script per category with individual install functions</li>
<li>Consistent logging and error handling</li>
<li>Verification checks after each module</li>
</ul>
</li>
<li>
<p><strong>Doctor Checks</strong> (<code>scripts/generated/doctor_checks.sh</code>)</p>
<ul>
<li>All verify commands extracted into a runnable health check</li>
<li>Tab-delimited format (to safely handle <code>||</code> in shell commands)</li>
<li>Reports pass/fail/skip for each module</li>
</ul>
</li>
<li>
<p><strong>Master Installer</strong> (<code>scripts/generated/install_all.sh</code>)</p>
<ul>
<li>Sources all category scripts</li>
<li>Runs them in dependency order</li>
<li>Single entry point for running the generated installers</li>
</ul>
</li>
</ol>
<blockquote>
<p>Note: The production one-liner installer (<code>install.sh</code>) defaults to the legacy implementations; generated installers are sourced and can be enabled per-category via feature flags during migration.</p>
</blockquote>
<p>To regenerate after manifest changes:</p>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> packages/manifest
bun run generate        <span class="hljs-comment"># Generate scripts</span>
bun run generate:dry    <span class="hljs-comment"># Preview without writing</span>
</code></pre>
<h3 id="why-typescript-for-code-generation">Why TypeScript for Code Generation?</h3>
<p>Shell can parse YAML with <code>yq</code>, but TypeScript + Zod offers:</p>
<ul>
<li><strong>Type safety</strong>: The parser knows the exact shape of a manifest</li>
<li><strong>Validation</strong>: Zod catches malformed YAML with descriptive errors</li>
<li><strong>Transformation</strong>: Complex logic (sorting by dependencies, escaping) is natural in TypeScript</li>
<li><strong>Consistency</strong>: All generated code follows the same patterns</li>
</ul>
<p>The generator itself is ~400 lines of TypeScript. The generated output is ~1000 lines of Bash across 13 files. The trade-off is clearly in favor of maintaining the generator.</p>
<hr>
<h2 id="security-verification">Security Verification</h2>
<p>ACFS downloads and executes installer scripts from the internet. This is inherently riskyâ€”a compromised upstream could inject malicious code. The security verification system mitigates this risk.</p>
<h3 id="how-it-works">How It Works</h3>
<p>The <code>checksums.yaml</code> file contains SHA256 hashes for all upstream installer scripts:</p>
<pre><code class="language-yaml"><span class="hljs-comment"># checksums.yaml</span>
<span class="hljs-attr">installers:</span>
  <span class="hljs-attr">bun:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">&quot;https://bun.sh/install&quot;</span>
    <span class="hljs-attr">sha256:</span> <span class="hljs-string">&quot;a1b2c3d4...&quot;</span>

  <span class="hljs-attr">rust:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">&quot;https://sh.rustup.rs&quot;</span>
    <span class="hljs-attr">sha256:</span> <span class="hljs-string">&quot;e5f6a7b8...&quot;</span>
</code></pre>
<p>The security library (<code>scripts/lib/security.sh</code>) provides:</p>
<ol>
<li>
<p><strong>HTTPS Enforcement</strong>: All installer URLs must use HTTPS. Non-HTTPS URLs fail immediately.</p>
</li>
<li>
<p><strong>Checksum Verification</strong>: Before executing a downloaded script, the system:</p>
<ul>
<li>Downloads the content to memory</li>
<li>Calculates the SHA256 hash</li>
<li>Compares against the stored hash</li>
<li>Only executes if they match</li>
</ul>
</li>
<li>
<p><strong>Verification Modes</strong>:</p>
<pre><code class="language-bash">./scripts/lib/security.sh --<span class="hljs-built_in">print</span>              <span class="hljs-comment"># List all upstream URLs</span>
./scripts/lib/security.sh --verify             <span class="hljs-comment"># Verify all against saved checksums</span>
./scripts/lib/security.sh --update-checksums   <span class="hljs-comment"># Generate new checksums.yaml</span>
./scripts/lib/security.sh --checksum URL       <span class="hljs-comment"># Calculate SHA256 of any URL</span>
</code></pre>
</li>
</ol>
<h3 id="when-checksums-fail">When Checksums Fail</h3>
<p>A checksum mismatch can mean:</p>
<ol>
<li><strong>Normal update</strong>: The upstream maintainer released a new version</li>
<li><strong>Potential compromise</strong>: Someone modified the script maliciously</li>
</ol>
<p>The verification report distinguishes these cases:</p>
<ul>
<li>If multiple checksums fail simultaneously, investigate before updating</li>
<li>If a single checksum fails after a known release, update is likely safe</li>
</ul>
<p>To update after verifying a legitimate upstream change:</p>
<pre><code class="language-bash">./scripts/lib/security.sh --update-checksums &gt; checksums.yaml
git diff checksums.yaml  <span class="hljs-comment"># Review what changed</span>
git commit -m <span class="hljs-string">&quot;chore: update upstream checksums&quot;</span>
</code></pre>
<h3 id="why-this-approach">Why This Approach?</h3>
<p>The <code>curl | bash</code> pattern is controversial but practical. ACFS makes it safer by:</p>
<ul>
<li>Verifying content before execution (not just transport via HTTPS)</li>
<li>Making checksums auditable in version control</li>
<li>Providing tools to detect and investigate changes</li>
<li>Failing closed (no execution on mismatch)</li>
</ul>
<p>This is defense in depthâ€”HTTPS protects transport, checksums protect content.</p>
<hr>
<h2 id="the-installer">The Installer</h2>
<p>The installer is the heart of ACFSâ€”a modular Bash script that transforms a fresh Ubuntu VPS into a fully-configured development environment.</p>
<h3 id="usage">Usage</h3>
<p>Full vibe mode (recommended for throwaway VPS):</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh?<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<p>Interactive mode (asks for confirmation):</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh&quot;</span> | bash
</code></pre>
<p>Safe mode (no passwordless sudo, agent confirmations enabled):</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh&quot;</span> | bash -s -- --mode safe
</code></pre>
<h3 id="installer-modes">Installer Modes</h3>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Passwordless Sudo</th>
<th>Agent Flags</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>vibe</strong></td>
<td>Yes</td>
<td><code>--dangerously-skip-permissions</code></td>
<td>Throwaway VPS, maximum velocity</td>
</tr>
<tr>
<td><strong>safe</strong></td>
<td>No</td>
<td>Standard confirmations</td>
<td>Production-like environments</td>
</tr>
</tbody>
</table>
<h3 id="installation-phases">Installation Phases</h3>
<pre><code class="language-mermaid">graph TD
    %%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e8f5e9', 'lineColor': '#90a4ae'}}}%%

    A[&quot;Phase 1: User Normalization&lt;br/&gt;&lt;small&gt;Create ubuntu user, migrate SSH keys&lt;/small&gt;&quot;]
    B[&quot;Phase 2: APT Packages&lt;br/&gt;&lt;small&gt;Essential system packages&lt;/small&gt;&quot;]
    C[&quot;Phase 3: Shell Setup&lt;br/&gt;&lt;small&gt;zsh, oh-my-zsh, powerlevel10k&lt;/small&gt;&quot;]
    D[&quot;Phase 4: CLI Tools&lt;br/&gt;&lt;small&gt;ripgrep, fzf, lazygit, etc.&lt;/small&gt;&quot;]
    E[&quot;Phase 5: Language Runtimes&lt;br/&gt;&lt;small&gt;bun, uv, rust, go&lt;/small&gt;&quot;]
    F[&quot;Phase 6: AI Agents&lt;br/&gt;&lt;small&gt;claude, codex, gemini&lt;/small&gt;&quot;]
    G[&quot;Phase 7: Cloud Tools&lt;br/&gt;&lt;small&gt;vault, wrangler, supabase, vercel&lt;/small&gt;&quot;]
    H[&quot;Phase 8: Dicklesworthstone Stack&lt;br/&gt;&lt;small&gt;ntm, dcg, ru, ubs, mcp_agent_mail, etc.&lt;/small&gt;&quot;]
    I[&quot;Phase 9: Configuration&lt;br/&gt;&lt;small&gt;Deploy acfs.zshrc, tmux.conf&lt;/small&gt;&quot;]
    J[&quot;Phase 10: Verification&lt;br/&gt;&lt;small&gt;acfs doctor&lt;/small&gt;&quot;]

    A --&gt; B --&gt; C --&gt; D --&gt; E --&gt; F --&gt; G --&gt; H --&gt; I --&gt; J

    classDef phase fill:#e8f5e9,stroke:#81c784,stroke-width:2px,color:#2e7d32
    class A,B,C,D,E,F,G,H,I,J phase
</code></pre>
<h3 id="key-properties">Key Properties</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Idempotent</strong></td>
<td>Safe to re-run; skips already-installed tools</td>
</tr>
<tr>
<td><strong>Checkpointed</strong></td>
<td>Phases resume automatically from <code>~/.acfs/state.json</code></td>
</tr>
<tr>
<td><strong>Pre-flight validated</strong></td>
<td>Run <code>scripts/preflight.sh</code> to catch issues before install</td>
</tr>
<tr>
<td><strong>Logged</strong></td>
<td>Colored output with progress indicators</td>
</tr>
<tr>
<td><strong>Modular</strong></td>
<td>Each category is a separate sourceable script</td>
</tr>
</tbody>
</table>
<h3 id="resume-capability">Resume Capability</h3>
<p>The installer tracks progress in <code>~/.acfs/state.json</code>. If interrupted:</p>
<ul>
<li>Re-run the same commandâ€”it resumes from the last completed phase</li>
<li>No prompts or confirmations needed (with <code>--yes</code>)</li>
<li>Already-installed tools are detected and skipped</li>
</ul>
<p>To force a fresh reinstall of all tools:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe --force-reinstall
</code></pre>
<h3 id="pre-flight-check">Pre-Flight Check</h3>
<p>Before running the full installer, validate your system:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/scripts/preflight.sh&quot;</span> | bash
</code></pre>
<p>This checks:</p>
<ul>
<li>OS compatibility (Ubuntu 22.04+; installer upgrades to 25.10)</li>
<li>Architecture (x86_64 or ARM64)</li>
<li>Memory and disk space</li>
<li>Network connectivity to required URLs</li>
<li>APT lock status</li>
<li>Potential conflicts (nvm, pyenv, existing ACFS)</li>
</ul>
<h3 id="console-output">Console Output</h3>
<p>The installer uses semantic colors for progress visibility:</p>
<pre><code class="language-bash">[1/8] Installing essential packages...     <span class="hljs-comment"># Blue: progress steps</span>
    Installing zsh, git, curl...           <span class="hljs-comment"># Gray: details</span>
âš ï¸  May take a few minutes                 <span class="hljs-comment"># Yellow: warnings</span>
âœ– Failed to install package               <span class="hljs-comment"># Red: errors</span>
âœ” Shell setup complete                    <span class="hljs-comment"># Green: success</span>
</code></pre>
<h3 id="automatic-ubuntu-upgrade">Automatic Ubuntu Upgrade</h3>
<p>ACFS automatically upgrades Ubuntu to version <strong>25.10</strong> before installation when running on older versions. This ensures compatibility with the latest packages and optimal performance.</p>
<p><strong>How it works:</strong></p>
<ol>
<li>Detects your current Ubuntu version</li>
<li>Calculates the upgrade path (e.g., 24.04 â†’ 25.04 â†’ 25.10)</li>
<li>Performs sequential <code>do-release-upgrade</code> operations</li>
<li>Reboots after each upgrade (handled automatically)</li>
<li>Resumes via systemd service after reboot</li>
<li>Continues ACFS installation once at target version</li>
</ol>
<p><strong>Expected timeline:</strong></p>
<ul>
<li>Each version hop takes 30-60 minutes</li>
<li>Full chain from 24.04 â†’ 25.10 takes 1.5-3 hours</li>
<li>SSH sessions disconnect during reboots (reconnect to monitor)</li>
</ul>
<p><strong>To skip automatic upgrade:</strong></p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe --skip-ubuntu-upgrade
</code></pre>
<p><strong>To specify a different target version:</strong></p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe --target-ubuntu=25.04
</code></pre>
<p><strong>Monitoring upgrade progress:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Check current status</span>
/var/lib/acfs/check_status.sh

<span class="hljs-comment"># View upgrade logs</span>
journalctl -u acfs-upgrade-resume -f

<span class="hljs-comment"># View detailed logs</span>
<span class="hljs-built_in">tail</span> -f /var/log/acfs/upgrade_resume.log
</code></pre>
<p><strong>Important notes:</strong></p>
<ul>
<li>Create a VM snapshot before upgrading (recommended but not required)</li>
<li>Upgrades cannot be undone without restoring from snapshot</li>
<li>The system will reboot multiple times automatically</li>
<li>EOL interim releases (like 24.10) may be skipped automatically if they are no longer offered by <code>do-release-upgrade</code></li>
<li>Reconnect via SSH after each reboot to monitor progress</li>
</ul>
<hr>
<h2 id="the-update-command">The Update Command</h2>
<p>After installation, keeping tools current is handled by <code>acfs-update</code>. It provides a unified interface for updating all installed components.</p>
<h3 id="usage-1">Usage</h3>
<pre><code class="language-bash">acfs-update                  <span class="hljs-comment"># Update apt, runtimes, shell, agents, and cloud CLIs</span>
acfs-update --stack          <span class="hljs-comment"># Include Dicklesworthstone stack tools</span>
acfs-update --agents-only    <span class="hljs-comment"># Only update coding agents</span>
acfs-update --runtime-only   <span class="hljs-comment"># Only update runtimes (bun, rust, uv, go)</span>
acfs-update --dry-run        <span class="hljs-comment"># Preview changes without making them</span>
acfs-update --<span class="hljs-built_in">yes</span> --quiet    <span class="hljs-comment"># Automated/CI mode with minimal output</span>
</code></pre>
<h3 id="what-gets-updated">What Gets Updated</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Tools</th>
<th>Method</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>System</strong></td>
<td>apt packages</td>
<td><code>apt update &amp;&amp; apt upgrade</code></td>
</tr>
<tr>
<td><strong>Shell</strong></td>
<td>OMZ, P10K, plugins</td>
<td><code>git pull</code> on each repo</td>
</tr>
<tr>
<td><strong>Shell</strong></td>
<td>Atuin, Zoxide</td>
<td>Re-run upstream installers</td>
</tr>
<tr>
<td><strong>Runtime</strong></td>
<td>Bun</td>
<td><code>bun upgrade</code></td>
</tr>
<tr>
<td><strong>Runtime</strong></td>
<td>Rust</td>
<td><code>rustup update stable</code></td>
</tr>
<tr>
<td><strong>Runtime</strong></td>
<td>uv (Python)</td>
<td><code>uv self update</code></td>
</tr>
<tr>
<td><strong>Runtime</strong></td>
<td>Go</td>
<td><code>apt upgrade</code> (if apt-managed)</td>
</tr>
<tr>
<td><strong>Agents</strong></td>
<td>Claude Code</td>
<td><code>claude update</code></td>
</tr>
<tr>
<td><strong>Agents</strong></td>
<td>Codex, Gemini</td>
<td><code>bun install -g @latest</code></td>
</tr>
<tr>
<td><strong>Cloud</strong></td>
<td>Wrangler, Vercel</td>
<td><code>bun install -g @latest</code></td>
</tr>
<tr>
<td><strong>Cloud</strong></td>
<td>Supabase</td>
<td>GitHub release tarball (sha256 checksums)</td>
</tr>
<tr>
<td><strong>Stack</strong></td>
<td>ntm, slb, ubs, dcg, ru, etc.</td>
<td>Re-run upstream installers</td>
</tr>
</tbody>
</table>
<h3 id="options">Options</h3>
<p><strong>Category Selection:</strong></p>
<pre><code class="language-bash">--apt-only       Only update system packages
--agents-only    Only update coding agents
--cloud-only     Only update cloud CLIs
--shell-only     Only update shell tools (OMZ, P10K, plugins, Atuin, Zoxide)
--runtime-only   Only update runtimes (bun, rust, uv, go)
--stack          Include Dicklesworthstone stack (disabled by default)
</code></pre>
<p><strong>Skip Categories:</strong></p>
<pre><code class="language-bash">--no-apt         Skip apt updates
--no-agents      Skip agent updates
--no-cloud       Skip cloud CLI updates
--no-shell       Skip shell tool updates
--no-runtime     Skip runtime updates (bun, rust, uv, go)
</code></pre>
<p><strong>Behavior:</strong></p>
<pre><code class="language-bash">--force            Install missing tools (not just update existing)
--dry-run          Preview changes without making them
--<span class="hljs-built_in">yes</span>, -y          Non-interactive mode (skip prompts)
--quiet, -q        Minimal output (only errors and summary)
--verbose, -v      Show detailed <span class="hljs-built_in">command</span> output
--abort-on-failure Stop on first failure (default: <span class="hljs-built_in">continue</span>)
</code></pre>
<h3 id="logs">Logs</h3>
<p>Update logs are automatically saved to <code>~/.acfs/logs/updates/</code> with timestamps:</p>
<pre><code class="language-bash"><span class="hljs-comment"># View most recent log</span>
<span class="hljs-built_in">cat</span> ~/.acfs/logs/updates/$(<span class="hljs-built_in">ls</span> -1t ~/.acfs/logs/updates | <span class="hljs-built_in">head</span> -1)

<span class="hljs-comment"># Follow a running update</span>
<span class="hljs-built_in">tail</span> -f ~/.acfs/logs/updates/$(<span class="hljs-built_in">ls</span> -1t ~/.acfs/logs/updates | <span class="hljs-built_in">head</span> -1)
</code></pre>
<h3 id="why-separate-from-the-installer">Why Separate from the Installer?</h3>
<p>The installer transforms a fresh VPS. The update command maintains an existing installation. Separating them allows:</p>
<ul>
<li><strong>Focused updates</strong>: Update just agents without touching system packages</li>
<li><strong>Dry-run previews</strong>: See what would change before committing</li>
<li><strong>Skip flags</strong>: Temporarily exclude categories that are working fine</li>
<li><strong>Stack control</strong>: The full stack reinstallation is opt-in (it's slow)</li>
<li><strong>Automated updates</strong>: Run via cron with <code>--yes --quiet</code></li>
</ul>
<hr>
<h2 id="acfs-cli-commands">ACFS CLI Commands</h2>
<p>After installation, the <code>acfs</code> command provides a unified interface for managing your environment. Each subcommand is designed to be fast, informative, and scriptable.</p>
<h3 id="quick-reference">Quick Reference</h3>
<pre><code class="language-bash">acfs info                    <span class="hljs-comment"># Lightning-fast system overview</span>
acfs cheatsheet              <span class="hljs-comment"># Discover installed aliases</span>
acfs dashboard generate      <span class="hljs-comment"># Generate HTML status page</span>
acfs doctor                  <span class="hljs-comment"># Health checks</span>
acfs newproj                 <span class="hljs-comment"># Create a new project (TUI or CLI)</span>
acfs update                  <span class="hljs-comment"># Update all tools</span>
acfs services-setup          <span class="hljs-comment"># Configure agent credentials</span>
acfs <span class="hljs-built_in">continue</span>                <span class="hljs-comment"># View upgrade progress after reboot</span>
</code></pre>
<h3 id="acfs-newproj--new-project-wizard"><code>acfs newproj</code> â€” New Project Wizard</h3>
<p>Create a new project directory with ACFS defaults (git init, optional bd, Claude settings, <a href="http://AGENTS.html">AGENTS.md</a>).
The interactive wizard is recommended for beginners.</p>
<p>Interactive wizard (recommended):</p>
<pre><code class="language-bash">acfs newproj --interactive
acfs newproj -i
acfs newproj -i myapp         <span class="hljs-comment"># Prefill project name</span>
</code></pre>
<p>The wizard guides you through:</p>
<ul>
<li>Project naming and location</li>
<li>Tech stack detection/selection</li>
<li>Feature selection (bd, Claude settings, <a href="http://AGENTS.html">AGENTS.md</a>, UBS ignore)</li>
<li><a href="http://AGENTS.html">AGENTS.md</a> customization preview</li>
</ul>
<details>
<summary><strong>TUI Wizard Screenshots</strong></summary>
<p><strong>Welcome Screen:</strong></p>
<pre><code>    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                       â•‘
    â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                â•‘
    â•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•                â•‘
    â•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                â•‘
    â•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•”â•â•â•   â•šâ•â•â•â•â–ˆâ–ˆâ•‘                â•‘
    â•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘                â•‘
    â•‘     â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•      â•šâ•â•â•â•â•â•â•                â•‘
    â•‘                                                       â•‘
    â•‘          Agentic Coding Flywheel Setup                â•‘
    â•‘                                                       â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This wizard will help you set up a new project with:

  âœ“ Project directory structure
  âœ“ Git repository initialization
  âœ“ AGENTS.md for AI coding assistants
  âœ“ Beads issue tracking (optional)
  âœ“ Claude Code settings (optional)
</code></pre>
<p><strong>Confirmation Screen:</strong></p>
<pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Review &amp; Confirm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                              Step 7 of 9

Please review your selections before creating the project.

Project Summary
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Name:       myapp
  Location:   /home/user/projects/myapp
  Tech:       Node.js, TypeScript

Features
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ“ Beads tracking
  âœ“ Claude Code settings
  âœ“ AGENTS.md
  âœ“ UBS ignore

Files to Create
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
myapp/
â”œâ”€â”€ .git/
â”œâ”€â”€ AGENTS.md
â”œâ”€â”€ .beads/
â”‚   â””â”€â”€ beads.db
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ settings.local.json
â”œâ”€â”€ .ubsignore
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore

Options:
  [Enter/c]   Create project
  [e]         Edit selections (go back)
  [q/Esc]     Cancel
</code></pre>
</details>
<p>CLI mode (automation):</p>
<pre><code class="language-bash">acfs newproj myapp
acfs newproj myapp /custom/path
acfs newproj myapp --no-bd
</code></pre>
<p>Notes:</p>
<ul>
<li>The TUI uses gum when available (arrow keys, Space to toggle, Enter to confirm). Without gum, it falls back to numbered prompts.</li>
<li>Minimum terminal size: 60x15.</li>
<li>CLI mode skips existing <a href="http://AGENTS.html">AGENTS.md</a>; the wizard overwrites it, so move it aside if you want to keep the old one.</li>
</ul>
<h3 id="acfs-info--system-overview"><code>acfs info</code> â€” System Overview</h3>
<p>Displays installation status in under 1 second by reading cached state (no verification).</p>
<pre><code class="language-bash">acfs info                <span class="hljs-comment"># Terminal output (default)</span>
acfs info --json         <span class="hljs-comment"># JSON output for scripting</span>
acfs info --html         <span class="hljs-comment"># Self-contained HTML page</span>
acfs info --minimal      <span class="hljs-comment"># Just essentials (IP, key commands)</span>
</code></pre>
<p>Example output:</p>
<pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ACFS System Info                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Host: vps-12345.contabo.net                                  â•‘
â•‘  IP: 192.168.1.100                                            â•‘
â•‘  User: ubuntu                                                 â•‘
â•‘  Uptime: 3 days, 4 hours                                      â•‘
â•‘                                                               â•‘
â•‘  Quick Commands:                                              â•‘
â•‘    cc    â†’ Claude Code (dangerous mode)                       â•‘
â•‘    cod   â†’ Codex CLI (dangerous mode)                         â•‘
â•‘    gmi   â†’ Gemini CLI (yolo mode)                             â•‘
â•‘    ntm   â†’ Named Tmux Manager                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<p><strong>Design Philosophy:</strong></p>
<ul>
<li><strong>Speed</strong>: Must complete in &lt;1 second</li>
<li><strong>Read-only</strong>: Never verifies or tests (that's doctor's job)</li>
<li><strong>Offline</strong>: No network calls required</li>
<li><strong>Fallback</strong>: Graceful degradation if data missing</li>
</ul>
<h3 id="acfs-cheatsheet--alias-discovery"><code>acfs cheatsheet</code> â€” Alias Discovery</h3>
<p>Parses <code>~/.acfs/zsh/acfs.zshrc</code> to show all installed aliases and commands.</p>
<pre><code class="language-bash">acfs cheatsheet              <span class="hljs-comment"># List all aliases</span>
acfs cheatsheet git          <span class="hljs-comment"># Filter by category or search term</span>
acfs cheatsheet --category Agents
acfs cheatsheet --search docker
acfs cheatsheet --json       <span class="hljs-comment"># JSON output for tooling</span>
</code></pre>
<p>Example output:</p>
<pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ACFS Cheatsheet                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Agents                                                        â•‘
â•‘    cc   â†’ claude --dangerously-skip-permissions                â•‘
â•‘    cod  â†’ codex --dangerously-bypass-approvals-and-sandbox     â•‘
â•‘    gmi  â†’ gemini --yolo                                        â•‘
â•‘                                                                â•‘
â•‘  Git                                                           â•‘
â•‘    gs   â†’ git status                                           â•‘
â•‘    gp   â†’ git push                                             â•‘
â•‘    gl   â†’ git pull                                             â•‘
â•‘    gco  â†’ git checkout                                         â•‘
â•‘                                                                â•‘
â•‘  Modern CLI                                                    â•‘
â•‘    ls   â†’ lsd --inode --long --all                             â•‘
â•‘    cat  â†’ bat                                                  â•‘
â•‘    grep â†’ rg                                                   â•‘
â•‘    lg   â†’ lazygit                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<h3 id="acfs-dashboard--html-status-page"><code>acfs dashboard</code> â€” HTML Status Page</h3>
<p>Generates a self-contained HTML dashboard and optionally serves it.</p>
<pre><code class="language-bash">acfs dashboard generate              <span class="hljs-comment"># Generate ~/.acfs/dashboard/index.html</span>
acfs dashboard generate --force      <span class="hljs-comment"># Force regeneration</span>
acfs dashboard serve                 <span class="hljs-comment"># Serve on localhost:8080</span>
acfs dashboard serve --port 3000     <span class="hljs-comment"># Custom port</span>
acfs dashboard serve --public        <span class="hljs-comment"># Bind to 0.0.0.0</span>
</code></pre>
<p>The dashboard provides:</p>
<ul>
<li>System health at a glance</li>
<li>Tool versions and status</li>
<li>Quick command reference</li>
<li>Recent activity summary</li>
</ul>
<h3 id="acfs-services-setup--credential-configuration"><code>acfs services-setup</code> â€” Credential Configuration</h3>
<p>Interactive wizard for configuring AI agent credentials and cloud service logins.</p>
<pre><code class="language-bash">acfs services-setup          <span class="hljs-comment"># Run full setup wizard</span>
</code></pre>
<p>Guides you through:</p>
<ul>
<li><strong>Claude Code</strong>: API key configuration</li>
<li><strong>Codex CLI</strong>: ChatGPT account login</li>
<li><strong>Gemini CLI</strong>: Google account authentication</li>
<li><strong>GitHub CLI</strong>: <code>gh auth login</code></li>
<li><strong>Cloud CLIs</strong>: Wrangler, Supabase, Vercel authentication</li>
</ul>
<p>Also offers to install <strong>DCG (Destructive Command Guard)</strong>, a Claude Code hook that blocks destructive commands like <code>rm -rf /</code>.</p>
<h3 id="acfs-continue--upgrade-progress"><code>acfs continue</code> â€” Upgrade Progress</h3>
<p>After an Ubuntu upgrade reboot, view installation progress:</p>
<pre><code class="language-bash">acfs <span class="hljs-built_in">continue</span>                <span class="hljs-comment"># Show current upgrade status</span>
</code></pre>
<p>Displays:</p>
<ul>
<li>Original Ubuntu version</li>
<li>Target version</li>
<li>Current upgrade stage</li>
<li>Next steps after completion</li>
</ul>
<hr>
<h2 id="learning-hub-web">Learning Hub (Web)</h2>
<p>In addition to the terminal-based onboarding, ACFS provides a comprehensive web-based Learning Hub at <a href="https://agent-flywheel.com/learn">agent-flywheel.com/learn</a>.</p>
<h3 id="web-lessons">Web Lessons</h3>
<p>The Learning Hub provides interactive lessons with progress tracking:</p>
<table>
<thead>
<tr>
<th>#</th>
<th>Lesson</th>
<th>Duration</th>
<th>Topics</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Welcome &amp; Overview</td>
<td>5 min</td>
<td>What's installed, mental model</td>
</tr>
<tr>
<td>1</td>
<td>Linux Navigation</td>
<td>8 min</td>
<td>Filesystem structure, essential commands</td>
</tr>
<tr>
<td>2</td>
<td>SSH &amp; Persistence</td>
<td>6 min</td>
<td>Secure connections, staying connected</td>
</tr>
<tr>
<td>3</td>
<td>tmux Basics</td>
<td>7 min</td>
<td>Sessions, windows, panes, survival</td>
</tr>
<tr>
<td>4</td>
<td>Git Essentials</td>
<td>10 min</td>
<td>Version control, dangerous operations</td>
</tr>
<tr>
<td>5</td>
<td>GitHub CLI</td>
<td>8 min</td>
<td>Issues, PRs, releases via <code>gh</code></td>
</tr>
<tr>
<td>6</td>
<td>Agent Commands</td>
<td>10 min</td>
<td>Claude, Codex, Gemini usage</td>
</tr>
<tr>
<td>7</td>
<td>NTM Command Center</td>
<td>8 min</td>
<td>Session orchestration</td>
</tr>
<tr>
<td>8</td>
<td>NTM Prompt Palette</td>
<td>6 min</td>
<td>Quick command access</td>
</tr>
<tr>
<td>9</td>
<td>The Flywheel Loop</td>
<td>8 min</td>
<td>How all 10 tools work together</td>
</tr>
</tbody>
</table>
<p><strong>Features:</strong></p>
<ul>
<li>Progress tracking in localStorage</li>
<li>Code blocks with copy buttons</li>
<li>Expandable deep-dive sections</li>
<li>Practical exercises</li>
</ul>
<h3 id="command-reference">Command Reference</h3>
<p>The <a href="https://agent-flywheel.com/learn/commands">Command Reference</a> documents every installed tool:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Commands</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Agents</strong></td>
<td><code>cc</code>, <code>cod</code>, <code>gmi</code></td>
</tr>
<tr>
<td><strong>Search</strong></td>
<td><code>rg</code>, <code>fd</code>, <code>sg</code>, <code>fzf</code></td>
</tr>
<tr>
<td><strong>Git</strong></td>
<td><code>lg</code>, <code>gh</code>, <code>git-lfs</code></td>
</tr>
<tr>
<td><strong>System</strong></td>
<td><code>z</code>, <code>bat</code>, <code>lsd</code>, <code>atuin</code>, <code>tmux</code></td>
</tr>
<tr>
<td><strong>Stack</strong></td>
<td><code>ntm</code>, <code>bv</code>, <code>am</code>, <code>cass</code>, <code>cm</code>, <code>ubs</code>, <code>slb</code>, <code>caam</code>, <code>dcg</code>, <code>ru</code></td>
</tr>
<tr>
<td><strong>Languages</strong></td>
<td><code>bun</code>, <code>uv</code>, <code>cargo</code>, <code>go</code></td>
</tr>
<tr>
<td><strong>Cloud</strong></td>
<td><code>wrangler</code>, <code>supabase</code>, <code>vercel</code>, <code>vault</code></td>
</tr>
</tbody>
</table>
<h3 id="technical-glossary">Technical Glossary</h3>
<p>The <a href="https://agent-flywheel.com/glossary">Glossary</a> defines 100+ technical terms with:</p>
<ul>
<li><strong>One-liner</strong>: Quick tooltip definition</li>
<li><strong>Full explanation</strong>: Plain language description</li>
<li><strong>Analogy</strong>: &quot;Think of it like...&quot;</li>
<li><strong>Why we use it</strong>: Problem it solves</li>
<li><strong>Related terms</strong>: For context</li>
</ul>
<p>Example entry:</p>
<pre><code>RAM (Random Access Memory)
â”œâ”€â”€ Short: Fast temporary storage your computer uses while working
â”œâ”€â”€ Long: RAM is your computer's short-term memory...
â”œâ”€â”€ Analogy: Like your desk space while working
â”œâ”€â”€ Why: More RAM = run more programs simultaneously
â””â”€â”€ Related: vCPU, VPS, NVMe
</code></pre>
<h3 id="flywheel-visualization">Flywheel Visualization</h3>
<p>The <a href="https://agent-flywheel.com/flywheel">Flywheel page</a> visualizes tool interactions:</p>
<pre><code>Plan (Beads) â”€â”€&gt; Coordinate (Agent Mail) â”€â”€&gt; Execute (NTM + Agents)
      ^                                              â”‚
      â”‚                                              v
      â””â”€â”€â”€â”€ Remember (CASS Memory) &lt;â”€â”€â”€â”€ Scan (UBS) â”˜
</code></pre>
<p><strong>Workflow Scenarios:</strong></p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Description</th>
<th>Time</th>
</tr>
</thead>
<tbody>
<tr>
<td>Daily Parallel Progress</td>
<td>3+ projects moving simultaneously</td>
<td>3+ hours</td>
</tr>
<tr>
<td>Agents Reviewing Agents</td>
<td>Cross-review before merging</td>
<td>30 min</td>
</tr>
<tr>
<td>Memory-Augmented Debugging</td>
<td>Past solutions for current bugs</td>
<td>15 min</td>
</tr>
<tr>
<td>Coordinated Feature Dev</td>
<td>Multiple agents, one feature</td>
<td>2+ hours</td>
</tr>
</tbody>
</table>
<h3 id="interactive-website-components">Interactive Website Components</h3>
<p>The wizard website includes specialized components for guiding beginners:</p>
<p><strong>ConnectionCheck Component:</strong>
A prominent visual that helps users verify they're connected to their VPS before running commands:</p>
<ul>
<li>Side-by-side comparison: &quot;Wrong (laptop)&quot; vs &quot;Right (VPS)&quot;</li>
<li>Terminal prompt examples for Windows, Mac, and Linux</li>
<li>Clear &quot;STOP!&quot; warning with color-coded styling</li>
</ul>
<p><strong>CommandCard Component:</strong>
CLI instruction cards with:</p>
<ul>
<li>Syntax-highlighted code blocks</li>
<li>One-click copy button</li>
<li>Platform-specific variations (bash/zsh/PowerShell)</li>
<li>Expandable explanations</li>
</ul>
<p><strong>Jargon Component (Responsive Technical Terms):</strong>
A sophisticated tooltip system that adapts to device capabilities:</p>
<p><em>Desktop behavior:</em></p>
<ul>
<li>Hover reveals floating tooltip with term definition</li>
<li>Radix UI Tooltip for accessible ARIA-compliant overlays</li>
<li>Viewport-aware positioning (auto-flips when near edges)</li>
<li>200ms hover delay prevents tooltip spam</li>
</ul>
<p><em>Mobile behavior:</em></p>
<ul>
<li>Tap opens bottom sheet drawer (Vaul library)</li>
<li>Full definition visible without tiny tap targets</li>
<li>Swipe-to-dismiss gesture support</li>
<li>Snap points for partial/full expansion</li>
</ul>
<p><em>Visual features:</em></p>
<ul>
<li>Gradient underline indicates tappable term</li>
<li>Each term gets unique gradient based on slug hash</li>
<li>Consistent color scheme with OKLCH tokens</li>
</ul>
<p><em>Content structure per term:</em></p>
<pre><code class="language-typescript">{
  <span class="hljs-attr">term</span>: <span class="hljs-string">&quot;VPS&quot;</span>,
  <span class="hljs-attr">short</span>: <span class="hljs-string">&quot;Virtual Private Server - a remote computer you rent&quot;</span>,
  <span class="hljs-attr">long</span>: <span class="hljs-string">&quot;A VPS is your own slice of a powerful computer...&quot;</span>,
  <span class="hljs-attr">analogy</span>: <span class="hljs-string">&quot;Think of it like renting an apartment in a building&quot;</span>,
  <span class="hljs-attr">whyWeUseIt</span>: <span class="hljs-string">&quot;You get root access, dedicated resources...&quot;</span>,
  <span class="hljs-attr">relatedTerms</span>: [<span class="hljs-string">&quot;SSH&quot;</span>, <span class="hljs-string">&quot;Ubuntu&quot;</span>, <span class="hljs-string">&quot;RAM&quot;</span>]
}
</code></pre>
<p><strong>Confetti Celebration:</strong>
On lesson completion:</p>
<ul>
<li>Burst of celebratory confetti particles</li>
<li>Randomized encouraging messages</li>
<li>Special celebration for completing all lessons</li>
<li>Respects <code>prefers-reduced-motion</code> setting</li>
</ul>
<p><strong>Stepper Component:</strong>
Multi-step progress indicator:</p>
<ul>
<li>Visual step-by-step progress</li>
<li>Clickable navigation</li>
<li>Completion checkmarks</li>
<li>Mobile-responsive design</li>
</ul>
<h3 id="expanded-lesson-library">Expanded Lesson Library</h3>
<p>The Learning Hub includes specialized lessons for each tool in the Dicklesworthstone stack:</p>
<table>
<thead>
<tr>
<th>Lesson</th>
<th>Topics</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UBS (Bug Scanner)</strong></td>
<td>Scan workflow, severity levels, CI integration</td>
</tr>
<tr>
<td><strong>Agent Mail</strong></td>
<td>Registration, messaging, file reservations</td>
</tr>
<tr>
<td><strong>CASS (Session Search)</strong></td>
<td>Indexing, searching, cross-agent queries</td>
</tr>
<tr>
<td><strong>CASS Memory (cm)</strong></td>
<td>Rule extraction, playbook management</td>
</tr>
<tr>
<td><strong>Beads</strong></td>
<td>Issue tracking, graph metrics, priorities</td>
</tr>
<tr>
<td><strong>SLB (Safety)</strong></td>
<td>Two-person rule, dangerous command approval</td>
</tr>
<tr>
<td><strong>Prompt Engineering</strong></td>
<td>Effective prompts, context management</td>
</tr>
<tr>
<td><strong>Real-World Case Study</strong></td>
<td>End-to-end feature development walkthrough</td>
</tr>
</tbody>
</table>
<p>Each lesson includes:</p>
<ul>
<li>Conceptual introduction</li>
<li>Practical commands with examples</li>
<li>Interactive exercises</li>
<li>Common pitfalls to avoid</li>
<li>Links to tool documentation</li>
</ul>
<hr>
<h2 id="interactive-onboarding-tui">Interactive Onboarding (TUI)</h2>
<p>After installation, users can learn the ACFS workflow through an interactive terminal-based tutorial. The onboarding TUI guides users through 11 lessons covering Linux basics through full agentic workflows.</p>
<h3 id="running-onboarding">Running Onboarding</h3>
<pre><code class="language-bash">onboard                <span class="hljs-comment"># Launch interactive menu</span>
onboard --list         <span class="hljs-comment"># List lessons with completion status</span>
onboard 3              <span class="hljs-comment"># Jump to lesson 3</span>
onboard --reset        <span class="hljs-comment"># Reset progress and start fresh</span>
</code></pre>
<h3 id="lessons">Lessons</h3>
<table>
<thead>
<tr>
<th>#</th>
<th>Title</th>
<th>Duration</th>
<th>Topics</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Welcome &amp; Overview</td>
<td>2 min</td>
<td>What's installed, system overview</td>
</tr>
<tr>
<td>1</td>
<td>Linux Navigation</td>
<td>5 min</td>
<td>Filesystem, basic commands</td>
</tr>
<tr>
<td>2</td>
<td>SSH &amp; Persistence</td>
<td>4 min</td>
<td>Keys, config, tunnels, screen/tmux</td>
</tr>
<tr>
<td>3</td>
<td>tmux Basics</td>
<td>6 min</td>
<td>Sessions, windows, panes, navigation</td>
</tr>
<tr>
<td>4</td>
<td>Agent Commands</td>
<td>5 min</td>
<td><code>cc</code>, <code>cod</code>, <code>gmi</code> aliases</td>
</tr>
<tr>
<td>5</td>
<td>NTM Core</td>
<td>7 min</td>
<td>Named Tmux Manager basics</td>
</tr>
<tr>
<td>6</td>
<td>NTM Prompt Palette</td>
<td>5 min</td>
<td>Command palette features</td>
</tr>
<tr>
<td>7</td>
<td>Flywheel Loop</td>
<td>8 min</td>
<td>Complete agentic workflow</td>
</tr>
<tr>
<td>8</td>
<td>Keeping Updated</td>
<td>4 min</td>
<td>Using <code>acfs-update</code>, troubleshooting</td>
</tr>
<tr>
<td>9</td>
<td>RU: Multi-Repo Mastery</td>
<td>6 min</td>
<td>Multi-repo sync, agent-sweep, parallel workflows</td>
</tr>
<tr>
<td>10</td>
<td>DCG: Destructive Command Guard</td>
<td>5 min</td>
<td>Command safety, protection packs, allow-once workflow</td>
</tr>
</tbody>
</table>
<h3 id="progress-tracking">Progress Tracking</h3>
<p>Progress is saved in <code>~/.acfs/onboard_progress.json</code>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;completed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;started_at&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-12-20T10:30:00-05:00&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>The TUI shows completion status for each lesson and suggests the next one to take. Users can jump to any lesson or re-take completed ones.</p>
<h3 id="enhanced-ux-with-gum">Enhanced UX with Gum</h3>
<p>If <a href="https://github.com/charmbracelet/gum">Charmbracelet Gum</a> is installed, the onboarding system uses it for enhanced terminal UIâ€”selection menus, styled prompts, and better formatting. Without Gum, it falls back to simple numbered menus that work everywhere.</p>
<hr>
<h2 id="tools-installed">Tools Installed</h2>
<p>ACFS installs a comprehensive suite of <strong>30+ tools</strong> organized into categories:</p>
<h3 id="shell--terminal-ux">Shell &amp; Terminal UX</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>zsh</strong></td>
<td><code>zsh</code></td>
<td>Modern shell</td>
</tr>
<tr>
<td><strong>oh-my-zsh</strong></td>
<td>-</td>
<td>zsh plugin framework</td>
</tr>
<tr>
<td><strong>powerlevel10k</strong></td>
<td>-</td>
<td>Fast, customizable prompt</td>
</tr>
<tr>
<td><strong>lsd</strong></td>
<td><code>ls</code> (aliased)</td>
<td>Modern ls with icons</td>
</tr>
<tr>
<td><strong>atuin</strong></td>
<td><code>Ctrl+R</code></td>
<td>Shell history with search</td>
</tr>
<tr>
<td><strong>fzf</strong></td>
<td><code>fzf</code></td>
<td>Fuzzy finder</td>
</tr>
<tr>
<td><strong>zoxide</strong></td>
<td><code>z</code></td>
<td>Smarter cd</td>
</tr>
<tr>
<td><strong>direnv</strong></td>
<td>-</td>
<td>Directory-specific env vars</td>
</tr>
</tbody>
</table>
<h3 id="languages--package-managers">Languages &amp; Package Managers</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>bun</strong></td>
<td><code>bun</code></td>
<td>Fast JS/TS runtime + package manager</td>
</tr>
<tr>
<td><strong>uv</strong></td>
<td><code>uv</code></td>
<td>Fast Python package manager</td>
</tr>
<tr>
<td><strong>Rust</strong></td>
<td><code>cargo</code></td>
<td>Rust toolchain</td>
</tr>
<tr>
<td><strong>Go</strong></td>
<td><code>go</code></td>
<td>Go toolchain</td>
</tr>
</tbody>
</table>
<h3 id="dev-tools">Dev Tools</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>tmux</strong></td>
<td><code>tmux</code></td>
<td>Terminal multiplexer</td>
</tr>
<tr>
<td><strong>ripgrep</strong></td>
<td><code>rg</code></td>
<td>Fast recursive grep</td>
</tr>
<tr>
<td><strong>ast-grep</strong></td>
<td><code>sg</code></td>
<td>Structural code search</td>
</tr>
<tr>
<td><strong>lazygit</strong></td>
<td><code>lg</code> (aliased)</td>
<td>Git TUI</td>
</tr>
<tr>
<td><strong>GitHub CLI</strong></td>
<td><code>gh</code></td>
<td>GitHub auth, issues, PRs</td>
</tr>
<tr>
<td><strong>Git LFS</strong></td>
<td><code>git-lfs</code></td>
<td>Large file support for Git</td>
</tr>
<tr>
<td><strong>bat</strong></td>
<td><code>cat</code> (aliased)</td>
<td>Cat with syntax highlighting</td>
</tr>
<tr>
<td><strong>neovim</strong></td>
<td><code>nvim</code></td>
<td>Modern vim</td>
</tr>
<tr>
<td><strong>jq</strong></td>
<td><code>jq</code></td>
<td>JSON processor</td>
</tr>
<tr>
<td><strong>rsync</strong></td>
<td><code>rsync</code></td>
<td>Fast file sync/copy</td>
</tr>
<tr>
<td><strong>lsof</strong></td>
<td><code>lsof</code></td>
<td>Debug open files/ports</td>
</tr>
<tr>
<td><strong>dnsutils</strong></td>
<td><code>dig</code></td>
<td>DNS debugging</td>
</tr>
<tr>
<td><strong>netcat</strong></td>
<td><code>nc</code></td>
<td>Network debugging</td>
</tr>
<tr>
<td><strong>strace</strong></td>
<td><code>strace</code></td>
<td>Syscall tracing</td>
</tr>
</tbody>
</table>
<h3 id="networking">Networking</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Tailscale</strong></td>
<td><code>tailscale</code></td>
<td>Zero-config mesh VPN</td>
</tr>
</tbody>
</table>
<p><strong>Tailscale Integration:</strong></p>
<p>Tailscale provides secure, encrypted networking between your devices without complex firewall configuration:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Authenticate and join your tailnet</span>
tailscale up

<span class="hljs-comment"># Check connection status</span>
tailscale status

<span class="hljs-comment"># Get your Tailscale IP</span>
tailscale ip

<span class="hljs-comment"># SSH over Tailscale (bypasses firewalls)</span>
ssh ubuntu@your-vps.tailnet-name.ts.net
</code></pre>
<p>Benefits for agentic workflows:</p>
<ul>
<li><strong>Firewall-free access</strong>: Connect even when behind NAT or restrictive firewalls</li>
<li><strong>MagicDNS</strong>: Access your VPS by hostname instead of IP</li>
<li><strong>SSH keys over Tailscale</strong>: Use <code>tailscale ssh</code> for key-free authentication</li>
<li><strong>ACLs</strong>: Fine-grained access control for team environments</li>
</ul>
<h3 id="ai-coding-agents">AI Coding Agents</h3>
<table>
<thead>
<tr>
<th>Agent</th>
<th>Command</th>
<th>Alias (Vibe Mode)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Claude Code</strong></td>
<td><code>claude</code></td>
<td><code>cc</code> (dangerous mode)</td>
</tr>
<tr>
<td><strong>Codex CLI</strong></td>
<td><code>codex</code></td>
<td><code>cod</code> (dangerous mode)</td>
</tr>
<tr>
<td><strong>Gemini CLI</strong></td>
<td><code>gemini</code></td>
<td><code>gmi</code> (dangerous mode)</td>
</tr>
</tbody>
</table>
<p><strong>Vibe Mode Aliases:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Claude Code with max memory (background tasks enabled by default)</span>
<span class="hljs-built_in">alias</span> cc=<span class="hljs-string">&#x27;NODE_OPTIONS=&quot;--max-old-space-size=32768&quot; claude --dangerously-skip-permissions&#x27;</span>

<span class="hljs-comment"># Codex with bypass and dangerous filesystem access</span>
<span class="hljs-built_in">alias</span> cod=<span class="hljs-string">&#x27;codex --dangerously-bypass-approvals-and-sandbox&#x27;</span>

<span class="hljs-comment"># Gemini with yolo mode</span>
<span class="hljs-built_in">alias</span> gmi=<span class="hljs-string">&#x27;gemini --yolo&#x27;</span>
</code></pre>
<p><strong>Installation &amp; Updates:</strong>
Claude Code should be installed and updated using its native mechanisms:</p>
<ul>
<li><strong>Install:</strong> ACFS uses the official native installer (<code>claude.ai/install.sh</code>), checksum-verified via <code>checksums.yaml</code> (installs to <code>~/.local/bin/claude</code>)</li>
<li><strong>Update:</strong> Use <code>claude update</code> (built-in) or run <code>acfs update --agents-only</code></li>
</ul>
<p>This ensures proper authentication handling and avoids issues with alternative package manager builds. For Codex and Gemini, ACFS uses standard bun global package updates.</p>
<h3 id="cloud--database">Cloud &amp; Database</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PostgreSQL 18</strong></td>
<td><code>psql</code></td>
<td>Database</td>
</tr>
<tr>
<td><strong>HashiCorp Vault</strong></td>
<td><code>vault</code></td>
<td>Secrets management</td>
</tr>
<tr>
<td><strong>Wrangler</strong></td>
<td><code>wrangler</code></td>
<td>Cloudflare CLI</td>
</tr>
<tr>
<td><strong>Supabase CLI</strong></td>
<td><code>supabase</code></td>
<td>Supabase management</td>
</tr>
<tr>
<td><strong>Vercel CLI</strong></td>
<td><code>vercel</code></td>
<td>Vercel deployment</td>
</tr>
</tbody>
</table>
<p>Vault is installed by default (skip with <code>--skip-vault</code>). ACFS installs the Vault <strong>CLI</strong> so you have a real secrets tool available early; it does not automatically configure a Vault server for you.</p>
<p>Supabase networking note: some Supabase projects expose the <strong>direct Postgres host over IPv6-only</strong> (often on free tiers). If your VPS/network is <strong>IPv4-only</strong>, use the Supabase <strong>pooler</strong> connection string instead (or upgrade/configure networking for direct IPv4).</p>
<h3 id="dicklesworthstone-stack-10-tools">Dicklesworthstone Stack (10 Tools)</h3>
<p>The complete suite of tools for professional agentic workflows:</p>
<table>
<thead>
<tr>
<th>#</th>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>Named Tmux Manager</strong></td>
<td><code>ntm</code></td>
<td>Agent cockpitâ€”spawn, orchestrate, monitor tmux sessions</td>
</tr>
<tr>
<td>2</td>
<td><strong>MCP Agent Mail</strong></td>
<td>-</td>
<td>Agent coordination via mail-like messaging</td>
</tr>
<tr>
<td>3</td>
<td><strong>Ultimate Bug Scanner</strong></td>
<td><code>ubs</code></td>
<td>Bug scanning with guardrails</td>
</tr>
<tr>
<td>4</td>
<td><strong>Beads Viewer</strong></td>
<td><code>bv</code></td>
<td>Task management TUI with graph analysis</td>
</tr>
<tr>
<td>5</td>
<td><strong>Coding Agent Session Search</strong></td>
<td><code>cass</code></td>
<td>Unified agent history search</td>
</tr>
<tr>
<td>6</td>
<td><strong>CASS Memory System</strong></td>
<td><code>cm</code></td>
<td>Procedural memory for agents</td>
</tr>
<tr>
<td>7</td>
<td><strong>Coding Agent Account Manager</strong></td>
<td><code>caam</code></td>
<td>Agent auth switching</td>
</tr>
<tr>
<td>8</td>
<td><strong>Simultaneous Launch Button</strong></td>
<td><code>slb</code></td>
<td>Two-person rule for dangerous commands</td>
</tr>
<tr>
<td>9</td>
<td><strong>Destructive Command Guard</strong></td>
<td><code>dcg</code></td>
<td>Claude Code hook blocking dangerous git/fs commands</td>
</tr>
<tr>
<td>10</td>
<td><strong>Repo Updater</strong></td>
<td><code>ru</code></td>
<td>Multi-repo sync + AI-driven commit automation</td>
</tr>
</tbody>
</table>
<h3 id="bundled-utilities">Bundled Utilities</h3>
<p>Additional productivity tools installed alongside the stack:</p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Get Image from Internet Link</strong></td>
<td><code>giil</code></td>
<td>Download images from iCloud, Dropbox, Google Photos for visual debugging</td>
</tr>
<tr>
<td><strong>Chat Shared Conversation to File</strong></td>
<td><code>csctf</code></td>
<td>Convert AI share links (ChatGPT, Gemini, Claude) to Markdown/HTML</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="doctor-command">Doctor Command</h2>
<p><code>acfs doctor</code> performs comprehensive health checks on your installation:</p>
<pre><code class="language-bash">$ acfs doctor

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ACFS Health Check                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Identity                                                      â•‘
â•‘   âœ” Running as ubuntu user                                    â•‘
â•‘   âœ” Passwordless sudo enabled                                 â•‘
â•‘                                                               â•‘
â•‘ Workspace                                                     â•‘
â•‘   âœ” /data/projects exists                                     â•‘
â•‘                                                               â•‘
â•‘ Shell                                                         â•‘
â•‘   âœ” zsh installed                                             â•‘
â•‘   âœ” oh-my-zsh installed                                       â•‘
â•‘   âœ” powerlevel10k installed                                   â•‘
â•‘   âœ” acfs.zshrc sourced                                        â•‘
â•‘                                                               â•‘
â•‘ Core Tools                                                    â•‘
â•‘   âœ” bun 1.2.16                                                â•‘
â•‘   âœ” uv 0.5.14                                                 â•‘
â•‘   âœ” cargo 1.84.0                                              â•‘
â•‘   âœ” go 1.23.4                                                 â•‘
â•‘   âœ” ripgrep 14.1.0                                            â•‘
â•‘   âœ” ast-grep 0.30.1                                           â•‘
â•‘                                                               â•‘
â•‘ Agents                                                        â•‘
â•‘   âœ” claude 1.0.24                                             â•‘
â•‘   âœ” codex 0.1.2504252326                                      â•‘
â•‘   âœ” gemini 0.1.12                                             â•‘
â•‘                                                               â•‘
â•‘ Cloud                                                         â•‘
â•‘   âœ” vault 1.18.3                                              â•‘
â•‘   âœ” wrangler 4.16.0                                           â•‘
â•‘   âœ” supabase 2.23.4                                           â•‘
â•‘   âœ” vercel 41.7.6                                             â•‘
â•‘                                                               â•‘
â•‘ Dicklesworthstone Stack                                       â•‘
â•‘   âœ” ntm 0.3.2                                                 â•‘
â•‘   âœ” slb 0.2.1                                                 â•‘
â•‘   âœ” ubs 0.1.8                                                 â•‘
â•‘   âœ” bv 0.9.4                                                  â•‘
â•‘   âœ” cass 0.4.2                                                â•‘
â•‘   âœ” cm 0.1.3                                                  â•‘
â•‘   âœ” caam 0.2.0                                                â•‘
â•‘   âœ” dcg 0.1.0                                                 â•‘
â•‘   âœ” ru 1.2.0                                                  â•‘
â•‘   âš  mcp_agent_mail (not running)                              â•‘
â•‘                                                               â•‘
â•‘ Utilities                                                     â•‘
â•‘   âœ” giil 3.0.0                                                â•‘
â•‘   âœ” csctf 1.0.0                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Overall: 35/36 checks passed                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<h3 id="generated-doctor-checks">Generated Doctor Checks</h3>
<p>Doctor checks can be generated from the manifest (<code>scripts/generated/doctor_checks.sh</code>) to keep verification logic close to <code>acfs.manifest.yaml</code>. Today, the user-facing <code>acfs doctor</code> command is implemented in <code>scripts/lib/doctor.sh</code> and does not yet consume the generated <code>doctor_checks.sh</code> output.</p>
<h3 id="options-1">Options</h3>
<pre><code class="language-bash">acfs doctor          <span class="hljs-comment"># Interactive colorful output</span>
acfs doctor --json   <span class="hljs-comment"># Machine-readable JSON output</span>
acfs doctor --quiet  <span class="hljs-comment"># Exit code only (0=healthy, 1=issues)</span>
acfs doctor --deep   <span class="hljs-comment"># Run functional tests (auth, connections)</span>
</code></pre>
<h3 id="deep-checks---deep">Deep Checks (<code>--deep</code>)</h3>
<p>The <code>--deep</code> flag runs functional tests beyond binary existence:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Checks</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Agent Auth</strong></td>
<td>Claude config, Codex OAuth, Gemini credentials</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>PostgreSQL connection, ubuntu role exists</td>
</tr>
<tr>
<td><strong>Cloud CLIs</strong></td>
<td><code>gh auth status</code>, <code>wrangler whoami</code>, Supabase/Vercel tokens</td>
</tr>
<tr>
<td><strong>Vault</strong></td>
<td><code>VAULT_ADDR</code> configured</td>
</tr>
</tbody>
</table>
<p>Deep checks use 5-second timeouts to avoid hanging on network issues. Results are cached for 5 minutes to speed up repeated runs.</p>
<p>Example output:</p>
<pre><code>Deep Checks
  âœ” Claude auth configured
  âœ” PostgreSQL connection working
  âš  Codex not authenticated (run: codex login)
  âœ” GitHub CLI authenticated

8/9 functional tests passed in 3.2s
</code></pre>
<hr>
<h2 id="the-wizard-website">The Wizard Website</h2>
<p>The wizard guides beginners through a <strong>13-step journey</strong> from &quot;I have a laptop&quot; to &quot;AI agents are coding for me&quot;:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACFS Wizard                                                   [Step 3/13]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STEP 3: Generate SSH Key                                              â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Run this command in your terminal:                                    â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ssh-keygen -t ed25519 -C &quot;your-email@example.com&quot;         [ğŸ“‹] â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â˜ I ran this command                                                  â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  [â† Previous]                                        [Next Step â†’]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  Progress: â—â—â—â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="wizard-steps">Wizard Steps</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>Title</th>
<th>What Happens</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>Choose Your OS</strong></td>
<td>Select Mac, Windows, or Linux (auto-detected)</td>
</tr>
<tr>
<td>2</td>
<td><strong>Install Terminal</strong></td>
<td>Get a proper terminal application set up</td>
</tr>
<tr>
<td>3</td>
<td><strong>Generate SSH Key</strong></td>
<td>Create an ed25519 key for VPS access</td>
</tr>
<tr>
<td>4</td>
<td><strong>Rent a VPS</strong></td>
<td>Choose a VPS provider and plan</td>
</tr>
<tr>
<td>5</td>
<td><strong>Create VPS Instance</strong></td>
<td>Launch your VPS and confirm SSH access</td>
</tr>
<tr>
<td>6</td>
<td><strong>SSH Into Your VPS</strong></td>
<td>First connection with troubleshooting tips</td>
</tr>
<tr>
<td>7</td>
<td><strong>Set Up Accounts</strong></td>
<td>Create accounts for the services you'll use</td>
</tr>
<tr>
<td>8</td>
<td><strong>Pre-Flight Check</strong></td>
<td>Verify your VPS is ready before installing</td>
</tr>
<tr>
<td>9</td>
<td><strong>Run Installer</strong></td>
<td>The <code>curl | bash</code> one-liner</td>
</tr>
<tr>
<td>10</td>
<td><strong>Reconnect as Ubuntu</strong></td>
<td>Post-install reconnection</td>
</tr>
<tr>
<td>11</td>
<td><strong>Verify Key Connection</strong></td>
<td>Reconnect using your SSH key and confirm it works</td>
</tr>
<tr>
<td>12</td>
<td><strong>Status Check</strong></td>
<td>Run <code>acfs doctor</code> to verify</td>
</tr>
<tr>
<td>13</td>
<td><strong>Launch Onboarding</strong></td>
<td>Start the interactive tutorial</td>
</tr>
</tbody>
</table>
<h3 id="key-features">Key Features</h3>
<ul>
<li><strong>OS Detection:</strong> Auto-detects Mac vs Windows for tailored instructions</li>
<li><strong>Copy-to-Clipboard:</strong> One-click copy for all commands</li>
<li><strong>Progress Tracking:</strong> localStorage persistence across browser sessions</li>
<li><strong>Confirmation Checkboxes:</strong> &quot;I ran this command&quot; acknowledgments</li>
<li><strong>Troubleshooting:</strong> Expandable help for common issues</li>
</ul>
<h3 id="technology-stack">Technology Stack</h3>
<pre><code>Next.js 16 (App Router)
â”œâ”€â”€ React 19
â”œâ”€â”€ Tailwind CSS 4 (OKLCH colors)
â”œâ”€â”€ shadcn/ui components
â”œâ”€â”€ Radix UI primitives
â””â”€â”€ Lucide icons
</code></pre>
<p><strong>No backend required.</strong> All state is stored in:</p>
<ul>
<li>URL query parameters</li>
<li>localStorage (<code>agent-flywheel-user-os</code>, <code>agent-flywheel-vps-ip</code>, <code>agent-flywheel-wizard-completed-steps</code>)</li>
</ul>
<h3 id="wizard-state-management">Wizard State Management</h3>
<p>The wizard uses <strong>TanStack Query</strong> for state management with optimistic updates and cross-tab synchronization:</p>
<p><strong>Architecture:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// Query-based state with localStorage persistence</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: steps } = <span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;wizardSteps&#x27;</span>, <span class="hljs-string">&#x27;completed&#x27;</span>],
  <span class="hljs-attr">queryFn</span>: getCompletedSteps,  <span class="hljs-comment">// Reads from localStorage</span>
  <span class="hljs-attr">staleTime</span>: <span class="hljs-number">0</span>,                <span class="hljs-comment">// Always check for updates</span>
  <span class="hljs-attr">gcTime</span>: <span class="hljs-title class_">Infinity</span>,            <span class="hljs-comment">// Never garbage collect</span>
});
</code></pre>
<p><strong>Optimistic Updates with Rollback:</strong></p>
<pre><code class="language-typescript"><span class="hljs-keyword">const</span> mutation = <span class="hljs-title function_">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: <span class="hljs-keyword">async</span> (stepId) =&gt; {
    <span class="hljs-keyword">const</span> newSteps = <span class="hljs-title function_">addCompletedStep</span>(currentSteps, stepId);
    <span class="hljs-title function_">setCompletedSteps</span>(newSteps);  <span class="hljs-comment">// Persist to localStorage</span>
    <span class="hljs-keyword">return</span> newSteps;
  },
  <span class="hljs-attr">onMutate</span>: <span class="hljs-function">(<span class="hljs-params">stepId</span>) =&gt;</span> {
    <span class="hljs-comment">// Optimistically update cache immediately</span>
    <span class="hljs-keyword">const</span> previousSteps = queryClient.<span class="hljs-title function_">getQueryData</span>(queryKey);
    queryClient.<span class="hljs-title function_">setQueryData</span>(queryKey, <span class="hljs-title function_">addCompletedStep</span>(baseSteps, stepId));
    <span class="hljs-keyword">return</span> { previousSteps };  <span class="hljs-comment">// For rollback</span>
  },
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">_err, _stepId, context</span>) =&gt;</span> {
    <span class="hljs-comment">// Rollback on failure</span>
    queryClient.<span class="hljs-title function_">setQueryData</span>(queryKey, context.<span class="hljs-property">previousSteps</span>);
  },
});
</code></pre>
<p><strong>Cross-Tab Synchronization:</strong>
The wizard maintains sync across browser tabs via two mechanisms:</p>
<ol>
<li><strong>Custom DOM events</strong> for same-tab coordination between components</li>
<li><strong>Storage events</strong> for cross-tab updates when localStorage changes</li>
</ol>
<pre><code class="language-typescript"><span class="hljs-comment">// Same-tab: custom event dispatch</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&#x27;acfs:wizard:completed-steps-changed&#x27;</span>, {
  <span class="hljs-attr">detail</span>: { steps }
}));

<span class="hljs-comment">// Cross-tab: storage event listener</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;storage&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-variable constant_">COMPLETED_STEPS_KEY</span>) {
    queryClient.<span class="hljs-title function_">setQueryData</span>(queryKey, <span class="hljs-title function_">getCompletedSteps</span>());
  }
});
</code></pre>
<p><strong>Safe localStorage Utilities:</strong>
All localStorage access is wrapped in safe utilities that handle SSR, private browsing, and quota exceeded errors:</p>
<pre><code class="language-typescript"><span class="hljs-comment">// Safe read (returns null on any error)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> safeGetJSON&lt;T&gt;(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): T | <span class="hljs-literal">null</span>;

<span class="hljs-comment">// Safe write (returns boolean success)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">safeSetJSON</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">unknown</span></span>): <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// URL preservation for state fallback</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">withCurrentSearch</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>;
</code></pre>
<p>This architecture ensures the wizard progress survives browser refreshes, works across tabs, and degrades gracefully when localStorage is unavailable.</p>
<hr>
<h2 id="configuration-files">Configuration Files</h2>
<p>ACFS deploys optimized configuration files to <code>~/.acfs/</code> on the target VPS.</p>
<h3 id="acfszshacfszshrc"><code>~/.acfs/zsh/acfs.zshrc</code></h3>
<p>A comprehensive zsh configuration that's sourced by <code>~/.zshrc</code>:</p>
<p><strong>Oh-My-Zsh Plugins (14 total):</strong></p>
<table>
<thead>
<tr>
<th>Plugin</th>
<th>Category</th>
<th>What It Provides</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git</code></td>
<td>VCS</td>
<td>150+ git aliases (gs, gp, gl, gco, gcm, etc.)</td>
</tr>
<tr>
<td><code>sudo</code></td>
<td>Shell</td>
<td>Double-tap Esc to prefix previous command with sudo</td>
</tr>
<tr>
<td><code>colored-man-pages</code></td>
<td>Shell</td>
<td>Colorized man pages for better readability</td>
</tr>
<tr>
<td><code>command-not-found</code></td>
<td>Shell</td>
<td>Suggests packages when command not found</td>
</tr>
<tr>
<td><code>docker</code></td>
<td>Containers</td>
<td>Docker command completion and aliases</td>
</tr>
<tr>
<td><code>docker-compose</code></td>
<td>Containers</td>
<td>docker-compose completion and aliases</td>
</tr>
<tr>
<td><code>python</code></td>
<td>Lang</td>
<td>Python aliases (pyfind, pyclean, pygrep)</td>
</tr>
<tr>
<td><code>pip</code></td>
<td>Lang</td>
<td>pip completion and cache management</td>
</tr>
<tr>
<td><code>tmux</code></td>
<td>Terminal</td>
<td>tmux aliases (ta, tad, ts, tl, tkss)</td>
</tr>
<tr>
<td><code>tmuxinator</code></td>
<td>Terminal</td>
<td>tmuxinator project completion</td>
</tr>
<tr>
<td><code>systemd</code></td>
<td>System</td>
<td>systemctl aliases (sc-status, sc-start, sc-stop)</td>
</tr>
<tr>
<td><code>rsync</code></td>
<td>Tools</td>
<td>rsync completion and common flag aliases</td>
</tr>
<tr>
<td><code>zsh-autosuggestions</code></td>
<td>UX</td>
<td>Fish-like autosuggestions from history</td>
</tr>
<tr>
<td><code>zsh-syntax-highlighting</code></td>
<td>UX</td>
<td>Real-time command syntax highlighting</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong>: <code>zsh-autosuggestions</code> and <code>zsh-syntax-highlighting</code> are custom plugins installed from GitHub. They must be listed last for optimal performance.</p>
</blockquote>
<p><strong>Path Configuration:</strong></p>
<pre><code class="language-bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.local/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.cargo/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/go/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.bun/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.atuin/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
</code></pre>
<p><strong>Modern CLI Aliases:</strong></p>
<pre><code class="language-bash"><span class="hljs-built_in">alias</span> <span class="hljs-built_in">ls</span>=<span class="hljs-string">&#x27;lsd --inode --long --all&#x27;</span>
<span class="hljs-built_in">alias</span> ll=<span class="hljs-string">&#x27;lsd -l&#x27;</span>
<span class="hljs-built_in">alias</span> tree=<span class="hljs-string">&#x27;lsd --tree&#x27;</span>
<span class="hljs-built_in">alias</span> <span class="hljs-built_in">cat</span>=<span class="hljs-string">&#x27;bat&#x27;</span>
<span class="hljs-built_in">alias</span> grep=<span class="hljs-string">&#x27;rg&#x27;</span>
<span class="hljs-built_in">alias</span> vim=<span class="hljs-string">&#x27;nvim&#x27;</span>
<span class="hljs-built_in">alias</span> lg=<span class="hljs-string">&#x27;lazygit&#x27;</span>
</code></pre>
<p><strong>Tool Integrations:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Atuin (better shell history)</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(atuin init zsh)</span>&quot;</span>

<span class="hljs-comment"># Zoxide (smarter cd)</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(zoxide init zsh)</span>&quot;</span>

<span class="hljs-comment"># direnv (directory env vars)</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(direnv hook zsh)</span>&quot;</span>

<span class="hljs-comment"># fzf (fuzzy finder)</span>
<span class="hljs-built_in">source</span> /usr/share/doc/fzf/examples/key-bindings.zsh
</code></pre>
<p><strong>Shell Keybindings (Quality of Life):</strong></p>
<table>
<thead>
<tr>
<th>Keybind</th>
<th>Action</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl+â†’</code></td>
<td>Forward word</td>
<td>Navigate by word</td>
</tr>
<tr>
<td><code>Ctrl+â†</code></td>
<td>Backward word</td>
<td>Navigate by word</td>
</tr>
<tr>
<td><code>Alt+â†’</code></td>
<td>Forward word</td>
<td>Alternative binding</td>
</tr>
<tr>
<td><code>Alt+â†</code></td>
<td>Backward word</td>
<td>Alternative binding</td>
</tr>
<tr>
<td><code>Ctrl+Backspace</code></td>
<td>Delete word backward</td>
<td>Fast deletion</td>
</tr>
<tr>
<td><code>Ctrl+Delete</code></td>
<td>Delete word forward</td>
<td>Fast deletion</td>
</tr>
<tr>
<td><code>Home</code></td>
<td>Beginning of line</td>
<td>Works in all terminals</td>
</tr>
<tr>
<td><code>End</code></td>
<td>End of line</td>
<td>Works in all terminals</td>
</tr>
<tr>
<td><code>Ctrl+R</code></td>
<td>Atuin history search</td>
<td>Interactive fuzzy search</td>
</tr>
</tbody>
</table>
<p><strong>Atuin History Bindings:</strong>
The config forces Atuin bindings to load last (after OMZ plugins) ensuring <code>Ctrl+R</code> triggers Atuin's fuzzy history search rather than zsh's default:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Forced at end of zshrc</span>
<span class="hljs-built_in">bindkey</span> -e  <span class="hljs-comment"># Emacs mode</span>
<span class="hljs-built_in">bindkey</span> -M emacs <span class="hljs-string">&#x27;^R&#x27;</span> atuin-search
<span class="hljs-built_in">bindkey</span> -M viins <span class="hljs-string">&#x27;^R&#x27;</span> atuin-search-viins
<span class="hljs-built_in">bindkey</span> -M vicmd <span class="hljs-string">&#x27;^R&#x27;</span> atuin-search-vicmd
</code></pre>
<h3 id="acfstmuxtmuxconf"><code>~/.acfs/tmux/tmux.conf</code></h3>
<p>A tmux configuration specifically optimized for NTM and multi-agent workflows:</p>
<p><strong>Key Bindings:</strong></p>
<pre><code>Prefix: Ctrl+a (not Ctrl+b - more ergonomic)
Split horizontal: |  (preserves working directory)
Split vertical: -    (preserves working directory)
Navigate panes: h/j/k/l (vim-style)
Resize panes: H/J/K/L (repeatable with -r flag)
Reload config: r
New window: c (preserves working directory)
</code></pre>
<p><strong>Copy Mode (vim-style):</strong></p>
<pre><code>Enter copy mode: prefix + [
Begin selection: v
Rectangle selection: r
Copy and exit: y
</code></pre>
<p><strong>Agent Workflow Optimizations:</strong></p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>history-limit</code></td>
<td>50,000</td>
<td>Extended scrollback for long agent sessions</td>
</tr>
<tr>
<td><code>escape-time</code></td>
<td>10ms</td>
<td>Faster key response (reduced from default 500ms)</td>
</tr>
<tr>
<td><code>focus-events</code></td>
<td>on</td>
<td>Enables vim/neovim autoread in agent windows</td>
</tr>
<tr>
<td><code>detach-on-destroy</code></td>
<td>off</td>
<td>NTM compatibilityâ€”don't detach when session ends</td>
</tr>
<tr>
<td><code>monitor-activity</code></td>
<td>on</td>
<td>Track agent window activity</td>
</tr>
<tr>
<td><code>visual-activity</code></td>
<td>off</td>
<td>Silent monitoring (no bell)</td>
</tr>
</tbody>
</table>
<p><strong>Catppuccin-Inspired Theme:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Status bar (top position, less intrusive)</span>
status-style: <span class="hljs-built_in">bg</span>=<span class="hljs-comment">#1e1e2e, fg=#cdd6f4</span>

<span class="hljs-comment"># Session indicator (blue accent)</span>
status-left: <span class="hljs-comment">#[fg=#89b4fa,bold] #S</span>

<span class="hljs-comment"># Active window highlight (pink accent)</span>
window-status-current-format: <span class="hljs-comment">#[fg=#f5c2e7,bold] #I:#W</span>

<span class="hljs-comment"># Pane borders</span>
pane-border-style: <span class="hljs-built_in">fg</span>=<span class="hljs-comment">#313244</span>
pane-active-border-style: <span class="hljs-built_in">fg</span>=<span class="hljs-comment">#89b4fa  # Blue highlight</span>
</code></pre>
<p><strong>Local Overrides:</strong>
The config sources <code>~/.tmux.conf.local</code> if it exists, allowing personal customizations without modifying ACFS defaults.</p>
<hr>
<h2 id="library-modules">Library Modules</h2>
<p>The installer is organized into modular Bash libraries in <code>scripts/lib/</code>:</p>
<h3 id="loggingsh"><code>logging.sh</code></h3>
<p>Colored console output utilities:</p>
<pre><code class="language-bash">log_step <span class="hljs-string">&quot;1/8&quot;</span> <span class="hljs-string">&quot;Installing packages...&quot;</span>  <span class="hljs-comment"># Blue step indicator</span>
log_detail <span class="hljs-string">&quot;Installing zsh...&quot;</span>           <span class="hljs-comment"># Gray indented detail</span>
log_success <span class="hljs-string">&quot;Complete&quot;</span>                    <span class="hljs-comment"># Green checkmark</span>
log_warn <span class="hljs-string">&quot;May take a while&quot;</span>              <span class="hljs-comment"># Yellow warning</span>
log_error <span class="hljs-string">&quot;Failed&quot;</span>                        <span class="hljs-comment"># Red error</span>
log_fatal <span class="hljs-string">&quot;Cannot continue&quot;</span>              <span class="hljs-comment"># Red error + exit 1</span>
</code></pre>
<h3 id="securitysh"><code>security.sh</code></h3>
<p>HTTPS enforcement and checksum verification:</p>
<pre><code class="language-bash">enforce_https <span class="hljs-string">&quot;<span class="hljs-variable">$url</span>&quot;</span>                     <span class="hljs-comment"># Fail if not HTTPS</span>
verify_checksum <span class="hljs-string">&quot;<span class="hljs-variable">$url</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$sha256</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$name</span>&quot;</span> <span class="hljs-comment"># Verify before execute</span>
fetch_and_run <span class="hljs-string">&quot;<span class="hljs-variable">$url</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$sha256</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$name</span>&quot;</span>   <span class="hljs-comment"># Verify + execute in one</span>
</code></pre>
<h3 id="os_detectsh"><code>os_detect.sh</code></h3>
<p>OS detection and validation:</p>
<pre><code class="language-bash">detect_os()      <span class="hljs-comment"># Sets OS_ID, OS_VERSION, OS_CODENAME</span>
validate_os()    <span class="hljs-comment"># Checks for Ubuntu 25.10 (or upgrade path)</span>
is_fresh_vps()   <span class="hljs-comment"># Heuristic detection of fresh VPS</span>
get_arch()       <span class="hljs-comment"># Returns amd64/arm64</span>
is_wsl()         <span class="hljs-comment"># Detects WSL</span>
is_docker()      <span class="hljs-comment"># Detects Docker container</span>
</code></pre>
<h3 id="usersh"><code>user.sh</code></h3>
<p>User account normalization:</p>
<pre><code class="language-bash">ensure_user()              <span class="hljs-comment"># Creates ubuntu user if missing</span>
enable_passwordless_sudo() <span class="hljs-comment"># Adds NOPASSWD to sudoers</span>
migrate_ssh_keys()         <span class="hljs-comment"># Copies keys from root to ubuntu</span>
normalize_user()           <span class="hljs-comment"># Full normalization sequence</span>
</code></pre>
<h3 id="updatesh"><code>update.sh</code></h3>
<p>Component update logic with version tracking and logging:</p>
<pre><code class="language-bash">update_apt()       <span class="hljs-comment"># apt update/upgrade with lock detection</span>
update_bun()       <span class="hljs-comment"># bun upgrade with version tracking</span>
update_agents()    <span class="hljs-comment"># Claude, Codex, Gemini (version before/after)</span>
update_cloud()     <span class="hljs-comment"># Wrangler, Supabase, Vercel (Supabase uses verified release tarball)</span>
update_rust()      <span class="hljs-comment"># rustup update stable</span>
update_uv()        <span class="hljs-comment"># uv self update</span>
update_go()        <span class="hljs-comment"># Go toolchain update</span>
update_shell()     <span class="hljs-comment"># OMZ, P10K, plugins, Atuin, Zoxide</span>
update_stack()     <span class="hljs-comment"># Dicklesworthstone stack tools</span>

<span class="hljs-comment"># Features:</span>
<span class="hljs-comment"># - Automatic logging to ~/.acfs/logs/updates/</span>
<span class="hljs-comment"># - Version tracking (before/after for each tool)</span>
<span class="hljs-comment"># - APT lock detection and warning</span>
<span class="hljs-comment"># - Reboot-required detection for kernel updates</span>
<span class="hljs-comment"># - Dry-run mode with --dry-run flag</span>
</code></pre>
<h3 id="gum_uish"><code>gum_ui.sh</code></h3>
<p>Enhanced terminal UI using Charmbracelet Gum:</p>
<pre><code class="language-bash">print_banner()           <span class="hljs-comment"># ASCII art ACFS banner</span>
gum_step/gum_detail      <span class="hljs-comment"># Styled output</span>
gum_success/warn/error   <span class="hljs-comment"># Colored messages</span>
gum_spin                 <span class="hljs-comment"># Spinner for long operations</span>
gum_confirm              <span class="hljs-comment"># Yes/No prompt</span>
gum_choose               <span class="hljs-comment"># Selection menu</span>
</code></pre>
<p>Falls back to basic echo if Gum is not installed.</p>
<h3 id="error_trackingsh"><code>error_tracking.sh</code></h3>
<p>Sophisticated error collection and reporting:</p>
<pre><code class="language-bash">track_error <span class="hljs-string">&quot;phase&quot;</span> <span class="hljs-string">&quot;step&quot;</span> <span class="hljs-string">&quot;error_message&quot;</span>
track_warning <span class="hljs-string">&quot;phase&quot;</span> <span class="hljs-string">&quot;step&quot;</span> <span class="hljs-string">&quot;warning_message&quot;</span>
get_error_report                    <span class="hljs-comment"># Generate structured error report</span>
get_error_count                     <span class="hljs-comment"># Count of tracked errors</span>
has_errors                          <span class="hljs-comment"># Boolean check for any errors</span>
</code></pre>
<p>Features:</p>
<ul>
<li>Collects errors without aborting execution</li>
<li>Associates errors with phase and step context</li>
<li>Generates end-of-run summary reports</li>
<li>Distinguishes warnings from errors</li>
</ul>
<h3 id="statesh"><code>state.sh</code></h3>
<p>State machine management for installation progress (v3 schema):</p>
<pre><code class="language-bash">state_init                          <span class="hljs-comment"># Initialize state file</span>
state_get_phase                     <span class="hljs-comment"># Current phase</span>
state_set_phase <span class="hljs-string">&quot;phase_name&quot;</span>        <span class="hljs-comment"># Set current phase</span>
state_mark_complete <span class="hljs-string">&quot;phase_name&quot;</span>    <span class="hljs-comment"># Mark phase complete</span>
state_has_completed <span class="hljs-string">&quot;phase_name&quot;</span>    <span class="hljs-comment"># Check if phase done</span>
state_save                          <span class="hljs-comment"># Persist to disk (atomic)</span>
state_load                          <span class="hljs-comment"># Load from disk</span>
</code></pre>
<p>The state file (<code>~/.acfs/state.json</code>) uses atomic writes to prevent corruption.</p>
<h3 id="contractsh"><code>contract.sh</code></h3>
<p>Runtime contract validation for generated scripts:</p>
<pre><code class="language-bash">acfs_require_contract <span class="hljs-string">&quot;module_id&quot;</span>   <span class="hljs-comment"># Assert environment is ready</span>
acfs_check_contract                 <span class="hljs-comment"># Non-fatal contract check</span>
</code></pre>
<p>Validates that required environment variables and functions exist before execution:</p>
<ul>
<li><code>TARGET_USER</code>, <code>TARGET_HOME</code>, <code>MODE</code></li>
<li><code>ACFS_BOOTSTRAP_DIR</code>, <code>ACFS_LIB_DIR</code></li>
<li>Logging functions: <code>log_detail</code>, <code>log_success</code>, etc.</li>
</ul>
<h3 id="smoke_testsh"><code>smoke_test.sh</code></h3>
<p>Post-install verification that runs automatically after installation:</p>
<pre><code class="language-bash">run_smoke_test                      <span class="hljs-comment"># Execute all smoke tests</span>
</code></pre>
<p><strong>Critical Checks</strong> (must pass):</p>
<ul>
<li>Running as ubuntu user</li>
<li>Passwordless sudo enabled</li>
<li>Zsh is default shell</li>
<li>Core tools accessible (bun, uv, cargo)</li>
</ul>
<p><strong>Non-Critical Checks</strong> (warnings only):</p>
<ul>
<li>Agent authentication configured</li>
<li>Cloud CLIs authenticated</li>
<li>Optional tools installed</li>
</ul>
<p>Example output:</p>
<pre><code>[Smoke Test]
  âœ… Running as ubuntu user
  âœ… Passwordless sudo enabled
  âœ… Zsh is default shell
  âœ… bun --version works
  âš ï¸  Codex not authenticated (run: codex login)
  âœ… 8/9 checks passed
</code></pre>
<h3 id="sessionsh"><code>session.sh</code></h3>
<p>Agent session export functionality for sharing and replay:</p>
<pre><code class="language-bash">session_export <span class="hljs-string">&quot;claude-code&quot;</span> <span class="hljs-string">&quot;session_id&quot;</span> <span class="hljs-string">&quot;/output/path&quot;</span>
session_list                        <span class="hljs-comment"># List exportable sessions</span>
session_validate <span class="hljs-string">&quot;/export/file.json&quot;</span>
</code></pre>
<p>Implements the <strong>Session Export Schema</strong> for cross-agent sharing:</p>
<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SessionExport</span> {
  <span class="hljs-attr">schema_version</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">exported_at</span>: <span class="hljs-built_in">string</span>;              <span class="hljs-comment">// ISO8601</span>
  <span class="hljs-attr">session_id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">agent</span>: <span class="hljs-string">&quot;claude-code&quot;</span> | <span class="hljs-string">&quot;codex&quot;</span> | <span class="hljs-string">&quot;gemini&quot;</span>;
  <span class="hljs-attr">model</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">summary</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">duration_minutes</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">stats</span>: {
    <span class="hljs-attr">turns</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">files_created</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">files_modified</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">commands_run</span>: <span class="hljs-built_in">number</span>;
  };
  <span class="hljs-attr">outcomes</span>: <span class="hljs-title class_">Array</span>&lt;{
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;file_created&quot;</span> | <span class="hljs-string">&quot;file_modified&quot;</span> | <span class="hljs-string">&quot;command_run&quot;</span>;
    path?: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;
  }&gt;;
  <span class="hljs-attr">key_prompts</span>: <span class="hljs-built_in">string</span>[];            <span class="hljs-comment">// Notable prompts for learning</span>
  <span class="hljs-attr">sanitized_transcript</span>: <span class="hljs-title class_">Array</span>&lt;{
    <span class="hljs-attr">role</span>: <span class="hljs-string">&quot;user&quot;</span> | <span class="hljs-string">&quot;assistant&quot;</span>;
    <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">string</span>;
  }&gt;;
}
</code></pre>
<h3 id="tailscalesh"><code>tailscale.sh</code></h3>
<p>Zero-config VPN setup for secure remote access:</p>
<pre><code class="language-bash">install_tailscale                   <span class="hljs-comment"># Install via official APT repo</span>
verify_tailscale                    <span class="hljs-comment"># Check installation</span>
tailscale_status                    <span class="hljs-comment"># Get connection status</span>
</code></pre>
<p>Tailscale provides:</p>
<ul>
<li><strong>Secure mesh networking</strong> between your devices</li>
<li><strong>SSH over Tailscale</strong> for firewall-free access</li>
<li><strong>MagicDNS</strong> for hostname-based addressing</li>
<li><strong>ACL-based access control</strong></li>
</ul>
<p>After installation, run <code>tailscale up</code> to authenticate and join your tailnet.</p>
<h3 id="ubuntu_upgradesh"><code>ubuntu_upgrade.sh</code></h3>
<p>Multi-reboot Ubuntu version upgrade automation:</p>
<pre><code class="language-bash">start_ubuntu_upgrade                <span class="hljs-comment"># Begin upgrade chain</span>
check_upgrade_status                <span class="hljs-comment"># Current upgrade state</span>
resume_upgrade_after_reboot         <span class="hljs-comment"># Continue after reboot</span>
</code></pre>
<p>Handles the complex multi-step Ubuntu upgrade process:</p>
<ol>
<li>Detects current version</li>
<li>Calculates upgrade path (e.g., 24.04 â†’ 25.04 â†’ 25.10)</li>
<li>Performs sequential <code>do-release-upgrade</code> operations</li>
<li>Installs systemd service for post-reboot resume</li>
<li>Continues ACFS installation after reaching target</li>
</ol>
<hr>
<h2 id="mcp-agent-mail-integration">MCP Agent Mail Integration</h2>
<p>ACFS includes integration with <strong>MCP Agent Mail</strong> for multi-agent coordination:</p>
<h3 id="what-agent-mail-provides">What Agent Mail Provides</h3>
<ul>
<li><strong>Identities:</strong> Each agent registers with a unique name</li>
<li><strong>Inbox/Outbox:</strong> Message-based communication between agents</li>
<li><strong>File Reservations:</strong> Advisory leases to prevent agents from clobbering each other's work</li>
<li><strong>Searchable Threads:</strong> Full-text search across all messages</li>
<li><strong>Git Persistence:</strong> All artifacts stored in git for human auditability</li>
</ul>
<h3 id="core-patterns">Core Patterns</h3>
<p><strong>1. Register Identity:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># In your agent, call:</span>
mcp.ensure_project(project_key=<span class="hljs-string">&quot;/data/projects/my-project&quot;</span>)
mcp.register_agent(project_key=..., program=<span class="hljs-string">&quot;claude-code&quot;</span>, model=<span class="hljs-string">&quot;opus-4.5&quot;</span>)
</code></pre>
<p><strong>2. Reserve Files Before Editing:</strong></p>
<pre><code class="language-bash">mcp.file_reservation_paths(
    project_key=...,
    agent_name=<span class="hljs-string">&quot;BlueLake&quot;</span>,
    paths=[<span class="hljs-string">&quot;src/**&quot;</span>],
    ttl_seconds=3600,
    exclusive=<span class="hljs-literal">true</span>
)
</code></pre>
<p><strong>3. Communicate:</strong></p>
<pre><code class="language-bash">mcp.send_message(
    project_key=...,
    sender_name=<span class="hljs-string">&quot;BlueLake&quot;</span>,
    to=[<span class="hljs-string">&quot;GreenCastle&quot;</span>],
    subject=<span class="hljs-string">&quot;Review needed&quot;</span>,
    body_md=<span class="hljs-string">&quot;Please review the auth changes...&quot;</span>
)
</code></pre>
<h3 id="macros-for-speed">Macros for Speed</h3>
<p>When speed matters more than fine-grained control:</p>
<pre><code class="language-bash">mcp.macro_start_session(...)      <span class="hljs-comment"># Ensure project + register + fetch inbox</span>
mcp.macro_prepare_thread(...)     <span class="hljs-comment"># Align with existing thread</span>
mcp.macro_file_reservation_cycle(...)  <span class="hljs-comment"># Reserve + work + release</span>
mcp.macro_contact_handshake(...)  <span class="hljs-comment"># Request contact permissions</span>
</code></pre>
<hr>
<h2 id="destructive-command-guard-dcg">Destructive Command Guard (dcg)</h2>
<p><strong>dcg</strong> is a high-performance Claude Code hook that blocks dangerous git and filesystem commands before they execute. Built in Rust for sub-millisecond latency, it provides mechanical enforcement of safety rules that instructions alone cannot guarantee.</p>
<h3 id="why-dcg-exists">Why dcg Exists</h3>
<p>On December 17, 2025, an AI agent ran <code>git checkout --</code> on files containing hours of uncommitted work from a parallel coding session. The files were recovered via <code>git fsck --lost-found</code>, but the incident made one thing clear: instructions in <code>AGENTS.md</code> don't prevent execution. <strong>dcg provides mechanical enforcement</strong>.</p>
<h3 id="what-gets-blocked">What Gets Blocked</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Commands</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Git Reset</strong></td>
<td><code>git reset --hard</code>, <code>git reset --merge</code></td>
</tr>
<tr>
<td><strong>File Discard</strong></td>
<td><code>git checkout -- &lt;files&gt;</code>, <code>git restore &lt;files&gt;</code></td>
</tr>
<tr>
<td><strong>Force Push</strong></td>
<td><code>git push --force</code> / <code>-f</code> (allows <code>--force-with-lease</code>)</td>
</tr>
<tr>
<td><strong>Clean</strong></td>
<td><code>git clean -f</code> (allows <code>-n</code> dry-run)</td>
</tr>
<tr>
<td><strong>Branch Delete</strong></td>
<td><code>git branch -D</code> (allows <code>-d</code>)</td>
</tr>
<tr>
<td><strong>Stash Loss</strong></td>
<td><code>git stash drop</code>, <code>git stash clear</code></td>
</tr>
<tr>
<td><strong>Filesystem</strong></td>
<td><code>rm -rf</code> (except temp directories)</td>
</tr>
</tbody>
</table>
<h3 id="what-gets-allowed">What Gets Allowed</h3>
<p>Safe variants are allowlisted:</p>
<ul>
<li><code>git checkout -b &lt;branch&gt;</code> â€” Creates branch, doesn't touch files</li>
<li><code>git restore --staged</code> â€” Only unstages, doesn't discard</li>
<li><code>git clean -n</code> â€” Dry-run preview</li>
<li><code>rm -rf /tmp/...</code> â€” Temp directories are ephemeral</li>
</ul>
<h3 id="installation">Installation</h3>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/destructive_command_guard/main/install.sh?<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash
</code></pre>
<h3 id="claude-code-configuration">Claude Code Configuration</h3>
<p>Add to <code>~/.claude/settings.json</code>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;hooks&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;PreToolUse&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;matcher&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bash&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;hooks&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;command&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dcg&quot;</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="modular-pack-system">Modular Pack System</h3>
<p>dcg uses a modular pack system for extensibility. Enable additional packs in <code>~/.config/dcg/config.toml</code>:</p>
<pre><code class="language-toml"><span class="hljs-section">[packs]</span>
<span class="hljs-attr">enabled</span> = [
    <span class="hljs-string">&quot;database.postgresql&quot;</span>,
    <span class="hljs-string">&quot;containers.docker&quot;</span>,
    <span class="hljs-string">&quot;kubernetes&quot;</span>,
]
</code></pre>
<p>Available packs: <code>database.*</code>, <code>containers.*</code>, <code>kubernetes.*</code>, <code>cloud.*</code>, <code>infrastructure.*</code>, <code>system.*</code>, <code>package_managers</code>.</p>
<hr>
<h2 id="repo-updater-ru">Repo Updater (ru)</h2>
<p><strong>ru</strong> is a production-grade CLI tool for synchronizing collections of GitHub repositories and automating commit workflows across dirty repos with AI assistance.</p>
<h3 id="core-features">Core Features</h3>
<ul>
<li><strong>Multi-repo sync</strong>: Clone missing repos, pull updates, detect conflicts</li>
<li><strong>Agent sweep</strong>: AI-driven commit automation across repositories with uncommitted changes</li>
<li><strong>AI code review</strong>: Orchestrate Claude Code review sessions for open issues/PRs</li>
<li><strong>Work-stealing queue</strong>: Parallel execution with load-balanced workers</li>
<li><strong>NTM integration</strong>: Session management via Named Tmux Manager</li>
</ul>
<h3 id="quick-start">Quick Start</h3>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/repo_updater/main/install.sh?ru_cb=<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash
</code></pre>
<p>Initialize configuration:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Initialize configuration</span>
ru init --example

<span class="hljs-comment"># Sync all repositories</span>
ru <span class="hljs-built_in">sync</span>

<span class="hljs-comment"># Check status without changes</span>
ru status
</code></pre>
<h3 id="agent-sweep-workflow">Agent Sweep Workflow</h3>
<p>The <code>agent-sweep</code> command automates commits across dirty repositories:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Preview repos to process</span>
ru agent-sweep --dry-run

<span class="hljs-comment"># Full automation with AI</span>
ru agent-sweep --parallel 4

<span class="hljs-comment"># Include release automation</span>
ru agent-sweep --with-release
</code></pre>
<p><strong>Three-Phase Workflow:</strong></p>
<ol>
<li><strong>Planning</strong>: Claude Code analyzes changes, generates commit message</li>
<li><strong>Commit</strong>: Validates plan, stages files, runs quality gates</li>
<li><strong>Release</strong>: (Optional) Creates version tag and GitHub release</li>
</ol>
<h3 id="configuration">Configuration</h3>
<pre><code class="language-bash"><span class="hljs-comment"># ~/.config/ru/config</span>
PROJECTS_DIR=/data/projects
LAYOUT=flat                   <span class="hljs-comment"># flat|owner-repo|full</span>
UPDATE_STRATEGY=ff-only       <span class="hljs-comment"># ff-only|rebase|merge</span>
PARALLEL=4
</code></pre>
<p><strong>Repo list format</strong> (<code>~/.config/ru/repos.d/public.txt</code>):</p>
<pre><code>owner/repo
owner/repo@develop            # Pin to branch
owner/repo as custom-name     # Custom directory name
</code></pre>
<hr>
<h2 id="get-image-from-internet-link-giil">Get Image from Internet Link (giil)</h2>
<p><strong>giil</strong> downloads full-resolution images from cloud photo shares to your terminal. Essential for remote debugging workflows where you need to analyze screenshots in SSH sessions.</p>
<h3 id="supported-platforms">Supported Platforms</h3>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Method</th>
<th>Speed</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iCloud</strong></td>
<td>4-tier capture strategy</td>
<td>5-15s</td>
</tr>
<tr>
<td><strong>Dropbox</strong></td>
<td>Direct curl download</td>
<td>1-2s</td>
</tr>
<tr>
<td><strong>Google Photos</strong></td>
<td>Network interception</td>
<td>5-15s</td>
</tr>
<tr>
<td><strong>Google Drive</strong></td>
<td>Multi-tier with auth detection</td>
<td>5-15s</td>
</tr>
</tbody>
</table>
<h3 id="usage-2">Usage</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Basic download</span>
giil <span class="hljs-string">&quot;https://share.icloud.com/photos/02cD9okNHvVd-uuDnPCH3ZEEA&quot;</span>
<span class="hljs-comment"># Output: /current/dir/icloud_20240115_143245.jpg</span>

<span class="hljs-comment"># Download to specific directory</span>
giil <span class="hljs-string">&quot;...&quot;</span> --output ~/Downloads

<span class="hljs-comment"># Get JSON metadata</span>
giil <span class="hljs-string">&quot;...&quot;</span> --json

<span class="hljs-comment"># Download all photos from album</span>
giil <span class="hljs-string">&quot;...&quot;</span> --all --output ~/album
</code></pre>
<h3 id="installation-1">Installation</h3>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/giil/main/install.sh?v=3.0.0&quot;</span> | bash
</code></pre>
<h3 id="visual-debugging-workflow">Visual Debugging Workflow</h3>
<ol>
<li>Screenshot UI bug on iPhone</li>
<li>Wait for iCloud sync to Mac</li>
<li>Share via Photos.app â†’ Copy iCloud Link</li>
<li>Paste link into remote terminal running Claude Code</li>
<li><code>giil</code> fetches the image locally</li>
<li>AI assistant analyzes the screenshot</li>
</ol>
<hr>
<h2 id="chat-shared-conversation-to-file-csctf">Chat Shared Conversation to File (csctf)</h2>
<p><strong>csctf</strong> converts public AI conversation share links into clean, searchable Markdown and HTML transcripts. Perfect for archiving AI conversations, building knowledge bases, and sharing with teams.</p>
<h3 id="supported-providers">Supported Providers</h3>
<table>
<thead>
<tr>
<th>Provider</th>
<th>URL Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ChatGPT</strong></td>
<td><code>chatgpt.com/share/*</code></td>
</tr>
<tr>
<td><strong>Gemini</strong></td>
<td><code>gemini.google.com/share/*</code></td>
</tr>
<tr>
<td><strong>Grok</strong></td>
<td><code>grok.com/share/*</code></td>
</tr>
<tr>
<td><strong>Claude</strong></td>
<td><code>claude.ai/share/*</code></td>
</tr>
</tbody>
</table>
<h3 id="usage-3">Usage</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Basic conversion</span>
csctf https://chatgpt.com/share/69343092-91ac-800b-996c-7552461b9b70
<span class="hljs-comment"># Creates: &lt;slug&gt;.md and &lt;slug&gt;.html</span>

<span class="hljs-comment"># Markdown only</span>
csctf <span class="hljs-string">&quot;...&quot;</span> --md-only

<span class="hljs-comment"># Publish to GitHub Pages</span>
csctf <span class="hljs-string">&quot;...&quot;</span> --publish-to-gh-pages --<span class="hljs-built_in">yes</span>

<span class="hljs-comment"># JSON metadata output</span>
csctf <span class="hljs-string">&quot;...&quot;</span> --json
</code></pre>
<h3 id="installation-2">Installation</h3>
<pre><code class="language-bash">curl -fsSL https://raw.githubusercontent.com/Dicklesworthstone/chat_shared_conversation_to_file/main/install.sh | bash
</code></pre>
<h3 id="output-features">Output Features</h3>
<ul>
<li><strong>Markdown</strong>: Clean formatting with preserved code blocks and language hints</li>
<li><strong>HTML</strong>: Zero-JavaScript static page with syntax highlighting</li>
<li><strong>Deterministic filenames</strong>: <code>&lt;slug&gt;_YYYYMMDD.md</code> for reliable archival</li>
<li><strong>Collision handling</strong>: Auto-increments suffix to avoid overwrites</li>
</ul>
<hr>
<h2 id="cicd">CI/CD</h2>
<p>ACFS uses GitHub Actions for continuous integration:</p>
<h3 id="installer-testing-installeryml">Installer Testing (<code>installer.yml</code>)</h3>
<pre><code class="language-yaml"><span class="hljs-comment"># Runs on every push and PR</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">shellcheck:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Lints</span> <span class="hljs-string">all</span> <span class="hljs-string">bash</span> <span class="hljs-string">scripts</span> <span class="hljs-string">with</span> <span class="hljs-string">ShellCheck</span>

  <span class="hljs-attr">integration:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Matrix</span> <span class="hljs-string">tests</span> <span class="hljs-string">across</span> <span class="hljs-string">Ubuntu</span> <span class="hljs-number">24.04</span><span class="hljs-string">,</span> <span class="hljs-number">25.04</span><span class="hljs-string">,</span> <span class="hljs-number">25.10</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Runs</span> <span class="hljs-string">full</span> <span class="hljs-string">installation</span> <span class="hljs-string">in</span> <span class="hljs-string">Docker</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Verifies</span> <span class="hljs-string">all</span> <span class="hljs-string">tools</span> <span class="hljs-string">installed</span> <span class="hljs-string">correctly</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Runs</span> <span class="hljs-string">acfs</span> <span class="hljs-string">doctor</span> <span class="hljs-string">to</span> <span class="hljs-string">confirm</span> <span class="hljs-string">health</span>
</code></pre>
<p>This ensures the installer works on all supported Ubuntu versions and catches shell scripting issues early.</p>
<h3 id="website-deployment-websiteyml">Website Deployment (<code>website.yml</code>)</h3>
<pre><code class="language-yaml"><span class="hljs-comment"># Builds and deploys the Next.js wizard</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Type-check</span> <span class="hljs-string">TypeScript</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Run</span> <span class="hljs-string">ESLint</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Build</span> <span class="hljs-string">production</span> <span class="hljs-string">bundle</span>

  <span class="hljs-attr">deploy:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">Vercel</span> <span class="hljs-string">(production)</span>
</code></pre>
<h3 id="automated-checksum-updates-checksum-monitoryml">Automated Checksum Updates (<code>checksum-monitor.yml</code>)</h3>
<p>ACFS automatically monitors upstream installers for changes and updates checksums:</p>
<pre><code class="language-yaml"><span class="hljs-comment"># Runs every 2 hours + on upstream changes</span>
<span class="hljs-attr">schedule:</span> <span class="hljs-string">&quot;0 */2 * * *&quot;</span>
<span class="hljs-attr">triggers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Schedule</span> <span class="hljs-string">(every</span> <span class="hljs-number">2</span> <span class="hljs-string">hours)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Webhook</span> <span class="hljs-string">from</span> <span class="hljs-string">upstream</span> <span class="hljs-string">repos</span> <span class="hljs-string">(repository_dispatch)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Changes</span> <span class="hljs-string">to</span> <span class="hljs-string">security.sh</span>
</code></pre>
<p><strong>How It Works:</strong></p>
<ol>
<li><strong>Verify Current Checksums</strong>: Downloads all upstream installers, calculates SHA256</li>
<li><strong>Detect Changes</strong>: Compares against <code>checksums.yaml</code></li>
<li><strong>Categorize Tools</strong>: Separates &quot;trusted&quot; tools (can auto-update) from others</li>
<li><strong>Auto-Update</strong>: For trusted tools, commits updated checksums automatically</li>
<li><strong>Alert</strong>: For non-trusted tools, creates GitHub issue for manual review</li>
</ol>
<p><strong>Trusted Tools (Auto-Update Enabled):</strong></p>
<ul>
<li>Dicklesworthstone stack tools (ntm, cass, cm, ubs, slb, dcg, caam, bv, agent-mail, ru)</li>
<li>These are maintained by the same author, so upstream changes are implicitly trusted</li>
</ul>
<p><strong>Non-Trusted Tools (Manual Review Required):</strong></p>
<ul>
<li>Third-party installers (bun, uv, rust, oh-my-zsh, atuin, zoxide, nvm)</li>
<li>Changes trigger a GitHub issue with diff details for human review</li>
</ul>
<p>This ensures:</p>
<ul>
<li><strong>Security</strong>: Third-party changes are reviewed before deployment</li>
<li><strong>Velocity</strong>: Internal tool updates are deployed automatically</li>
<li><strong>Auditability</strong>: All changes tracked via git commits</li>
</ul>
<p><strong>Upstream Repo Dispatch (Fast Path):</strong></p>
<ul>
<li>ACFS-owned tool repos emit a <code>repository_dispatch</code> event (<code>upstream-changed</code>) when their <code>install.sh</code> changes or a release is published.</li>
<li>Requires a PAT secret named <code>ACFS_REPO_DISPATCH_TOKEN</code> in each tool repo (repo scope for this org/user).</li>
<li>If dispatch fails, the 2-hour scheduled monitor still catches drift (but slower).</li>
</ul>
<h3 id="production-smoke-tests-production-smokeyml">Production Smoke Tests (<code>production-smoke.yml</code>)</h3>
<p>Validates deployments on real environments:</p>
<pre><code class="language-yaml"><span class="hljs-comment"># Runs after deployment</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">smoke:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Fetches</span> <span class="hljs-string">install.sh</span> <span class="hljs-string">from</span> <span class="hljs-string">production</span> <span class="hljs-string">URL</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Verifies</span> <span class="hljs-string">checksum</span> <span class="hljs-string">matches</span> <span class="hljs-string">repository</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Validates</span> <span class="hljs-string">shell</span> <span class="hljs-string">syntax</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Confirms</span> <span class="hljs-literal">no</span> <span class="hljs-string">uncommitted</span> <span class="hljs-string">drift</span>
</code></pre>
<h3 id="installer-canary-docker-installer-canaryyml">Installer Canary (Docker) (<code>installer-canary.yml</code>)</h3>
<p>Runs the <strong>full installer end-to-end</strong> inside fresh Ubuntu containers on a daily schedule.</p>
<pre><code class="language-yaml"><span class="hljs-attr">schedule:</span> <span class="hljs-string">&quot;30 7 * * *&quot;</span> <span class="hljs-comment"># daily</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">canary:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Run</span> <span class="hljs-string">tests/vm/test_install_ubuntu.sh</span> <span class="hljs-string">(vibe</span> <span class="hljs-string">mode)</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">Uses</span> <span class="hljs-string">ACFS_CHECKSUMS_REF=main</span> <span class="hljs-string">for</span> <span class="hljs-string">freshest</span> <span class="hljs-string">hashes</span>
</code></pre>
<h3 id="playwright-e2e-tests-playwrightyml">Playwright E2E Tests (<code>playwright.yml</code>)</h3>
<p>Full browser testing of the wizard website:</p>
<pre><code class="language-yaml"><span class="hljs-comment"># Runs on PR to main</span>
<span class="hljs-attr">browsers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Chromium</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Firefox</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">WebKit</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Mobile</span> <span class="hljs-string">Chrome</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Mobile</span> <span class="hljs-string">Safari</span>

<span class="hljs-attr">tests:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Wizard</span> <span class="hljs-string">flow</span> <span class="hljs-string">completion</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Step</span> <span class="hljs-string">navigation</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Copy</span> <span class="hljs-string">button</span> <span class="hljs-string">functionality</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Responsive</span> <span class="hljs-string">design</span>
</code></pre>
<hr>
<h2 id="vps-providers">VPS Providers</h2>
<p>ACFS works on any Ubuntu VPS with SSH key login. Here are recommended providers optimized for multi-agent workloads.</p>
<blockquote>
<p><strong>Why 48-64GB RAM?</strong> Each AI coding agent uses ~2GB RAM. To run 10-20+ agents simultaneously, you need 48GB+ RAM. Don't bottleneck a $400+/month AI investment to save $20 on hosting.</p>
</blockquote>
<h3 id="contabo-best-value--top-pick">Contabo (Best Value â€” Top Pick)</h3>
<table>
<thead>
<tr>
<th>Plan</th>
<th>RAM</th>
<th>vCPU</th>
<th>Storage</th>
<th>Price</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cloud VPS 50</strong></td>
<td>64GB</td>
<td>16</td>
<td>400GB NVMe</td>
<td>~$56/mo (US)</td>
<td><strong>Recommended</strong> â€” Best for serious multi-agent work</td>
</tr>
<tr>
<td>Cloud VPS 40</td>
<td>48GB</td>
<td>12</td>
<td>300GB NVMe</td>
<td>~$36/mo (US)</td>
<td>Budget option, still comfortable</td>
</tr>
</tbody>
</table>
<ul>
<li>Best specs-to-price ratio on the market</li>
<li>Month-to-month pricing, no commitment required</li>
<li>US datacenter pricing includes ~$10/month premium</li>
</ul>
<h3 id="ovh-great-alternative">OVH (Great Alternative)</h3>
<table>
<thead>
<tr>
<th>Plan</th>
<th>RAM</th>
<th>vCore</th>
<th>Storage</th>
<th>Price</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VPS-5</strong></td>
<td>64GB</td>
<td>16</td>
<td>320GB NVMe</td>
<td>~$40/mo</td>
<td><strong>Recommended</strong> â€” Great EU and US datacenters</td>
</tr>
<tr>
<td>VPS-4</td>
<td>48GB</td>
<td>12</td>
<td>240GB NVMe</td>
<td>~$26/mo</td>
<td>Budget option</td>
</tr>
</tbody>
</table>
<ul>
<li>Anti-DDoS included</li>
<li>Month-to-month, 5-15% discount for longer commitments</li>
<li>Typically faster activation than Contabo</li>
</ul>
<h3 id="requirements">Requirements</h3>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Minimum</th>
<th>Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OS</strong></td>
<td>Ubuntu 22.04+ (auto-upgraded)</td>
<td>Ubuntu 25.10</td>
</tr>
<tr>
<td><strong>RAM</strong></td>
<td>32GB (tight)</td>
<td>48-64GB</td>
</tr>
<tr>
<td><strong>Storage</strong></td>
<td>250GB NVMe SSD</td>
<td>300GB+ NVMe SSD</td>
</tr>
<tr>
<td><strong>CPU</strong></td>
<td>12 vCPU</td>
<td>16 vCPU</td>
</tr>
<tr>
<td><strong>Price</strong></td>
<td>~$26/mo</td>
<td>~$40-56/mo</td>
</tr>
</tbody>
</table>
<h3 id="other-providers">Other Providers</h3>
<p>Any provider with Ubuntu VPS and SSH key login works. The wizard at <a href="https://agent-flywheel.com">agent-flywheel.com</a> has step-by-step guides.</p>
<h3 id="provider-setup-guides">Provider Setup Guides</h3>
<p>ACFS includes detailed step-by-step guides for each supported provider in <code>scripts/providers/</code>:</p>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Guide</th>
<th>Key Sections</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Contabo</strong></td>
<td><code>contabo.md</code></td>
<td>Account creation, plan selection, data center choice, SSH key setup</td>
</tr>
<tr>
<td><strong>OVH</strong></td>
<td><code>ovh.md</code></td>
<td>Control panel navigation, instance configuration, networking</td>
</tr>
<tr>
<td><strong>Hetzner</strong></td>
<td><code>hetzner.md</code></td>
<td>Project setup, firewall rules, console access</td>
</tr>
</tbody>
</table>
<p>Each guide includes:</p>
<ul>
<li><strong>Screenshots</strong> for every step (in <code>scripts/providers/screenshots/</code>)</li>
<li><strong>Pricing breakdowns</strong> with recommendations</li>
<li><strong>Region selection</strong> guidance (latency, privacy)</li>
<li><strong>SSH key</strong> configuration specific to that provider</li>
<li><strong>Troubleshooting</strong> for common provisioning issues</li>
</ul>
<p><strong>Provider Comparison:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Contabo</th>
<th>OVH</th>
<th>Hetzner</th>
</tr>
</thead>
<tbody>
<tr>
<td>Best For</td>
<td>Maximum value</td>
<td>EU data residency</td>
<td>German engineering</td>
</tr>
<tr>
<td>Provisioning</td>
<td>1-3 hours</td>
<td>5-30 minutes</td>
<td>2-10 minutes</td>
</tr>
<tr>
<td>Support</td>
<td>Email only</td>
<td>Phone + chat</td>
<td>24/7 ticket system</td>
</tr>
<tr>
<td>Data Centers</td>
<td>EU, US, Asia</td>
<td>Global</td>
<td>EU only</td>
</tr>
<tr>
<td>Payment</td>
<td>Monthly</td>
<td>Hourly or monthly</td>
<td>Hourly or monthly</td>
</tr>
</tbody>
</table>
<p><strong>Recommendation Flow:</strong></p>
<ol>
<li><strong>Budget</strong>: Contabo (best specs per dollar)</li>
<li><strong>Speed</strong>: Hetzner (instant provisioning)</li>
<li><strong>Support</strong>: OVH (phone support available)</li>
<li><strong>Privacy</strong>: Any EU provider (GDPR compliance)</li>
</ol>
<hr>
<h2 id="project-structure">Project Structure</h2>
<pre><code>agentic_coding_flywheel_setup/
â”œâ”€â”€ README.md                     # This file
â”œâ”€â”€ AGENTS.md                     # Development guidelines
â”œâ”€â”€ VERSION                       # Current version (0.2.0)
â”œâ”€â”€ install.sh                    # Main installer entry point
â”œâ”€â”€ acfs.manifest.yaml            # Canonical tool manifest (510 lines)
â”œâ”€â”€ checksums.yaml                # SHA256 hashes for upstream scripts
â”œâ”€â”€ package.json                  # Root monorepo config
â”‚
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ web/                      # Next.js 16 wizard website
â”‚       â”œâ”€â”€ app/                  # App Router pages
â”‚       â”‚   â”œâ”€â”€ layout.tsx        # Root layout
â”‚       â”‚   â”œâ”€â”€ page.tsx          # Landing page
â”‚       â”‚   â””â”€â”€ wizard/           # Wizard step pages
â”‚       â”œâ”€â”€ components/           # UI components
â”‚       â””â”€â”€ lib/                  # Utilities
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ manifest/                 # Manifest parser + generator
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ parser.ts         # YAML parsing
â”‚   â”‚       â”œâ”€â”€ schema.ts         # Zod validation schemas
â”‚   â”‚       â”œâ”€â”€ types.ts          # TypeScript types
â”‚   â”‚       â”œâ”€â”€ utils.ts          # Helper functions
â”‚   â”‚       â””â”€â”€ generate.ts       # Script generator
â”‚   â”œâ”€â”€ installer/                # Installer helper scripts
â”‚   â””â”€â”€ onboard/                  # Onboard TUI source
â”‚
â”œâ”€â”€ acfs/                         # Files deployed to ~/.acfs/
â”‚   â”œâ”€â”€ zsh/
â”‚   â”‚   â””â”€â”€ acfs.zshrc            # Shell configuration
â”‚   â”œâ”€â”€ tmux/
â”‚   â”‚   â””â”€â”€ tmux.conf             # Tmux configuration
â”‚   â””â”€â”€ onboard/
â”‚       â”œâ”€â”€ onboard.sh            # Onboarding TUI script
â”‚       â””â”€â”€ lessons/              # Tutorial markdown (11 files)
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ lib/                      # Installer bash libraries
â”‚   â”‚   â”œâ”€â”€ logging.sh            # Console output
â”‚   â”‚   â”œâ”€â”€ security.sh           # HTTPS + checksum verification
â”‚   â”‚   â”œâ”€â”€ os_detect.sh          # OS detection
â”‚   â”‚   â”œâ”€â”€ user.sh               # User management
â”‚   â”‚   â”œâ”€â”€ zsh.sh                # Shell setup
â”‚   â”‚   â”œâ”€â”€ update.sh             # Update command logic
â”‚   â”‚   â”œâ”€â”€ gum_ui.sh             # Enhanced UI
â”‚   â”‚   â”œâ”€â”€ cli_tools.sh          # Tool installation
â”‚   â”‚   â””â”€â”€ doctor.sh             # Health checks
â”‚   â”œâ”€â”€ generated/                # Auto-generated from manifest
â”‚   â”‚   â”œâ”€â”€ install_base.sh       # Base packages
â”‚   â”‚   â”œâ”€â”€ install_shell.sh      # Shell tools
â”‚   â”‚   â”œâ”€â”€ install_cli.sh        # CLI tools
â”‚   â”‚   â”œâ”€â”€ install_lang.sh       # Language runtimes
â”‚   â”‚   â”œâ”€â”€ install_agents.sh     # AI coding agents
â”‚   â”‚   â”œâ”€â”€ install_cloud.sh      # Cloud CLIs
â”‚   â”‚   â”œâ”€â”€ install_stack.sh      # Dicklesworthstone stack
â”‚   â”‚   â”œâ”€â”€ install_all.sh        # Master installer
â”‚   â”‚   â””â”€â”€ doctor_checks.sh      # Verification checks
â”‚   â”œâ”€â”€ providers/                # VPS provider guides
â”‚   â”‚   â”œâ”€â”€ ovh.md
â”‚   â”‚   â”œâ”€â”€ contabo.md
â”‚   â”‚   â””â”€â”€ hetzner.md
â”‚   â””â”€â”€ sync/
â”‚       â””â”€â”€ sync_ntm_palette.sh   # Sync NTM command palette
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ installer.yml         # ShellCheck + Ubuntu matrix tests
â”‚       â””â”€â”€ website.yml           # Next.js build + deploy
â”‚
â””â”€â”€ tests/
    â””â”€â”€ vm/
        â””â”€â”€ test_install_ubuntu.sh # Docker integration test
</code></pre>
<hr>
<h2 id="development">Development</h2>
<h3 id="website-development">Website Development</h3>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> apps/web
bun install           <span class="hljs-comment"># Install dependencies</span>
bun run dev           <span class="hljs-comment"># Dev server at http://localhost:3000</span>
bun run build         <span class="hljs-comment"># Production build</span>
bun run lint          <span class="hljs-comment"># Lint check</span>
bun run type-check    <span class="hljs-comment"># TypeScript check</span>
</code></pre>
<h3 id="manifest-development">Manifest Development</h3>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> packages/manifest
bun install           <span class="hljs-comment"># Install dependencies</span>
bun run generate      <span class="hljs-comment"># Generate installer scripts</span>
bun run generate:dry  <span class="hljs-comment"># Preview without writing files</span>
</code></pre>
<h3 id="installer-testing">Installer Testing</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Local lint</span>
shellcheck install.sh scripts/lib/*.sh

<span class="hljs-comment"># Full installer integration test (Docker, same as CI)</span>
./tests/vm/test_install_ubuntu.sh
</code></pre>
<h3 id="security-verification-1">Security Verification</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Print all upstream URLs</span>
./scripts/lib/security.sh --<span class="hljs-built_in">print</span>

<span class="hljs-comment"># Verify all checksums</span>
./scripts/lib/security.sh --verify

<span class="hljs-comment"># Update checksums after reviewing upstream changes</span>
./scripts/lib/security.sh --update-checksums &gt; checksums.yaml
</code></pre>
<h3 id="manifest-validation">Manifest Validation</h3>
<p>The manifest parser includes comprehensive validation beyond basic schema checking:</p>
<p><strong>Validation Error Codes:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MISSING_DEPENDENCY</code></td>
<td>Module references non-existent dependency</td>
</tr>
<tr>
<td><code>DEPENDENCY_CYCLE</code></td>
<td>Circular dependency detected (Aâ†’Bâ†’Câ†’A)</td>
</tr>
<tr>
<td><code>PHASE_VIOLATION</code></td>
<td>Module runs before its dependencies</td>
</tr>
<tr>
<td><code>FUNCTION_NAME_COLLISION</code></td>
<td>Two modules generate same bash function</td>
</tr>
<tr>
<td><code>RESERVED_NAME_COLLISION</code></td>
<td>Module uses reserved identifier</td>
</tr>
<tr>
<td><code>INVALID_VERIFIED_INSTALLER_RUNNER</code></td>
<td>Runner not in allowlist (bash/sh only)</td>
</tr>
</tbody>
</table>
<p><strong>Running Validation:</strong></p>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> packages/manifest
bun run validate              <span class="hljs-comment"># Full validation</span>
bun run validate --verbose    <span class="hljs-comment"># Show all checks</span>
</code></pre>
<p><strong>Cycle Detection Algorithm:</strong></p>
<pre><code>Tarjan's strongly connected components (SCC):
1. DFS with discovery/low-link tracking
2. Identify SCCs with size &gt; 1 as cycles
3. Report cycle path for human debugging
</code></pre>
<h3 id="test-harness">Test Harness</h3>
<p>ACFS includes a comprehensive test harness (<code>tests/vm/lib/test_harness.sh</code>) for integration testing:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Source the harness</span>
<span class="hljs-built_in">source</span> tests/vm/lib/test_harness.sh

<span class="hljs-comment"># Initialize test suite</span>
harness_init <span class="hljs-string">&quot;ACFS Installation Tests&quot;</span>

<span class="hljs-comment"># Create test sections</span>
harness_section <span class="hljs-string">&quot;Phase 1: Base Packages&quot;</span>

<span class="hljs-comment"># Run commands with automatic logging</span>
harness_run <span class="hljs-string">&quot;Installing curl&quot;</span> apt install -y curl

<span class="hljs-comment"># Assert results</span>
harness_pass <span class="hljs-string">&quot;curl installed successfully&quot;</span>
harness_fail <span class="hljs-string">&quot;curl installation failed&quot;</span>
harness_skip <span class="hljs-string">&quot;Skipping optional test&quot;</span>

<span class="hljs-comment"># Generate summary</span>
harness_summary  <span class="hljs-comment"># Outputs: 15 passed, 0 failed, 2 skipped</span>
</code></pre>
<p><strong>Test Files:</strong></p>
<table>
<thead>
<tr>
<th>Test</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>test_install_ubuntu.sh</code></td>
<td>Full Docker-based installation</td>
</tr>
<tr>
<td><code>test_acfs_update.sh</code></td>
<td>Update mechanism validation</td>
</tr>
<tr>
<td><code>bootstrap_offline_checks.sh</code></td>
<td>Offline system readiness</td>
</tr>
<tr>
<td><code>resume_checks.sh</code></td>
<td>State resume validation</td>
</tr>
<tr>
<td><code>selection_checks.sh</code></td>
<td>Module selection unit tests</td>
</tr>
<tr>
<td><code>selection_e2e.sh</code></td>
<td>End-to-end selection flow</td>
</tr>
</tbody>
</table>
<p><strong>Running Tests:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Full Docker integration test</span>
./tests/vm/test_install_ubuntu.sh

<span class="hljs-comment"># Selection logic tests</span>
./tests/vm/selection_checks.sh

<span class="hljs-comment"># Web E2E tests</span>
./tests/web/run_e2e.sh
</code></pre>
<h3 id="sync-scripts">Sync Scripts</h3>
<p>Sync scripts keep ACFS documentation aligned with upstream projects:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Sync NTM command palette from upstream</span>
./scripts/sync/sync_ntm_palette.sh

<span class="hljs-comment"># Check if update available (without downloading)</span>
./scripts/sync/sync_ntm_palette.sh --check
</code></pre>
<p><strong>Current Sync Sources:</strong></p>
<table>
<thead>
<tr>
<th>Script</th>
<th>Source</th>
<th>Destination</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sync_ntm_palette.sh</code></td>
<td>NTM repo <code>command_palette.md</code></td>
<td><code>acfs/onboard/docs/ntm/</code></td>
</tr>
</tbody>
</table>
<p>All sync scripts use the security library for HTTPS enforcement and content hashing.</p>
<h3 id="website-design-system">Website Design System</h3>
<p>The website uses a comprehensive design system (<code>apps/web/lib/design-tokens.ts</code>):</p>
<p><strong>Color Tokens (OKLCH Color Space):</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// Perceptually uniform colors</span>
<span class="hljs-attr">colors</span>: {
  <span class="hljs-attr">cyan</span>:    <span class="hljs-string">&quot;oklch(0.75 0.18 195)&quot;</span>,   <span class="hljs-comment">// Primary accent</span>
  <span class="hljs-attr">pink</span>:    <span class="hljs-string">&quot;oklch(0.7 0.2 330)&quot;</span>,     <span class="hljs-comment">// Secondary accent</span>
  <span class="hljs-attr">purple</span>:  <span class="hljs-string">&quot;oklch(0.65 0.18 290)&quot;</span>,   <span class="hljs-comment">// Tertiary</span>
  <span class="hljs-attr">success</span>: <span class="hljs-string">&quot;oklch(0.72 0.19 145)&quot;</span>,   <span class="hljs-comment">// Green</span>
  <span class="hljs-attr">warning</span>: <span class="hljs-string">&quot;oklch(0.78 0.16 75)&quot;</span>,    <span class="hljs-comment">// Yellow</span>
  <span class="hljs-attr">error</span>:   <span class="hljs-string">&quot;oklch(0.65 0.22 25)&quot;</span>,    <span class="hljs-comment">// Red</span>
}
</code></pre>
<p><strong>Shadow Tokens:</strong></p>
<pre><code class="language-typescript"><span class="hljs-attr">shadows</span>: {
  <span class="hljs-attr">cardHover</span>: <span class="hljs-string">&quot;0 20px 40px -12px oklch(0.75 0.18 195 / 0.15)&quot;</span>,
  <span class="hljs-attr">cardLifted</span>: <span class="hljs-string">&quot;0 25px 50px -12px oklch(0.75 0.18 195 / 0.2)&quot;</span>,
  <span class="hljs-attr">primaryGlow</span>: <span class="hljs-string">&quot;0 0 40px -8px oklch(0.75 0.18 195 / 0.3)&quot;</span>,
}
</code></pre>
<p><strong>Animation Presets:</strong></p>
<pre><code class="language-typescript"><span class="hljs-attr">animations</span>: {
  <span class="hljs-attr">hover</span>: { <span class="hljs-attr">scale</span>: <span class="hljs-number">1.02</span>, <span class="hljs-attr">transition</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0.2</span> } },
  <span class="hljs-attr">tap</span>: { <span class="hljs-attr">scale</span>: <span class="hljs-number">0.98</span> },
  <span class="hljs-attr">fadeIn</span>: { <span class="hljs-attr">opacity</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], <span class="hljs-attr">transition</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0.3</span> } },
}
</code></pre>
<p><strong>Accessibility:</strong></p>
<ul>
<li>Reduced motion support via <code>useReducedMotion</code> hook</li>
<li>Semantic HTML structure</li>
<li>ARIA labels on interactive elements</li>
<li>Keyboard navigation support</li>
</ul>
<h3 id="requirements-1">Requirements</h3>
<ul>
<li><strong>Runtime:</strong> Bun (not npm/yarn/pnpm)</li>
<li><strong>Node:</strong> Latest</li>
<li><strong>Shell:</strong> Bash 5+</li>
</ul>
<hr>
<h2 id="faq">FAQ</h2>
<h3 id="why-vibe-mode">Why &quot;Vibe Mode&quot;?</h3>
<p>Vibe mode is designed for <strong>throwaway VPS environments</strong> where velocity matters more than safety:</p>
<ul>
<li>Passwordless sudo eliminates friction</li>
<li>Agent dangerous flags skip confirmation dialogs</li>
<li>Pre-configured aliases for maximum speed</li>
</ul>
<p><strong>Never use vibe mode on production or shared systems.</strong></p>
<h3 id="can-i-use-this-on-my-local-machine">Can I use this on my local machine?</h3>
<p>ACFS is designed for fresh Ubuntu VPS instances. While you <em>could</em> run it locally:</p>
<ul>
<li>It may conflict with existing configurations</li>
<li>It assumes root/sudo access</li>
<li>It's not designed for macOS or Windows</li>
</ul>
<p>For local development, use the individual tools directly.</p>
<h3 id="what-if-the-installer-fails">What if the installer fails?</h3>
<p>The installer is <strong>checkpointed</strong>. Simply re-run it:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh?<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<p>It will skip already-completed phases and resume where it left off.</p>
<h3 id="how-do-i-update-tools">How do I update tools?</h3>
<p>Use the built-in update command:</p>
<pre><code class="language-bash">acfs update                  <span class="hljs-comment"># Update all standard components</span>
acfs update --stack          <span class="hljs-comment"># Include Dicklesworthstone stack</span>
acfs update --agents-only    <span class="hljs-comment"># Just update AI agents</span>
</code></pre>
<h3 id="how-do-i-uninstall">How do I uninstall?</h3>
<p>There's no uninstall script. To reset:</p>
<ol>
<li>Delete the VPS instance</li>
<li>Create a new one</li>
<li>Run the installer fresh</li>
</ol>
<p>This is intentionalâ€”ACFS is designed for ephemeral VPS environments.</p>
<h3 id="can-i-customize-which-tools-are-installed">Can I customize which tools are installed?</h3>
<p>Currently, ACFS installs the full suite. Future versions will support:</p>
<ul>
<li>Manifest-based tool selection</li>
<li>Interactive mode for choosing components</li>
<li>Modular installation scripts</li>
</ul>
<hr>
<h2 id="why-acfs-exists">Why ACFS Exists</h2>
<h3 id="the-problem-the-agentic-coding-barrier">The Problem: The Agentic Coding Barrier</h3>
<p>The rise of AI coding agents (Claude Code, Codex CLI, Gemini CLI) has created a new paradigm in software development. These agents can write code, debug issues, and even architect solutionsâ€”but only if they have the right environment.</p>
<p><strong>The barrier isn't the agents themselves.</strong> It's the <strong>hours of setup</strong> required to create an environment where agents can actually be productive:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIME INVESTMENT WITHOUT ACFS                                               â”‚
â”‚                                                                              â”‚
â”‚  VPS Setup ..................... 30-60 min                                   â”‚
â”‚  Shell Configuration ........... 20-30 min                                   â”‚
â”‚  Language Runtimes ............. 30-45 min                                   â”‚
â”‚  Dev Tools ..................... 20-30 min                                   â”‚
â”‚  Agent Installation ............ 15-30 min                                   â”‚
â”‚  Agent Configuration ........... 20-40 min                                   â”‚
â”‚  Coordination Tools ............ 30-60 min                                   â”‚
â”‚  Troubleshooting ............... 30-120 min                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚  TOTAL: 3-7 hours (and that's if everything works)                          â”‚
â”‚                                                                              â”‚
â”‚  TIME INVESTMENT WITH ACFS                                                   â”‚
â”‚                                                                              â”‚
â”‚  Run one command ............... 25-30 min                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚  TOTAL: 30 minutes                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ACFS eliminates this barrier entirely.</strong> One command, 30 minutes, fully configured.</p>
<h3 id="the-deeper-problem-beginners-cant-start">The Deeper Problem: Beginners Can't Start</h3>
<p>For experienced developers, the setup is tedious but doable. For beginnersâ€”the people who would benefit <em>most</em> from AI coding assistanceâ€”it's an insurmountable wall:</p>
<ul>
<li>What's SSH? How do I generate keys?</li>
<li>What's a VPS? How do I rent one?</li>
<li>What's a terminal? Which one should I use?</li>
<li>How do I connect to a remote server?</li>
<li>What are all these tools and why do I need them?</li>
</ul>
<p>The <a href="https://agent-flywheel.com">wizard website at agent-flywheel.com</a> solves this by providing:</p>
<ol>
<li><strong>Absolute beginner guidance</strong> â€” Explains every concept in plain English</li>
<li><strong>OS-specific instructions</strong> â€” Detects Mac vs Windows, shows the right commands</li>
<li><strong>Visual confirmations</strong> â€” Checkboxes for each step, copy buttons for commands</li>
<li><strong>Troubleshooting help</strong> â€” Expandable sections for common problems</li>
<li><strong>Progress persistence</strong> â€” Resume where you left off across browser sessions</li>
</ol>
<hr>
<h2 id="the-10x-multiplier-effect">The 10x Multiplier Effect</h2>
<p>ACFS isn't just a collection of toolsâ€”it's a <strong>carefully curated system</strong> where each component amplifies the others. The value isn't additive; it's multiplicative.</p>
<h3 id="tool-synergy-model">Tool Synergy Model</h3>
<pre><code>                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   PRODUCTIVITY  â”‚
                              â”‚   MULTIPLIER    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                             â”‚                             â”‚
         â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ENVIRONMENT    â”‚         â”‚    AGENTS       â”‚         â”‚  COORDINATION   â”‚
â”‚  LAYER          â”‚         â”‚    LAYER        â”‚         â”‚  LAYER          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ zsh + p10k    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ Claude Code   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ Agent Mail    â”‚
â”‚ â€¢ tmux          â”‚         â”‚ â€¢ Codex CLI     â”‚         â”‚ â€¢ NTM           â”‚
â”‚ â€¢ Modern CLI    â”‚         â”‚ â€¢ Gemini CLI    â”‚         â”‚ â€¢ SLB + DCG     â”‚
â”‚ â€¢ Language VMs  â”‚         â”‚                 â”‚         â”‚ â€¢ Beads Viewer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                             â”‚                             â”‚
         â”‚    Each layer enables       â”‚    Agents become more      â”‚
         â”‚    the next layer           â”‚    powerful together       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="why-these-specific-tools">Why These Specific Tools?</h3>
<p>Every tool in ACFS earns its place through <strong>concrete productivity gains</strong>:</p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Individual Value</th>
<th>Synergy Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>tmux</strong></td>
<td>Persistent sessions</td>
<td>Agents can work while you're disconnected</td>
</tr>
<tr>
<td><strong>NTM</strong></td>
<td>Organized sessions</td>
<td>One command spawns 10 agents in named windows</td>
</tr>
<tr>
<td><strong>Agent Mail</strong></td>
<td>Message passing</td>
<td>Agents coordinate without conflicts</td>
</tr>
<tr>
<td><strong>SLB</strong></td>
<td>Two-person rule</td>
<td>Dangerous operations require confirmation</td>
</tr>
<tr>
<td><strong>DCG</strong></td>
<td>Command guardrails</td>
<td>Blocks destructive commands before execution</td>
</tr>
<tr>
<td><strong>Beads Viewer</strong></td>
<td>Task tracking</td>
<td>Agents can see project state, avoid rework</td>
</tr>
<tr>
<td><strong>atuin</strong></td>
<td>Shell history</td>
<td>Search commands across sessions, share patterns</td>
</tr>
<tr>
<td><strong>zoxide</strong></td>
<td>Smart cd</td>
<td><code>z proj</code> beats <code>cd ~/projects/my-long-name</code></td>
</tr>
<tr>
<td><strong>ripgrep</strong></td>
<td>Fast search</td>
<td>Agents find code 100x faster than grep</td>
</tr>
<tr>
<td><strong>fzf</strong></td>
<td>Fuzzy finding</td>
<td>Interactive selection instead of typing paths</td>
</tr>
</tbody>
</table>
<h3 id="the-compounding-effect">The Compounding Effect</h3>
<p>A single agent with basic tooling is useful. Three agents with:</p>
<ul>
<li>A shared project structure</li>
<li>Coordination via Agent Mail</li>
<li>Orchestration via NTM</li>
<li>Safety guardrails via SLB</li>
<li>DCG guard hook (blocks destructive commands before execution)</li>
<li>Task visibility via Beads</li>
</ul>
<p>...can accomplish in one day what would take a solo developer a week.</p>
<p>Tip: run <code>acfs services-setup</code> to configure logins, and enable DCG for destructive-command protection.</p>
<p><strong>This is the flywheel effect in action.</strong> Better tools â†’ more capable agents â†’ more code shipped â†’ better understanding of what tools are needed â†’ better tools.</p>
<hr>
<h2 id="design-algorithms--decisions">Design Algorithms &amp; Decisions</h2>
<p>ACFS implements several algorithmic patterns that ensure reliability and maintainability.</p>
<h3 id="idempotency-algorithm">Idempotency Algorithm</h3>
<p>Every installation function follows the <strong>check-before-install</strong> pattern:</p>
<pre><code class="language-bash"><span class="hljs-function"><span class="hljs-title">install_tool</span></span>() {
    <span class="hljs-keyword">if</span> command_exists <span class="hljs-string">&quot;tool&quot;</span>; <span class="hljs-keyword">then</span>
        log_success <span class="hljs-string">&quot;tool already installed&quot;</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># ... installation logic ...</span>

    <span class="hljs-keyword">if</span> command_exists <span class="hljs-string">&quot;tool&quot;</span>; <span class="hljs-keyword">then</span>
        log_success <span class="hljs-string">&quot;tool installed successfully&quot;</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        log_error <span class="hljs-string">&quot;tool installation failed&quot;</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}
</code></pre>
<p>This guarantees:</p>
<ol>
<li><strong>Safe re-runs</strong> â€” Running the installer twice doesn't break anything</li>
<li><strong>Resume capability</strong> â€” Failures don't require starting over</li>
<li><strong>Declarative intent</strong> â€” The end state is defined, not the transition</li>
</ol>
<h3 id="checksum-verification-algorithm">Checksum Verification Algorithm</h3>
<p>The security system uses <strong>content-addressable verification</strong>:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VERIFICATION FLOW                                                       â”‚
â”‚                                                                          â”‚
â”‚  1. Download script to memory (not disk)                                 â”‚
â”‚  2. Calculate SHA256 of downloaded content                               â”‚
â”‚  3. Compare against stored hash in checksums.yaml                        â”‚
â”‚  4. If match â†’ execute                                                   â”‚
â”‚  5. If mismatch â†’ refuse execution, report discrepancy                   â”‚
â”‚                                                                          â”‚
â”‚  Key insight: We verify CONTENT, not just transport                      â”‚
â”‚  (HTTPS only protects the channel, not the content at source)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="manifest-driven-generation">Manifest-Driven Generation</h3>
<p>The generator uses a <strong>template expansion</strong> pattern:</p>
<ol>
<li><strong>Parse</strong> â€” Read YAML manifest, validate with Zod schemas</li>
<li><strong>Transform</strong> â€” Convert manifest entries to installation functions</li>
<li><strong>Group</strong> â€” Organize by category (base, shell, cli, lang, agents, etc.)</li>
<li><strong>Generate</strong> â€” Emit Bash scripts with consistent structure</li>
<li><strong>Verify</strong> â€” Generate doctor checks from verification commands</li>
</ol>
<p>This ensures the manifest is the <strong>single source of truth</strong>â€”no drift between documentation, installer, and verification.</p>
<h3 id="code-generator-architecture">Code Generator Architecture</h3>
<p>The manifest generator (<code>packages/manifest/src/generate.ts</code>) is a sophisticated TypeScript program that transforms YAML into bash:</p>
<p><strong>Input Processing:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// 1. Parse YAML with validation</span>
<span class="hljs-keyword">const</span> manifest = <span class="hljs-title function_">parseManifestFile</span>(<span class="hljs-variable constant_">MANIFEST_PATH</span>);  <span class="hljs-comment">// Zod-validated</span>

<span class="hljs-comment">// 2. Load checksums for verified installers</span>
<span class="hljs-keyword">const</span> checksums = <span class="hljs-title function_">parseYaml</span>(<span class="hljs-title function_">readFileSync</span>(<span class="hljs-variable constant_">CHECKSUMS_PATH</span>));

<span class="hljs-comment">// 3. Topological sort for dependency order</span>
<span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">sortModulesByInstallOrder</span>(manifest.<span class="hljs-property">modules</span>);
</code></pre>
<p><strong>Security-First Code Generation:</strong></p>
<pre><code class="language-typescript"><span class="hljs-comment">// Shell-safe quoting (prevents command injection)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">shellQuote</span>(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`&#x27;<span class="hljs-subst">${s.replace(/<span class="hljs-string">&#x27;/g, &quot;&#x27;</span>\\<span class="hljs-string">&#x27;&#x27;</span><span class="hljs-string">&quot;)}&#x27;`;
}

// Allowlisted runners only (belt-and-suspenders)
const ALLOWED_RUNNERS = [&#x27;bash&#x27;, &#x27;sh&#x27;] as const;

// Verified installer pipe construction
function buildVerifiedInstallerPipe(module: Module, checksums: Checksums): string {
  // Generates: curl -fsSL &quot;</span>$URL<span class="hljs-string">&quot; | verify_checksum &quot;</span>$SHA256<span class="hljs-string">&quot; | bash
}
</span></span></span></code></pre>
<p><strong>Output Structure:</strong></p>
<pre><code>scripts/generated/
â”œâ”€â”€ install_base.sh        # Base system packages (apt)
â”œâ”€â”€ install_users.sh       # User normalization (ubuntu user)
â”œâ”€â”€ install_filesystem.sh  # Directory structure (/data/projects)
â”œâ”€â”€ install_shell.sh       # zsh + oh-my-zsh + p10k
â”œâ”€â”€ install_cli.sh         # ripgrep, tmux, fzf, lazygit, etc.
â”œâ”€â”€ install_network.sh     # Tailscale
â”œâ”€â”€ install_lang.sh        # bun, uv, rust, go
â”œâ”€â”€ install_tools.sh       # ast-grep, atuin, zoxide
â”œâ”€â”€ install_agents.sh      # claude, codex, gemini
â”œâ”€â”€ install_db.sh          # PostgreSQL 18, Vault
â”œâ”€â”€ install_cloud.sh       # wrangler, supabase, vercel
â”œâ”€â”€ install_stack.sh       # Dicklesworthstone 10-tool stack + utilities
â”œâ”€â”€ install_acfs.sh        # ACFS config deployment
â”œâ”€â”€ install_all.sh         # Orchestration helper
â”œâ”€â”€ doctor_checks.sh       # Health verification
â””â”€â”€ manifest_index.sh      # Module metadata arrays
</code></pre>
<p><strong>Generated Script Structure:</strong></p>
<pre><code class="language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-comment"># AUTO-GENERATED FROM acfs.manifest.yaml - DO NOT EDIT</span>

<span class="hljs-function"><span class="hljs-title">install_module_id</span></span>() {
    acfs_require_contract <span class="hljs-string">&quot;module.id&quot;</span>  <span class="hljs-comment"># Validate environment</span>

    <span class="hljs-keyword">if</span> run_installed_check <span class="hljs-string">&quot;module.id&quot;</span>; <span class="hljs-keyword">then</span>
        log_step <span class="hljs-string">&quot;module.id already installed&quot;</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">fi</span>

    set_phase <span class="hljs-string">&quot;Installing module...&quot;</span>
    run_as_target_shell &lt;&lt;<span class="hljs-string">&#x27;HEREDOC&#x27;</span>
        <span class="hljs-comment"># Installation commands from manifest</span>
    HEREDOC

    verify_module <span class="hljs-string">&quot;module.id&quot;</span>  <span class="hljs-comment"># Post-install checks</span>
}
</code></pre>
<p><strong>Regeneration:</strong></p>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> packages/manifest
bun run generate           <span class="hljs-comment"># Full regeneration</span>
bun run generate:dry       <span class="hljs-comment"># Preview without writing</span>
</code></pre>
<h3 id="generated-manifest-index">Generated Manifest Index</h3>
<p>The generator produces <code>manifest_index.sh</code>, a comprehensive bash metadata file that provides programmatic access to manifest data at runtime:</p>
<p><strong>Associative Arrays:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Module metadata lookup</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_DESCRIPTION
ACFS_MODULE_DESCRIPTION[<span class="hljs-string">&quot;lang.bun&quot;</span>]=<span class="hljs-string">&quot;Bun JavaScript/TypeScript runtime...&quot;</span>
ACFS_MODULE_DESCRIPTION[<span class="hljs-string">&quot;agents.claude&quot;</span>]=<span class="hljs-string">&quot;Claude Code CLI agent...&quot;</span>

<span class="hljs-comment"># Phase mapping (determines install order)</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_PHASE
ACFS_MODULE_PHASE[<span class="hljs-string">&quot;base.apt&quot;</span>]=<span class="hljs-string">&quot;1&quot;</span>
ACFS_MODULE_PHASE[<span class="hljs-string">&quot;lang.bun&quot;</span>]=<span class="hljs-string">&quot;3&quot;</span>
ACFS_MODULE_PHASE[<span class="hljs-string">&quot;agents.claude&quot;</span>]=<span class="hljs-string">&quot;5&quot;</span>

<span class="hljs-comment"># Dependency relationships (space-separated)</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_DEPENDENCIES
ACFS_MODULE_DEPENDENCIES[<span class="hljs-string">&quot;agents.claude&quot;</span>]=<span class="hljs-string">&quot;lang.bun base.system&quot;</span>

<span class="hljs-comment"># Generated function name mapping</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_FUNCTION
ACFS_MODULE_FUNCTION[<span class="hljs-string">&quot;lang.bun&quot;</span>]=<span class="hljs-string">&quot;install_lang_bun&quot;</span>

<span class="hljs-comment"># Category grouping</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_CATEGORY
ACFS_MODULE_CATEGORY[<span class="hljs-string">&quot;lang.bun&quot;</span>]=<span class="hljs-string">&quot;lang&quot;</span>

<span class="hljs-comment"># Default inclusion in install</span>
<span class="hljs-built_in">declare</span> -A ACFS_MODULE_DEFAULT
ACFS_MODULE_DEFAULT[<span class="hljs-string">&quot;lang.bun&quot;</span>]=<span class="hljs-string">&quot;true&quot;</span>
ACFS_MODULE_DEFAULT[<span class="hljs-string">&quot;db.postgres18&quot;</span>]=<span class="hljs-string">&quot;true&quot;</span>
</code></pre>
<p><strong>Runtime Query Functions:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Get all modules in a category</span>
get_modules_by_category <span class="hljs-string">&quot;agents&quot;</span>  <span class="hljs-comment"># Returns: agents.claude agents.codex agents.gemini</span>

<span class="hljs-comment"># Check if module is default-installed</span>
is_default_module <span class="hljs-string">&quot;tools.vault&quot;</span>   <span class="hljs-comment"># Returns: true</span>

<span class="hljs-comment"># Get installation phase</span>
get_module_phase <span class="hljs-string">&quot;stack.ntm&quot;</span>      <span class="hljs-comment"># Returns: 6</span>
</code></pre>
<p><strong>Use Cases:</strong></p>
<ul>
<li><code>acfs doctor</code> queries module metadata for health checks</li>
<li><code>install.sh --list-modules</code> displays available modules</li>
<li><code>--skip &lt;module&gt;</code> validates module existence before skipping</li>
<li><code>--only-phase &lt;n&gt;</code> uses phase mapping for selective installs</li>
</ul>
<p>The manifest index bridges the TypeScript generator with bash runtime, enabling sophisticated module selection logic while keeping the bash scripts simple.</p>
<h3 id="progressive-disclosure-in-the-wizard">Progressive Disclosure in the Wizard</h3>
<p>The wizard website implements <strong>progressive disclosure</strong> for complexity management:</p>
<pre><code>Level 1: Core instructions (visible by default)
â”œâ”€â”€ Copy this command
â”œâ”€â”€ Paste in terminal
â””â”€â”€ Press Enter

Level 2: Troubleshooting (expandable)
â”œâ”€â”€ &quot;Permission denied&quot; â†’ fix instructions
â”œâ”€â”€ &quot;Command not found&quot; â†’ prerequisites
â””â”€â”€ &quot;Connection refused&quot; â†’ diagnostics

Level 3: Deep explanations (collapsible &quot;Beginner Guide&quot;)
â”œâ”€â”€ What is SSH?
â”œâ”€â”€ What is a VPS?
â”œâ”€â”€ Why these specific steps?
â””â”€â”€ What happens under the hood?
</code></pre>
<p>This allows beginners to get deep context when needed, while experts can skip straight to the commands.</p>
<hr>
<h2 id="multi-agent-orchestration-model">Multi-Agent Orchestration Model</h2>
<p>ACFS is designed for <strong>multi-agent workflows</strong> where several AI coding agents work on the same project simultaneously.</p>
<h3 id="the-coordination-problem">The Coordination Problem</h3>
<p>Without coordination, multiple agents cause chaos:</p>
<ul>
<li><strong>File conflicts</strong> â€” Two agents edit the same file</li>
<li><strong>Duplicated work</strong> â€” Agents solve the same problem independently</li>
<li><strong>Communication gaps</strong> â€” No visibility into what others are doing</li>
<li><strong>Safety risks</strong> â€” Dangerous operations without oversight</li>
</ul>
<h3 id="the-acfs-solution-stack">The ACFS Solution Stack</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AGENT COORDINATION LAYER                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Agent Mail  â”‚  â”‚    NTM      â”‚  â”‚  SLB + DCG  â”‚  â”‚   Beads     â”‚       â”‚
â”‚  â”‚ (Messaging) â”‚  â”‚ (Sessions)  â”‚  â”‚ (Safety)    â”‚  â”‚ (Tasks)     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                â”‚                â”‚                â”‚               â”‚
â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚   â”‚                                                              â”‚
â”‚         â–¼   â–¼                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      FILE RESERVATION SYSTEM                          â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Agent A reserves: src/auth/**                                         â”‚ â”‚
â”‚  â”‚  Agent B reserves: src/api/**                                          â”‚ â”‚
â”‚  â”‚  Agent C reserves: tests/**                                            â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â†’ No conflicts, parallel progress                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="agent-communication-patterns">Agent Communication Patterns</h3>
<p><strong>1. Direct Messaging (Agent Mail)</strong></p>
<pre><code>Agent A â†’ Agent B: &quot;I finished the auth module, ready for API integration&quot;
Agent B â†’ Agent A: &quot;ACK, starting API integration with auth dependency&quot;
</code></pre>
<p><strong>2. Broadcast Updates (Thread Summaries)</strong></p>
<pre><code>Thread: &quot;Sprint 23 Tasks&quot;
â”œâ”€â”€ Agent A: &quot;Claimed user-registration feature&quot;
â”œâ”€â”€ Agent B: &quot;Claimed api-endpoints feature&quot;
â”œâ”€â”€ Agent C: &quot;Claimed test-coverage task&quot;
â””â”€â”€ All agents see project state
</code></pre>
<p><strong>3. File Reservations (Conflict Prevention)</strong></p>
<pre><code>Agent A: reserve_paths([&quot;src/auth/*&quot;], exclusive=true, ttl=3600)
Agent B: reserve_paths([&quot;src/auth/*&quot;]) â†’ CONFLICT: held by Agent A
Agent B: reserve_paths([&quot;src/api/*&quot;]) â†’ GRANTED
</code></pre>
<h3 id="the-ntm-orchestration-pattern">The NTM Orchestration Pattern</h3>
<p>Named Tmux Manager (NTM) enables the <strong>one-command swarm spawn</strong>:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Spawn 10 agents, each in a named tmux window</span>
ntm spawn \
  --count 10 \
  --prefix <span class="hljs-string">&quot;agent-&quot;</span> \
  --<span class="hljs-built_in">command</span> <span class="hljs-string">&quot;claude --dangerously-skip-permissions&quot;</span>
</code></pre>
<p>Result:</p>
<pre><code>tmux session: acfs-swarm
â”œâ”€â”€ agent-1: Claude working on auth
â”œâ”€â”€ agent-2: Claude working on api
â”œâ”€â”€ agent-3: Claude working on tests
â”œâ”€â”€ agent-4: Codex reviewing PRs
â”œâ”€â”€ agent-5: Gemini writing docs
â””â”€â”€ ...
</code></pre>
<hr>
<h2 id="philosophy">Philosophy</h2>
<h3 id="the-flywheel">The Flywheel</h3>
<p>The &quot;Agentic Coding Flywheel&quot; is a virtuous cycle:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚    Better Environment â†’ More Agent Productivity â†’               â”‚
â”‚    More Code Written â†’ Better Understanding â†’                   â”‚
â”‚    Better Prompts â†’ Better Environment                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ACFS kicks off this flywheel by providing the <strong>best possible starting environment</strong> for agentic coding.</p>
<h3 id="design-principles">Design Principles</h3>
<ol>
<li>
<p><strong>Beginner-Friendly, Expert-Fast:</strong> The wizard guides beginners; the one-liner serves experts.</p>
</li>
<li>
<p><strong>Vibe-First:</strong> Optimize for velocity in throwaway environments. Safety features exist in safe mode.</p>
</li>
<li>
<p><strong>Idempotent:</strong> Re-run without fear. The installer handles already-installed tools gracefully.</p>
</li>
<li>
<p><strong>Single Source of Truth:</strong> The manifest defines everything. Installer scripts are generated from it.</p>
</li>
<li>
<p><strong>Security by Default:</strong> HTTPS enforcement, checksum verification, no blind <code>curl | bash</code>.</p>
</li>
<li>
<p><strong>Modern Defaults:</strong> Latest versions, modern tools, optimal configurations out of the box.</p>
</li>
</ol>
<hr>
<h2 id="the-vibe-coding-manifesto">The Vibe Coding Manifesto</h2>
<p>&quot;Vibe coding&quot; isn't just a catchy nameâ€”it's a philosophy about how humans and AI should collaborate on software development.</p>
<h3 id="what-is-vibe-coding">What Is Vibe Coding?</h3>
<p>Vibe coding is the practice of <strong>directing AI agents to write code while you focus on intent, architecture, and quality</strong>. Instead of typing every line yourself, you:</p>
<ol>
<li><strong>Describe what you want</strong> in natural language</li>
<li><strong>Review and guide</strong> the agent's output</li>
<li><strong>Iterate rapidly</strong> through multiple approaches</li>
<li><strong>Ship faster</strong> while maintaining quality</li>
</ol>
<p>The &quot;vibe&quot; comes from the flow state you enter when you're no longer fighting syntax, boilerplate, or implementation detailsâ€”you're just vibing with your AI partner.</p>
<h3 id="the-three-laws-of-vibe-coding">The Three Laws of Vibe Coding</h3>
<p><strong>1. Velocity Over Ceremony</strong></p>
<p>Traditional development is ceremony-heavy: create branch, write tests first, implement, refactor, write docs, create PR, wait for review, merge, deploy. Each step has friction.</p>
<p>Vibe coding inverts this: ship fast, iterate faster. The AI handles boilerplate while you focus on the 10% that requires human judgment.</p>
<pre><code>Traditional: Think â†’ Plan â†’ Implement â†’ Test â†’ Document â†’ Ship
Vibe:        Describe â†’ Generate â†’ Verify â†’ Ship â†’ Iterate
</code></pre>
<p><strong>2. Throwaway Environments Enable Boldness</strong></p>
<p>The magic of vibe coding happens on <strong>ephemeral VPS instances</strong>. When your environment is disposable:</p>
<ul>
<li>You can experiment without fear</li>
<li>Catastrophic failures are just &quot;rebuild the VPS&quot;</li>
<li>Agents can have dangerous permissions (they can't break what's disposable)</li>
<li>You focus on output, not on protecting your setup</li>
</ul>
<p>This is why ACFS's &quot;vibe mode&quot; enables passwordless sudo and dangerous agent flagsâ€”on a $5/month throwaway VPS, there's nothing worth protecting.</p>
<p><strong>3. Multi-Agent Is The Default</strong></p>
<p>One agent is useful. Three agents working in parallel are transformative.</p>
<p>Vibe coding assumes you'll run multiple agents simultaneously:</p>
<ul>
<li>Claude for complex reasoning and architecture</li>
<li>Codex for rapid prototyping and refactoring</li>
<li>Gemini for documentation and research</li>
</ul>
<p>ACFS provides the coordination layer (Agent Mail, NTM, SLB) that makes this practical.</p>
<h3 id="the-anti-patterns">The Anti-Patterns</h3>
<p>Vibe coding is <strong>NOT</strong>:</p>
<ul>
<li>Blindly accepting agent output without review</li>
<li>Abandoning tests and quality standards</li>
<li>Ignoring security on production systems</li>
<li>Treating agents as replacements for understanding</li>
</ul>
<p>The goal is <strong>augmented human judgment</strong>, not abdicated human judgment.</p>
<h3 id="when-not-to-vibe-code">When NOT to Vibe Code</h3>
<ul>
<li>Production systems with real users</li>
<li>Security-critical infrastructure</li>
<li>Anything involving credentials or secrets</li>
<li>Long-running servers (use safe mode)</li>
<li>Shared team environments (use coordination tools)</li>
</ul>
<p>Vibe coding is for <strong>greenfield development, prototyping, experimentation, and learning</strong>. Use ACFS's safe mode for everything else.</p>
<hr>
<h2 id="state-machine--checkpoint-system">State Machine &amp; Checkpoint System</h2>
<p>ACFS implements a robust <strong>checkpoint-based state machine</strong> that enables reliable resume-from-failure. This section explains how it works under the hood.</p>
<h3 id="state-file-format">State File Format</h3>
<p>Progress is tracked in <code>~/.acfs/state.json</code>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;schema_version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;started_at&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-12-21T10:30:00Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;last_updated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-12-21T10:45:23Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;mode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vibe&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;completed_phases&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;user_setup&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;filesystem&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;shell_setup&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;current_phase&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cli_tools&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;current_step&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Installing ripgrep&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;failed_phase&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;failed_step&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;failed_error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;skipped_phases&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phase_timings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;user_setup&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;filesystem&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;shell_setup&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">145</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="phase-state-transitions">Phase State Transitions</h3>
<p>Each phase goes through a defined state machine:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE STATE MACHINE                                                         â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ PENDING  â”‚â”€â”€â”€â”€â–¶â”‚ RUNNING  â”‚â”€â”€â”€â”€â–¶â”‚ COMPLETE â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚       â”‚                â”‚                                                     â”‚
â”‚       â”‚                â–¼                                                     â”‚
â”‚       â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚       â”‚          â”‚  FAILED  â”‚â”€â”€â”€â”€â–¶â”‚  RETRY   â”‚â”€â”€â”                           â”‚
â”‚       â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                           â”‚
â”‚       â”‚                                â–²        â”‚                           â”‚
â”‚       â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚          (--skip flag)        â”‚ SKIPPED  â”‚                                  â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="resume-logic">Resume Logic</h3>
<p>When the installer runs, it follows this decision tree:</p>
<pre><code class="language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">should_run_phase</span>(<span class="hljs-params">phase_id</span>):
    state = load_state_file()

    <span class="hljs-keyword">if</span> phase_id <span class="hljs-keyword">in</span> state.completed_phases:
        <span class="hljs-keyword">return</span> SKIP  <span class="hljs-comment"># Already done</span>

    <span class="hljs-keyword">if</span> phase_id <span class="hljs-keyword">in</span> state.skipped_phases:
        <span class="hljs-keyword">return</span> SKIP  <span class="hljs-comment"># User explicitly skipped</span>

    <span class="hljs-keyword">if</span> state.failed_phase == phase_id:
        <span class="hljs-keyword">if</span> user_wants_retry():
            <span class="hljs-keyword">return</span> RUN  <span class="hljs-comment"># Retry failed phase</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> ABORT  <span class="hljs-comment"># Don&#x27;t continue past failure</span>

    <span class="hljs-keyword">return</span> RUN  <span class="hljs-comment"># Normal execution</span>
</code></pre>
<h3 id="atomic-state-updates">Atomic State Updates</h3>
<p>State file updates are <strong>atomic</strong> to prevent corruption from interrupted writes:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Write to temp file first</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$new_state</span>&quot;</span> &gt; <span class="hljs-string">&quot;<span class="hljs-variable">$state_file</span>.tmp.$$&quot;</span>

<span class="hljs-comment"># Atomic rename (POSIX guarantees this is atomic on same filesystem)</span>
<span class="hljs-built_in">mv</span> <span class="hljs-string">&quot;<span class="hljs-variable">$state_file</span>.tmp.$$&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$state_file</span>&quot;</span>
</code></pre>
<p>This ensures the state file is never partially written, even if the process is killed mid-update.</p>
<h3 id="recovery-from-common-failures">Recovery from Common Failures</h3>
<table>
<thead>
<tr>
<th>Failure Type</th>
<th>Detection</th>
<th>Recovery</th>
</tr>
</thead>
<tbody>
<tr>
<td>Network timeout</td>
<td>curl exit code 28</td>
<td>Retry with exponential backoff</td>
</tr>
<tr>
<td>APT lock held</td>
<td><code>/var/lib/dpkg/lock</code> exists</td>
<td>Wait and retry up to 60s</td>
</tr>
<tr>
<td>Disk full</td>
<td>df check before write</td>
<td>Abort with clear error</td>
</tr>
<tr>
<td>Out of memory</td>
<td>OOM killer</td>
<td>Resume picks up from last phase</td>
</tr>
<tr>
<td>SSH disconnect</td>
<td>N/A (session dies)</td>
<td>Resume on reconnect</td>
</tr>
<tr>
<td>Ctrl+C</td>
<td>Trap handler</td>
<td>Clean exit, state preserved</td>
</tr>
</tbody>
</table>
<h3 id="phase-timings--performance">Phase Timings &amp; Performance</h3>
<p>The state file tracks how long each phase takes. This enables:</p>
<ul>
<li>Accurate progress estimation (&quot;Phase 4/9, ~3 minutes remaining&quot;)</li>
<li>Performance regression detection across ACFS versions</li>
<li>Identifying slow phases that need optimization</li>
</ul>
<hr>
<h2 id="error-handling--recovery-patterns">Error Handling &amp; Recovery Patterns</h2>
<p>ACFS is designed to <strong>fail gracefully and recover automatically</strong>. This section documents the error handling patterns used throughout the codebase.</p>
<h3 id="the-try-step-pattern">The Try-Step Pattern</h3>
<p>Every installation step is wrapped in a <code>try_step</code> function that captures errors without aborting:</p>
<pre><code class="language-bash">try_step <span class="hljs-string">&quot;Installing ripgrep&quot;</span> install_ripgrep
</code></pre>
<p>This pattern provides:</p>
<ul>
<li><strong>Context tracking</strong>: Errors include step name, not just exit code</li>
<li><strong>Graceful continuation</strong>: Non-critical failures don't abort the whole install</li>
<li><strong>Structured reporting</strong>: Failures are collected and reported at the end</li>
</ul>
<h3 id="network-resilience">Network Resilience</h3>
<p>Network operations implement <strong>exponential backoff with jitter</strong>:</p>
<pre><code class="language-bash"><span class="hljs-function"><span class="hljs-title">retry_with_backoff</span></span>() {
    <span class="hljs-built_in">local</span> max_attempts=5
    <span class="hljs-built_in">local</span> delay=1

    <span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">seq</span> 1 <span class="hljs-variable">$max_attempts</span>); <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">return</span> 0
        <span class="hljs-keyword">fi</span>

        <span class="hljs-comment"># Exponential backoff: 1s, 2s, 4s, 8s, 16s</span>
        <span class="hljs-comment"># With jitter: Â±25% randomization</span>
        <span class="hljs-built_in">local</span> jitter=$(( (RANDOM % <span class="hljs-number">50</span> - <span class="hljs-number">25</span>) * delay / <span class="hljs-number">100</span> ))
        <span class="hljs-built_in">sleep</span> $((delay + jitter))
        delay=$((delay * <span class="hljs-number">2</span>))
    <span class="hljs-keyword">done</span>

    <span class="hljs-built_in">return</span> 1
}
</code></pre>
<h3 id="apt-lock-handling">APT Lock Handling</h3>
<p>The most common installation failure is APT lock contention (another process using apt):</p>
<pre><code class="language-bash"><span class="hljs-function"><span class="hljs-title">wait_for_apt_lock</span></span>() {
    <span class="hljs-built_in">local</span> max_wait=60
    <span class="hljs-built_in">local</span> waited=0

    <span class="hljs-keyword">while</span> fuser /var/lib/dpkg/lock-frontend &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$waited</span> -ge <span class="hljs-variable">$max_wait</span> ]]; <span class="hljs-keyword">then</span>
            log_error <span class="hljs-string">&quot;APT lock held for &gt;60s, aborting&quot;</span>
            <span class="hljs-built_in">return</span> 1
        <span class="hljs-keyword">fi</span>
        log_detail <span class="hljs-string">&quot;Waiting for apt lock... (<span class="hljs-variable">${waited}</span>s)&quot;</span>
        <span class="hljs-built_in">sleep</span> 5
        waited=$((waited + <span class="hljs-number">5</span>))
    <span class="hljs-keyword">done</span>

    <span class="hljs-built_in">return</span> 0
}
</code></pre>
<h3 id="graceful-degradation">Graceful Degradation</h3>
<p>When a non-critical tool fails to install, ACFS continues with a warning:</p>
<pre><code>Category: Critical    â†’ Failure aborts installation
          Standard    â†’ Failure logged, installation continues
          Optional    â†’ Failure noted, no warning

Examples:
  Critical: bun, zsh, git (can't proceed without these)
  Standard: ast-grep, lazygit (nice to have, not blocking)
  Optional: atuin, zoxide (pure enhancements)
</code></pre>
<h3 id="the-error-report">The Error Report</h3>
<p>At the end of installation (or on abort), ACFS generates a structured error report:</p>
<pre><code>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  INSTALLATION REPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Status: PARTIAL SUCCESS (8/9 phases completed)

  âœ“ Completed Phases:
    â€¢ User Setup (12s)
    â€¢ Filesystem (8s)
    â€¢ Shell Setup (2m 25s)
    â€¢ CLI Tools (4m 12s)
    â€¢ Languages (3m 45s)
    â€¢ Agents (1m 30s)
    â€¢ Cloud (2m 10s)
    â€¢ Stack (5m 20s)

  âœ— Failed Phase: Finalize
    Step: Configuring tmux
    Error: tmux.conf syntax error on line 42

  Suggested Fix:
    Check ~/.acfs/tmux/tmux.conf for syntax errors
    Then run: curl ... | bash -s -- --yes --mode vibe --resume

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<hr>
<h2 id="troubleshooting-guide">Troubleshooting Guide</h2>
<p>This section covers common issues and their solutions. For quick debugging, start with <code>acfs doctor</code>.</p>
<h3 id="installation-fails-immediately">Installation Fails Immediately</h3>
<p><strong>Symptom</strong>: Installer exits within seconds of starting.</p>
<p><strong>Common Causes &amp; Solutions</strong>:</p>
<table>
<thead>
<tr>
<th>Cause</th>
<th>Detection</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr>
<td>Not running as root</td>
<td>&quot;Permission denied&quot;</td>
<td><code>sudo bash</code> or use <code>sudo</code> in curl command</td>
</tr>
<tr>
<td>Not Ubuntu</td>
<td>&quot;Unsupported OS&quot;</td>
<td>ACFS only supports Ubuntu 22.04+</td>
</tr>
<tr>
<td>No internet</td>
<td>&quot;curl: (6) Could not resolve host&quot;</td>
<td>Check DNS, try <code>ping google.com</code></td>
</tr>
<tr>
<td>Old bash</td>
<td>Syntax errors</td>
<td>Upgrade to bash 4+</td>
</tr>
</tbody>
</table>
<h3 id="apt-lock-errors">APT Lock Errors</h3>
<p><strong>Symptom</strong>: <code>E: Could not get lock /var/lib/dpkg/lock-frontend</code></p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Wait for unattended-upgrades</strong> (most common on fresh VPS):</p>
<pre><code class="language-bash"><span class="hljs-comment"># Check what&#x27;s holding the lock</span>
sudo lsof /var/lib/dpkg/lock-frontend

<span class="hljs-comment"># Wait for it to finish (usually 2-3 minutes on fresh VPS)</span>
<span class="hljs-comment"># Then re-run installer</span>
</code></pre>
</li>
<li>
<p><strong>Kill stuck process</strong> (if waiting doesn't help):</p>
<pre><code class="language-bash">sudo killall apt apt-get dpkg
sudo dpkg --configure -a
sudo apt-get update
</code></pre>
</li>
</ol>
<h3 id="shell-not-changing-to-zsh">Shell Not Changing to zsh</h3>
<p><strong>Symptom</strong>: Still seeing bash prompt after install.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Log out and back in</strong> (the change happens at next login)</p>
</li>
<li>
<p><strong>Manually set shell</strong>:</p>
<pre><code class="language-bash">chsh -s $(<span class="hljs-built_in">which</span> zsh)
<span class="hljs-comment"># Then log out and back in</span>
</code></pre>
</li>
<li>
<p><strong>Check shell was installed</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">which</span> zsh  <span class="hljs-comment"># Should show /usr/bin/zsh</span>
<span class="hljs-built_in">cat</span> /etc/shells  <span class="hljs-comment"># zsh should be listed</span>
</code></pre>
</li>
</ol>
<h3 id="agent-authentication-issues">Agent Authentication Issues</h3>
<p><strong>Claude Code</strong>:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Check auth status</span>
claude --version
<span class="hljs-built_in">ls</span> -la ~/.claude/  <span class="hljs-comment"># or ~/.config/claude/</span>

<span class="hljs-comment"># Re-authenticate</span>
claude  <span class="hljs-comment"># Follow prompts</span>
</code></pre>
<p><strong>Codex CLI</strong>:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Check auth status</span>
codex --version

<span class="hljs-comment"># Re-authenticate (uses ChatGPT account, not API key)</span>
codex login
</code></pre>
<p><strong>Gemini CLI</strong>:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Check auth status</span>
gemini --version

<span class="hljs-comment"># Re-authenticate</span>
gemini  <span class="hljs-comment"># Follow Google login flow</span>
</code></pre>
<h3 id="command-not-found-after-install">&quot;Command Not Found&quot; After Install</h3>
<p><strong>Symptom</strong>: <code>claude: command not found</code> even though install succeeded.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Reload shell config</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">source</span> ~/.zshrc
<span class="hljs-comment"># Or start a new shell</span>
<span class="hljs-built_in">exec</span> zsh
</code></pre>
</li>
<li>
<p><strong>Check PATH</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27;:&#x27;</span> <span class="hljs-string">&#x27;\n&#x27;</span> | grep -E <span class="hljs-string">&quot;(bun|local|cargo)&quot;</span>
<span class="hljs-comment"># Should include: ~/.bun/bin, ~/.local/bin, ~/.cargo/bin</span>
</code></pre>
</li>
<li>
<p><strong>Manual path fix</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.bun/bin:<span class="hljs-variable">$HOME</span>/.local/bin:<span class="hljs-variable">$HOME</span>/.cargo/bin:<span class="hljs-variable">$PATH</span>&quot;</span>
</code></pre>
</li>
</ol>
<h3 id="tmux-configuration-errors">Tmux Configuration Errors</h3>
<p><strong>Symptom</strong>: Tmux won't start or shows config errors.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check syntax</strong>:</p>
<pre><code class="language-bash">tmux source-file ~/.tmux.conf
<span class="hljs-comment"># Will show line number of any errors</span>
</code></pre>
</li>
<li>
<p><strong>Reset to ACFS defaults</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">cp</span> ~/.acfs/tmux/tmux.conf ~/.tmux.conf
</code></pre>
</li>
<li>
<p><strong>Version mismatch</strong> (old tmux, new config):</p>
<pre><code class="language-bash">tmux -V  <span class="hljs-comment"># Check version</span>
<span class="hljs-comment"># ACFS config requires tmux 3.0+</span>
</code></pre>
</li>
</ol>
<h3 id="stack-tools-not-working">Stack Tools Not Working</h3>
<p><strong>Symptom</strong>: <code>ntm</code>, <code>slb</code>, <code>dcg</code>, etc. not found or erroring.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Reinstall stack</strong>:</p>
<pre><code class="language-bash">acfs update --stack --force
</code></pre>
</li>
<li>
<p><strong>Check cargo install worked</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">ls</span> ~/.cargo/bin/  <span class="hljs-comment"># Should contain ntm, slb, ru, etc.</span>
<span class="hljs-built_in">ls</span> ~/.local/bin/  <span class="hljs-comment"># dcg often installs here</span>
</code></pre>
</li>
<li>
<p><strong>Rust not in path</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">source</span> ~/.cargo/env
</code></pre>
</li>
</ol>
<h3 id="dcg-hook-issues">DCG Hook Issues</h3>
<p><strong>Symptom</strong>: DCG isn't blocking commands or Claude reports hook errors.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Run the built-in health check</strong>:</p>
<pre><code class="language-bash">dcg doctor
</code></pre>
</li>
<li>
<p><strong>Re-register the hook</strong>:</p>
<pre><code class="language-bash">dcg install --force
</code></pre>
</li>
<li>
<p><strong>Verify hook registration</strong>:</p>
<pre><code class="language-bash">grep -n dcg ~/.claude/settings.json ~/.config/claude/settings.json
</code></pre>
</li>
<li>
<p><strong>Reinstall if binary is missing</strong>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">which</span> dcg  <span class="hljs-comment"># Should return a path</span>
<span class="hljs-comment"># If missing, reinstall:</span>
curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/destructive_command_guard/main/install.sh&quot;</span> | bash
dcg install  <span class="hljs-comment"># Register hook after reinstall</span>
</code></pre>
</li>
</ol>
<h3 id="complete-reset">Complete Reset</h3>
<p>When all else fails, the nuclear option:</p>
<pre><code class="language-bash"><span class="hljs-comment"># Save any important files first!</span>

<span class="hljs-comment"># Backup ACFS state (recommended)</span>
ts=<span class="hljs-string">&quot;<span class="hljs-subst">$(date +%Y%m%d_%H%M%S)</span>&quot;</span>
[ -d ~/.acfs ] &amp;&amp; <span class="hljs-built_in">mv</span> ~/.acfs ~/.acfs.backup.<span class="hljs-string">&quot;<span class="hljs-variable">$ts</span>&quot;</span>

<span class="hljs-comment"># Backup installed configs (optional)</span>
<span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> ~/.zshrc ~/.tmux.conf ~/.p10k.zsh; <span class="hljs-keyword">do</span>
  [ -f <span class="hljs-string">&quot;<span class="hljs-variable">$f</span>&quot;</span> ] &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-string">&quot;<span class="hljs-variable">$f</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$f</span>&quot;</span>.backup.<span class="hljs-string">&quot;<span class="hljs-variable">$ts</span>&quot;</span>
<span class="hljs-keyword">done</span>

curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/main/install.sh?<span class="hljs-subst">$(date +%s)</span>&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe --force-reinstall
</code></pre>
<hr>
<h2 id="security-threat-model">Security Threat Model</h2>
<p>ACFS takes security seriously while acknowledging the inherent risks of <code>curl | bash</code> installation. This section documents our threat model and mitigations.</p>
<h3 id="what-we-protect-against">What We Protect Against</h3>
<table>
<thead>
<tr>
<th>Threat</th>
<th>Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Man-in-the-middle (MITM)</strong></td>
<td>HTTPS enforcement for all downloads</td>
</tr>
<tr>
<td><strong>Compromised upstream scripts</strong></td>
<td>SHA256 checksum verification</td>
</tr>
<tr>
<td><strong>Malicious package injection</strong></td>
<td>Official package sources only (apt, cargo, bun)</td>
</tr>
<tr>
<td><strong>Credential exposure</strong></td>
<td>No credentials stored in scripts or configs</td>
</tr>
<tr>
<td><strong>Privilege escalation</strong></td>
<td>Minimal sudo usage, explicit permission grants</td>
</tr>
<tr>
<td><strong>Persistent backdoors</strong></td>
<td>Ephemeral VPS model; start fresh if concerned</td>
</tr>
</tbody>
</table>
<h3 id="what-we-dont-protect-against">What We Don't Protect Against</h3>
<table>
<thead>
<tr>
<th>Threat</th>
<th>Why Not</th>
<th>Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Compromised GitHub</strong></td>
<td>Would require GitHub-level breach</td>
<td>Use release tags, verify commits</td>
</tr>
<tr>
<td><strong>Compromised upstream maintainers</strong></td>
<td>Can't verify humans</td>
<td>Trust + checksum verification</td>
</tr>
<tr>
<td><strong>Zero-day in installed tools</strong></td>
<td>Beyond our control</td>
<td>Keep tools updated, follow CVEs</td>
</tr>
<tr>
<td><strong>Physical VPS access</strong></td>
<td>Provider responsibility</td>
<td>Choose reputable providers</td>
</tr>
<tr>
<td><strong>Vibe mode abuse</strong></td>
<td>By design for throwaway VPS</td>
<td>Use safe mode on important systems</td>
</tr>
</tbody>
</table>
<h3 id="the-curl--bash-debate">The <code>curl | bash</code> Debate</h3>
<p>The <code>curl | bash</code> pattern is controversial. Critics argue:</p>
<ul>
<li>You're executing arbitrary code from the internet</li>
<li>The download could be swapped mid-stream</li>
<li>You can't audit before executing</li>
</ul>
<p>Our response:</p>
<ol>
<li><strong>HTTPS</strong> prevents mid-stream swapping</li>
<li><strong>Checksums</strong> verify content matches known-good versions</li>
<li><strong>Ephemeral environments</strong> limit blast radius</li>
<li><strong>Open source</strong> allows pre-audit of <a href="http://install.sh">install.sh</a></li>
</ol>
<p>For maximum security, you can:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;https://...&quot;</span> -o install.sh
less install.sh
bash install.sh --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<h3 id="checksum-verification-deep-dive">Checksum Verification Deep Dive</h3>
<p>Every upstream installer we fetch is verified against known-good checksums:</p>
<pre><code class="language-yaml"><span class="hljs-comment"># checksums.yaml excerpt</span>
<span class="hljs-attr">installers:</span>
  <span class="hljs-attr">bun:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">&quot;https://bun.sh/install&quot;</span>
    <span class="hljs-attr">sha256:</span> <span class="hljs-string">&quot;a1b2c3d4e5f6...&quot;</span>
    <span class="hljs-attr">last_verified:</span> <span class="hljs-string">&quot;2024-12-15&quot;</span>
    <span class="hljs-attr">notes:</span> <span class="hljs-string">&quot;Official Bun installer&quot;</span>
</code></pre>
<p>The verification process:</p>
<pre><code>1. Download script to memory (not disk)
2. Calculate SHA256 of downloaded bytes
3. Compare against stored checksum
4. If match: execute
5. If mismatch: abort with warning
</code></pre>
<p>A mismatch could mean:</p>
<ul>
<li>Upstream released a new version (common, usually safe)</li>
<li>Upstream was compromised (rare, investigate before updating)</li>
</ul>
<p>Our update process:</p>
<ol>
<li>Monitor upstream releases</li>
<li>Review changes in new installer versions</li>
<li>Update checksums only after manual review</li>
<li>Commit with descriptive message explaining what changed</li>
</ol>
<h3 id="vibe-mode-security-implications">Vibe Mode Security Implications</h3>
<p>Vibe mode (<code>--mode vibe</code>) enables:</p>
<ul>
<li>Passwordless sudo for ubuntu user</li>
<li><code>--dangerously-skip-permissions</code> for Claude</li>
<li><code>--dangerously-bypass-approvals-and-sandbox</code> for Codex</li>
<li><code>--yolo</code> for Gemini</li>
</ul>
<p>This is <strong>intentionally insecure for velocity</strong>. Use only on:</p>
<ul>
<li>Throwaway VPS you don't care about</li>
<li>Non-production environments</li>
<li>Personal experimentation</li>
</ul>
<p>Never on:</p>
<ul>
<li>Production servers</li>
<li>Shared team infrastructure</li>
<li>Systems with sensitive data</li>
<li>Long-running servers</li>
</ul>
<hr>
<h2 id="comparison-to-alternatives">Comparison to Alternatives</h2>
<p>How does ACFS compare to other ways of setting up a development environment?</p>
<h3 id="vs-manual-setup">vs. Manual Setup</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Manual</th>
<th>ACFS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time</td>
<td>3-7 hours</td>
<td>30 minutes</td>
</tr>
<tr>
<td>Consistency</td>
<td>Varies</td>
<td>Identical every time</td>
</tr>
<tr>
<td>Documentation</td>
<td>Your memory</td>
<td>This README</td>
</tr>
<tr>
<td>Resume on failure</td>
<td>Start over</td>
<td>Automatic</td>
</tr>
<tr>
<td>Updates</td>
<td>Manual each tool</td>
<td><code>acfs update</code></td>
</tr>
</tbody>
</table>
<p><strong>When to use manual</strong>: When you need to understand every detail, or have highly specific requirements.</p>
<h3 id="vs-dotfiles-repos">vs. Dotfiles Repos</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Dotfiles</th>
<th>ACFS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Scope</td>
<td>Configs only</td>
<td>Full tool installation</td>
</tr>
<tr>
<td>Portability</td>
<td>Mac/Linux</td>
<td>Ubuntu-focused</td>
</tr>
<tr>
<td>Maintenance</td>
<td>DIY</td>
<td>Maintained project</td>
</tr>
<tr>
<td>Agent focus</td>
<td>None</td>
<td>Core feature</td>
</tr>
</tbody>
</table>
<p><strong>When to use dotfiles</strong>: When you already have tools installed and just want configs.</p>
<h3 id="vs-nixnixos">vs. Nix/NixOS</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Nix</th>
<th>ACFS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Reproducibility</td>
<td>Perfect</td>
<td>Good</td>
</tr>
<tr>
<td>Learning curve</td>
<td>Steep</td>
<td>Gentle</td>
</tr>
<tr>
<td>Rollback</td>
<td>Native</td>
<td>Manual</td>
</tr>
<tr>
<td>Complexity</td>
<td>High</td>
<td>Low</td>
</tr>
<tr>
<td>Adoption</td>
<td>Growing</td>
<td>Easy</td>
</tr>
</tbody>
</table>
<p><strong>When to use Nix</strong>: When you need perfect reproducibility and are willing to invest in learning Nix.</p>
<h3 id="vs-devcontainers">vs. DevContainers</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>DevContainers</th>
<th>ACFS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Isolation</td>
<td>Container</td>
<td>Full VPS</td>
</tr>
<tr>
<td>Resource overhead</td>
<td>Container runtime</td>
<td>None</td>
</tr>
<tr>
<td>IDE integration</td>
<td>VSCode-centric</td>
<td>Terminal-native</td>
</tr>
<tr>
<td>Agent experience</td>
<td>Limited</td>
<td>Native</td>
</tr>
</tbody>
</table>
<p><strong>When to use DevContainers</strong>: When you want isolated project environments within an existing machine.</p>
<h3 id="vs-ansibleterraform">vs. Ansible/Terraform</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Ansible/TF</th>
<th>ACFS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Scope</td>
<td>Infrastructure</td>
<td>Development env</td>
</tr>
<tr>
<td>Complexity</td>
<td>High</td>
<td>Low</td>
</tr>
<tr>
<td>Audience</td>
<td>DevOps</td>
<td>Developers</td>
</tr>
<tr>
<td>Learning curve</td>
<td>Steep</td>
<td>Gentle</td>
</tr>
</tbody>
</table>
<p><strong>When to use Ansible/Terraform</strong>: When you're managing fleets of servers, not individual dev environments.</p>
<h3 id="the-acfs-sweet-spot">The ACFS Sweet Spot</h3>
<p>ACFS is optimal when you need:</p>
<ul>
<li><strong>Fast setup</strong> of a complete agentic coding environment</li>
<li><strong>Fresh Ubuntu VPS</strong> as your target</li>
<li><strong>AI coding agents</strong> as primary tools</li>
<li><strong>Throwaway/ephemeral</strong> infrastructure mindset</li>
<li><strong>Minimal configuration</strong> to get started</li>
</ul>
<hr>
<h2 id="the-dicklesworthstone-stack-philosophy">The Dicklesworthstone Stack Philosophy</h2>
<p>The 10-tool stack included in ACFS isn't randomâ€”each tool addresses a specific problem discovered through extensive multi-agent development experience.</p>
<h3 id="the-problems">The Problems</h3>
<p>Running multiple AI coding agents simultaneously surfaces problems that don't exist with single-agent or no-agent development:</p>
<ol>
<li><strong>Session chaos</strong>: Agents in random terminal windows, no organization</li>
<li><strong>File conflicts</strong>: Two agents editing the same file simultaneously</li>
<li><strong>No communication</strong>: Agents can't coordinate or share findings</li>
<li><strong>Dangerous commands</strong>: Agents running <code>git reset --hard</code> or <code>rm -rf</code> without oversight</li>
<li><strong>Lost context</strong>: No memory of what agents learned previously</li>
<li><strong>Auth switching</strong>: Different projects need different credentials</li>
<li><strong>History fragmentation</strong>: Agent conversations scattered across systems</li>
<li><strong>No task visibility</strong>: Hard to see what agents are working on</li>
<li><strong>Repo sprawl</strong>: Dozens of repos, hard to keep synced, uncommitted work everywhere</li>
<li><strong>Visual debugging gaps</strong>: Screenshots on phone, can't view in SSH terminal</li>
</ol>
<h3 id="the-solutions">The Solutions</h3>
<p>Each tool in the stack addresses specific problems:</p>
<table>
<thead>
<tr>
<th>#</th>
<th>Tool</th>
<th>Problem Solved</th>
<th>Philosophy</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>NTM</strong></td>
<td>Session chaos</td>
<td>Named sessions create order from chaos</td>
</tr>
<tr>
<td>2</td>
<td><strong>Agent Mail</strong></td>
<td>No communication + file conflicts</td>
<td>Message-passing + file reservations</td>
</tr>
<tr>
<td>3</td>
<td><strong>UBS</strong></td>
<td>Dangerous commands</td>
<td>Guardrails with intelligence</td>
</tr>
<tr>
<td>4</td>
<td><strong>Beads Viewer</strong></td>
<td>No task visibility</td>
<td>Graph-based task dependencies</td>
</tr>
<tr>
<td>5</td>
<td><strong>CASS</strong></td>
<td>History fragmentation</td>
<td>Unified search across all agents</td>
</tr>
<tr>
<td>6</td>
<td><strong>CM</strong></td>
<td>Lost context</td>
<td>Procedural memory for agents</td>
</tr>
<tr>
<td>7</td>
<td><strong>CAAM</strong></td>
<td>Auth switching</td>
<td>One command to switch identities</td>
</tr>
<tr>
<td>8</td>
<td><strong>SLB</strong></td>
<td>Dangerous commands</td>
<td>Two-person rule for nuclear options</td>
</tr>
<tr>
<td>9</td>
<td><strong>DCG</strong></td>
<td>Dangerous git/fs commands</td>
<td>Sub-millisecond Claude Code hook blocks destructive operations</td>
</tr>
<tr>
<td>10</td>
<td><strong>RU</strong></td>
<td>Repo sprawl</td>
<td>Sync repos + AI-driven commit automation across dirty repos</td>
</tr>
</tbody>
</table>
<p><strong>Bundled Utilities:</strong></p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Problem Solved</th>
<th>Philosophy</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>giil</strong></td>
<td>Visual debugging gaps</td>
<td>Download cloud images (iCloud, Dropbox, Google Photos) to terminal</td>
</tr>
<tr>
<td><strong>csctf</strong></td>
<td>Knowledge capture</td>
<td>Convert AI chat shares to searchable Markdown/HTML archives</td>
</tr>
</tbody>
</table>
<h3 id="the-synergy-effect">The Synergy Effect</h3>
<p>These tools are designed to work together:</p>
<pre><code>NTM spawns agents â†’ Agents register with Agent Mail â†’
Agent Mail reserves files â†’ DCG blocks dangerous commands â†’
UBS validates operations â†’ Beads tracks tasks â†’
CASS searches history â†’ CM provides memory â†’
CAAM manages auth â†’ SLB gates nuclear operations â†’
RU syncs repos and automates commits
</code></pre>
<p>No single tool is transformative alone. Together, they enable workflows that would otherwise be impossible:</p>
<ul>
<li><strong>10 agents working in parallel</strong> without stepping on each other</li>
<li><strong>Continuous operation</strong> across SSH disconnects</li>
<li><strong>Audit trails</strong> for every agent action</li>
<li><strong>Coordination</strong> without manual intervention</li>
<li><strong>Safety</strong> without sacrificing velocity</li>
</ul>
<h3 id="design-principles-of-the-stack">Design Principles of the Stack</h3>
<ol>
<li><strong>Unix Philosophy</strong>: Each tool does one thing well</li>
<li><strong>Composition</strong>: Tools designed to pipe into each other</li>
<li><strong>Terminal-First</strong>: TUI over GUI, speed over polish</li>
<li><strong>Agent-Native</strong>: Built for AI, not adapted for AI</li>
<li><strong>Git-Friendly</strong>: All state is auditable in version control</li>
</ol>
<hr>
<h2 id="advanced-configuration">Advanced Configuration</h2>
<p>ACFS supports various configuration mechanisms for advanced users.</p>
<h3 id="environment-variables">Environment Variables</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ACFS_HOME</code></td>
<td><code>~/.acfs</code></td>
<td>Configuration directory</td>
</tr>
<tr>
<td><code>ACFS_REF</code></td>
<td><code>main</code></td>
<td>Git ref to install from (tag, branch, or commit SHA)</td>
</tr>
<tr>
<td><code>ACFS_CHECKSUMS_REF</code></td>
<td><code>main</code> (when pinned) / <code>ACFS_REF</code> (when branch)</td>
<td>Ref used to fetch <code>checksums.yaml</code></td>
</tr>
<tr>
<td><code>ACFS_LOG_DIR</code></td>
<td><code>/var/log/acfs</code></td>
<td>Log directory</td>
</tr>
<tr>
<td><code>TARGET_USER</code></td>
<td><code>ubuntu</code></td>
<td>User to configure</td>
</tr>
<tr>
<td><code>TARGET_HOME</code></td>
<td><code>/home/$TARGET_USER</code></td>
<td>User home directory</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"><span class="hljs-comment"># Install from a tagged release (recommended for production)</span>
ACFS_REF=v0.1.0 curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/v0.1.0/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe

<span class="hljs-comment"># Install from a specific branch (development/testing)</span>
ACFS_REF=feature/new-tool curl -fsSL <span class="hljs-string">&quot;...&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe

<span class="hljs-comment"># Install from a specific commit (reproducibility)</span>
ACFS_REF=abc1234 curl -fsSL <span class="hljs-string">&quot;...&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe

<span class="hljs-comment"># Pin installer version but use latest checksums (avoid stale hash mismatches)</span>
ACFS_REF=v0.5.0 ACFS_CHECKSUMS_REF=main curl -fsSL <span class="hljs-string">&quot;https://raw.githubusercontent.com/Dicklesworthstone/agentic_coding_flywheel_setup/v0.5.0/install.sh&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --mode vibe
</code></pre>
<blockquote>
<p><strong>Tip:</strong> Always match the URL path with <code>ACFS_REF</code> so the initial script and all subsequently fetched scripts come from the same ref.
<strong>Tip:</strong> For pinned installs (tags/SHAs), checksums default to <code>main</code> to avoid stale installer hashes. Override with <code>ACFS_CHECKSUMS_REF</code> if you want checksums pinned to the same ref.</p>
</blockquote>
<h3 id="complete-installer-cli-options">Complete Installer CLI Options</h3>
<p>The installer supports extensive command-line customization:</p>
<p><strong>Execution Control:</strong></p>
<pre><code class="language-bash">--<span class="hljs-built_in">yes</span>, -y              <span class="hljs-comment"># Skip all prompts (non-interactive)</span>
--dry-run              <span class="hljs-comment"># Simulate without making changes</span>
--<span class="hljs-built_in">print</span>                <span class="hljs-comment"># Print what would be installed</span>
--mode vibe|safe       <span class="hljs-comment"># Installation mode (default: vibe)</span>
--interactive          <span class="hljs-comment"># Force interactive mode with prompts</span>
--strict               <span class="hljs-comment"># Abort on any error (vs. continue with warnings)</span>
--checksums-ref &lt;ref&gt;  <span class="hljs-comment"># Fetch checksums.yaml from this ref (default: main for pinned tags/SHAs)</span>
</code></pre>
<p><strong>Resume &amp; State:</strong></p>
<pre><code class="language-bash">--resume               <span class="hljs-comment"># Resume from last checkpoint</span>
--force-reinstall      <span class="hljs-comment"># Ignore state, reinstall everything</span>
--reset-state          <span class="hljs-comment"># Clear state.json and start fresh</span>
</code></pre>
<p><strong>Ubuntu Upgrade:</strong></p>
<pre><code class="language-bash">--skip-ubuntu-upgrade           <span class="hljs-comment"># Don&#x27;t upgrade Ubuntu version</span>
--target-ubuntu=25.10           <span class="hljs-comment"># Specify target Ubuntu version</span>
--target-ubuntu 25.04           <span class="hljs-comment"># Alternative syntax</span>
</code></pre>
<p><strong>Skip Flags:</strong></p>
<pre><code class="language-bash">--skip-postgres        <span class="hljs-comment"># Skip PostgreSQL 18</span>
--skip-vault           <span class="hljs-comment"># Skip HashiCorp Vault</span>
--skip-cloud           <span class="hljs-comment"># Skip Wrangler, Supabase, Vercel CLIs</span>
--skip-preflight       <span class="hljs-comment"># Skip pre-flight validation</span>
</code></pre>
<h3 id="module-selection">Module Selection</h3>
<p>Fine-grained control over what gets installed using manifest-driven selection:</p>
<pre><code class="language-bash">--list-modules           <span class="hljs-comment"># List available modules</span>
--print-plan             <span class="hljs-comment"># Show execution plan without running</span>
--only &lt;module&gt;          <span class="hljs-comment"># Only run specific module(s)</span>
--only-phase &lt;phase&gt;     <span class="hljs-comment"># Only run modules in a phase</span>
--skip &lt;module&gt;          <span class="hljs-comment"># Skip specific module(s)</span>
--no-deps                <span class="hljs-comment"># Don&#x27;t auto-include dependencies (âš ï¸ advanced)</span>
</code></pre>
<p><strong>Key behaviors:</strong></p>
<ul>
<li><strong>Dependency closure:</strong> <code>--only</code> automatically includes required dependencies (safe by default)</li>
<li><strong>Skip safety:</strong> <code>--skip</code> fails early if it would break a required dependency chain</li>
<li><strong>Deterministic:</strong> <code>--print-plan</code> shows exactly what will run, in what order</li>
</ul>
<p><strong>Examples:</strong>
Only install agents (plus their dependencies):</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;...&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --only-phase agents
</code></pre>
<p>Skip PostgreSQL and Vault:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;...&quot;</span> | bash -s -- --<span class="hljs-built_in">yes</span> --skip db.postgres18 --skip tools.vault
</code></pre>
<p>Preview what would run without executing:</p>
<pre><code class="language-bash">curl -fsSL <span class="hljs-string">&quot;...&quot;</span> | bash -s -- --print-plan
</code></pre>
<blockquote>
<p><strong>Note:</strong> Using <code>--no-deps</code> bypasses safety checks and may result in broken installs. Only use if you've already installed dependencies separately.</p>
</blockquote>
<h3 id="custom-post-install-hooks">Custom Post-Install Hooks</h3>
<p>Add custom steps by placing scripts in <code>~/.acfs/hooks/</code>:</p>
<pre><code class="language-bash"><span class="hljs-built_in">mkdir</span> -p ~/.acfs/hooks
<span class="hljs-built_in">cat</span> &gt; ~/.acfs/hooks/post-install.sh &lt;&lt; <span class="hljs-string">&#x27;EOF&#x27;</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># Custom post-install steps</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Running custom configuration...&quot;</span>
<span class="hljs-comment"># Your commands here</span>
EOF
<span class="hljs-built_in">chmod</span> +x ~/.acfs/hooks/post-install.sh
</code></pre>
<p>ACFS will execute <code>post-install.sh</code> after the main installation completes.</p>
<h3 id="override-tool-versions">Override Tool Versions</h3>
<p>To pin specific tool versions, set environment variables:</p>
<pre><code class="language-bash"><span class="hljs-built_in">export</span> BUN_VERSION=<span class="hljs-string">&quot;1.1.0&quot;</span>
<span class="hljs-built_in">export</span> UV_VERSION=<span class="hljs-string">&quot;0.5.0&quot;</span>
<span class="hljs-comment"># Then run installer</span>
</code></pre>
<p>Note: Not all tools support version pinning. Check individual tool documentation.</p>
<hr>
<h2 id="future-roadmap">Future Roadmap</h2>
<p>ACFS is actively developed. Here's what's coming:</p>
<h3 id="near-term-q1-2025">Near-Term (Q1 2025)</h3>
<ul class="contains-task-list">
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Full manifest-driven execution</strong>: <a href="http://install.sh">install.sh</a> consumes generated scripts</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox" checked=""type="checkbox"> <strong>Tailscale integration</strong>: Zero-config VPN for secure remote access âœ“</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox" checked=""type="checkbox"> <strong>Services setup wizard</strong>: Guide users through service account setup (<code>acfs services-setup</code>) âœ“</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Interactive module selection</strong>: Choose what to install via TUI</li>
</ul>
<h3 id="mid-term-q2-2025">Mid-Term (Q2 2025)</h3>
<ul class="contains-task-list">
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>ARM64 optimization</strong>: Native Apple Silicon and ARM VPS support</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Offline mode</strong>: Pre-downloaded package bundles</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Team mode</strong>: Shared configurations across team members</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Plugin system</strong>: Third-party tool integrations</li>
</ul>
<h3 id="long-term-2025">Long-Term (2025+)</h3>
<ul class="contains-task-list">
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>ACFS Cloud</strong>: Managed VPS provisioning + ACFS install in one click</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>IDE integrations</strong>: VSCode/Cursor extensions for remote ACFS management</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Agent marketplace</strong>: Pre-configured agent personalities and workflows</li>
<li class="task-list-item enabled"><input class="task-list-item-checkbox"type="checkbox"> <strong>Enterprise features</strong>: SSO, audit logging, compliance</li>
</ul>
<hr>
<h2 id="performance-benchmarks">Performance Benchmarks</h2>
<p>Installation times vary by VPS provider and network conditions. Here are typical benchmarks:</p>
<h3 id="installation-time-by-phase">Installation Time by Phase</h3>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Typical Duration</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>User Setup</td>
<td>10-15s</td>
<td>Fast, mostly checks</td>
</tr>
<tr>
<td>Filesystem</td>
<td>5-10s</td>
<td>Creating directories</td>
</tr>
<tr>
<td>Shell Setup</td>
<td>2-4 min</td>
<td>Oh-My-Zsh clone is slow</td>
</tr>
<tr>
<td>CLI Tools</td>
<td>3-5 min</td>
<td>Many apt packages</td>
</tr>
<tr>
<td>Languages</td>
<td>3-5 min</td>
<td>Rust compile takes longest</td>
</tr>
<tr>
<td>Agents</td>
<td>1-2 min</td>
<td>Fast bun installs</td>
</tr>
<tr>
<td>Cloud</td>
<td>1-2 min</td>
<td>Fast bun installs</td>
</tr>
<tr>
<td>Stack</td>
<td>4-6 min</td>
<td>Cargo installs</td>
</tr>
<tr>
<td>Finalize</td>
<td>30-60s</td>
<td>Config deployment</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>15-25 min</strong></td>
<td><strong>Typical full install</strong></td>
</tr>
</tbody>
</table>
<h3 id="factors-affecting-speed">Factors Affecting Speed</h3>
<table>
<thead>
<tr>
<th>Factor</th>
<th>Impact</th>
<th>Optimization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Network latency</td>
<td>High</td>
<td>Choose VPS close to package mirrors</td>
</tr>
<tr>
<td>Disk I/O</td>
<td>Medium</td>
<td>SSD/NVMe preferred</td>
</tr>
<tr>
<td>CPU cores</td>
<td>Medium</td>
<td>More cores = faster compilation</td>
</tr>
<tr>
<td>RAM</td>
<td>Low</td>
<td>4GB is sufficient</td>
</tr>
<tr>
<td>Provider</td>
<td>Variable</td>
<td>OVH and Contabo offer excellent value</td>
</tr>
</tbody>
</table>
<h3 id="resume-performance">Resume Performance</h3>
<p>Resuming from checkpoint is fast because completed phases are skipped:</p>
<pre><code>Full install:     20 minutes
Resume from 50%:  10 minutes
Resume from 90%:  2 minutes
</code></pre>
<hr>
<h2 id="license">License</h2>
<p>MIT License. See <a href="LICENSE">LICENSE</a> for details.</p>
<hr>
<h2 id="links">Links</h2>
<ul>
<li><strong>Website:</strong> <a href="https://agent-flywheel.com">agent-flywheel.com</a> â€” Interactive wizard for beginners</li>
<li><strong>GitHub:</strong> <a href="https://github.com/Dicklesworthstone/agentic_coding_flywheel_setup">Dicklesworthstone/agentic_coding_flywheel_setup</a></li>
<li><strong>Related Projects:</strong>
<ul>
<li><a href="https://github.com/Dicklesworthstone/ntm">ntm</a> - Named Tmux Manager</li>
<li><a href="https://github.com/Dicklesworthstone/beads_viewer">beads_viewer</a> - Task management TUI</li>
<li><a href="https://github.com/Dicklesworthstone/mcp_agent_mail">mcp_agent_mail</a> - Agent coordination</li>
<li><a href="https://github.com/Dicklesworthstone/coding_agent_session_search">cass</a> - Agent session search</li>
<li><a href="https://github.com/Dicklesworthstone/destructive_command_guard">dcg</a> - Destructive Command Guard</li>
<li><a href="https://github.com/Dicklesworthstone/repo_updater">ru</a> - Repo Updater</li>
</ul>
</li>
</ul>
<hr>
<h2 id="about-contributions">About Contributions</h2>
<p>Please don't take this the wrong way, but I do not accept outside contributions for any of my projects. I simply don't have the mental bandwidth to review anything, and it's my name on the thing, so I'm responsible for any problems it causes; thus, the risk-reward is highly asymmetric from my perspective. I'd also have to worry about other &quot;stakeholders,&quot; which seems unwise for tools I mostly make for myself for free. Feel free to submit issues, and even PRs if you want to illustrate a proposed fix, but know I won't merge them directly. Instead, I'll have Claude or Codex review submissions via <code>gh</code> and independently decide whether and how to address them. Bug reports in particular are welcome. Sorry if this offends, but I want to avoid wasted time and hurt feelings. I understand this isn't in sync with the prevailing open-source ethos that seeks community contributions, but it's the only way I can move at this velocity and keep my sanity.</p>
<hr>
<div align="center">
  <sub>Created by <a href="https://x.com/doodlestein">Jeffrey Emanuel</a> (<a href="https://github.com/Dicklesworthstone">@Dicklesworthstone</a>) for the agentic coding community.</sub>
</div>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>